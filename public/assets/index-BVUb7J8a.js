(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Hf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sd={exports:{}},oo={},Cd={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ts=Symbol.for("react.element"),Vf=Symbol.for("react.portal"),Uf=Symbol.for("react.fragment"),Wf=Symbol.for("react.strict_mode"),qf=Symbol.for("react.profiler"),Zf=Symbol.for("react.provider"),Gf=Symbol.for("react.context"),Kf=Symbol.for("react.forward_ref"),Yf=Symbol.for("react.suspense"),Jf=Symbol.for("react.memo"),Qf=Symbol.for("react.lazy"),Ic=Symbol.iterator;function Xf(e){return e===null||typeof e!="object"?null:(e=Ic&&e[Ic]||e["@@iterator"],typeof e=="function"?e:null)}var _d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jd=Object.assign,kd={};function Tr(e,t,n){this.props=e,this.context=t,this.refs=kd,this.updater=n||_d}Tr.prototype.isReactComponent={};Tr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Tr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bd(){}bd.prototype=Tr.prototype;function gl(e,t,n){this.props=e,this.context=t,this.refs=kd,this.updater=n||_d}var xl=gl.prototype=new bd;xl.constructor=gl;jd(xl,Tr.prototype);xl.isPureReactComponent=!0;var Rc=Array.isArray,Ed=Object.prototype.hasOwnProperty,yl={current:null},Nd={key:!0,ref:!0,__self:!0,__source:!0};function Ad(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Ed.call(t,r)&&!Nd.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ts,type:e,key:o,ref:a,props:i,_owner:yl.current}}function em(e,t){return{$$typeof:Ts,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ts}function tm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Lc=/\/+/g;function To(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tm(""+e.key):t.toString(36)}function ui(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ts:case Vf:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+To(a,0):r,Rc(i)?(n="",e!=null&&(n=e.replace(Lc,"$&/")+"/"),ui(i,t,n,"",function(u){return u})):i!=null&&(vl(i)&&(i=em(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Lc,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",Rc(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+To(o,l);a+=ui(o,t,n,c,i)}else if(c=Xf(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+To(o,l++),a+=ui(o,t,n,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Us(e,t,n){if(e==null)return e;var r=[],i=0;return ui(e,r,"","",function(o){return t.call(n,o,i++)}),r}function nm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ze={current:null},di={transition:null},rm={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:di,ReactCurrentOwner:yl};function Td(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Us,forEach:function(e,t,n){Us(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Us(e,function(){t++}),t},toArray:function(e){return Us(e,function(t){return t})||[]},only:function(e){if(!vl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=Tr;re.Fragment=Uf;re.Profiler=qf;re.PureComponent=gl;re.StrictMode=Wf;re.Suspense=Yf;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rm;re.act=Td;re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=jd({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=yl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Ed.call(t,c)&&!Nd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ts,type:e.type,key:i,ref:o,props:r,_owner:a}};re.createContext=function(e){return e={$$typeof:Gf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zf,_context:e},e.Consumer=e};re.createElement=Ad;re.createFactory=function(e){var t=Ad.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:Kf,render:e}};re.isValidElement=vl;re.lazy=function(e){return{$$typeof:Qf,_payload:{_status:-1,_result:e},_init:nm}};re.memo=function(e,t){return{$$typeof:Jf,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=di.transition;di.transition={};try{e()}finally{di.transition=t}};re.unstable_act=Td;re.useCallback=function(e,t){return Ze.current.useCallback(e,t)};re.useContext=function(e){return Ze.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return Ze.current.useDeferredValue(e)};re.useEffect=function(e,t){return Ze.current.useEffect(e,t)};re.useId=function(){return Ze.current.useId()};re.useImperativeHandle=function(e,t,n){return Ze.current.useImperativeHandle(e,t,n)};re.useInsertionEffect=function(e,t){return Ze.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return Ze.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return Ze.current.useMemo(e,t)};re.useReducer=function(e,t,n){return Ze.current.useReducer(e,t,n)};re.useRef=function(e){return Ze.current.useRef(e)};re.useState=function(e){return Ze.current.useState(e)};re.useSyncExternalStore=function(e,t,n){return Ze.current.useSyncExternalStore(e,t,n)};re.useTransition=function(){return Ze.current.useTransition()};re.version="18.3.1";Cd.exports=re;var x=Cd.exports;const ao=Hf(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm=x,im=Symbol.for("react.element"),om=Symbol.for("react.fragment"),am=Object.prototype.hasOwnProperty,lm=sm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cm={key:!0,ref:!0,__self:!0,__source:!0};function Id(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)am.call(t,r)&&!cm.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:im,type:e,key:o,ref:a,props:i,_owner:lm.current}}oo.Fragment=om;oo.jsx=Id;oo.jsxs=Id;Sd.exports=oo;var s=Sd.exports,pa={},Rd={exports:{}},at={},Ld={exports:{}},Pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,V){var G=P.length;P.push(V);e:for(;0<G;){var se=G-1>>>1,ce=P[se];if(0<i(ce,V))P[se]=V,P[G]=ce,G=se;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var V=P[0],G=P.pop();if(G!==V){P[0]=G;e:for(var se=0,ce=P.length,Ke=ce>>>1;se<Ke;){var ze=2*(se+1)-1,B=P[ze],ae=ze+1,be=P[ae];if(0>i(B,G))ae<ce&&0>i(be,B)?(P[se]=be,P[ae]=G,se=ae):(P[se]=B,P[ze]=G,se=ze);else if(ae<ce&&0>i(be,G))P[se]=be,P[ae]=G,se=ae;else break e}}return V}function i(P,V){var G=P.sortIndex-V.sortIndex;return G!==0?G:P.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],m=1,p=null,g=3,w=!1,C=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(P){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=P)r(u),V.sortIndex=V.expirationTime,t(c,V);else break;V=n(u)}}function v(P){if(_=!1,h(P),!C)if(n(c)!==null)C=!0,Z(S);else{var V=n(u);V!==null&&oe(v,V.startTime-P)}}function S(P,V){C=!1,_&&(_=!1,f(L),L=-1),w=!0;var G=g;try{for(h(V),p=n(c);p!==null&&(!(p.expirationTime>V)||P&&!W());){var se=p.callback;if(typeof se=="function"){p.callback=null,g=p.priorityLevel;var ce=se(p.expirationTime<=V);V=e.unstable_now(),typeof ce=="function"?p.callback=ce:p===n(c)&&r(c),h(V)}else r(c);p=n(c)}if(p!==null)var Ke=!0;else{var ze=n(u);ze!==null&&oe(v,ze.startTime-V),Ke=!1}return Ke}finally{p=null,g=G,w=!1}}var A=!1,I=null,L=-1,k=5,E=-1;function W(){return!(e.unstable_now()-E<k)}function Y(){if(I!==null){var P=e.unstable_now();E=P;var V=!0;try{V=I(!0,P)}finally{V?b():(A=!1,I=null)}}else A=!1}var b;if(typeof d=="function")b=function(){d(Y)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=Y,b=function(){X.postMessage(null)}}else b=function(){N(Y,0)};function Z(P){I=P,A||(A=!0,b())}function oe(P,V){L=N(function(){P(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){C||w||(C=!0,Z(S))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var G=g;g=V;try{return P()}finally{g=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,V){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var G=g;g=P;try{return V()}finally{g=G}},e.unstable_scheduleCallback=function(P,V,G){var se=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?se+G:se):G=se,P){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=G+ce,P={id:m++,callback:V,priorityLevel:P,startTime:G,expirationTime:ce,sortIndex:-1},G>se?(P.sortIndex=G,t(u,P),n(c)===null&&P===n(u)&&(_?(f(L),L=-1):_=!0,oe(v,G-se))):(P.sortIndex=ce,t(c,P),C||w||(C=!0,Z(S))),P},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(P){var V=g;return function(){var G=g;g=V;try{return P.apply(this,arguments)}finally{g=G}}}})(Pd);Ld.exports=Pd;var um=Ld.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm=x,ot=um;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dd=new Set,cs={};function Gn(e,t){wr(e,t),wr(e+"Capture",t)}function wr(e,t){for(cs[e]=t,e=0;e<t.length;e++)Dd.add(t[e])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fa=Object.prototype.hasOwnProperty,hm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pc={},Dc={};function pm(e){return fa.call(Dc,e)?!0:fa.call(Pc,e)?!1:hm.test(e)?Dc[e]=!0:(Pc[e]=!0,!1)}function fm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mm(e,t,n,r){if(t===null||typeof t>"u"||fm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ge(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oe[e]=new Ge(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oe[t]=new Ge(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oe[e]=new Ge(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oe[e]=new Ge(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oe[e]=new Ge(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oe[e]=new Ge(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oe[e]=new Ge(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oe[e]=new Ge(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oe[e]=new Ge(e,5,!1,e.toLowerCase(),null,!1,!1)});var wl=/[\-:]([a-z])/g;function Sl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wl,Sl);Oe[t]=new Ge(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wl,Sl);Oe[t]=new Ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wl,Sl);Oe[t]=new Ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oe[e]=new Ge(e,1,!1,e.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oe[e]=new Ge(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cl(e,t,n,r){var i=Oe.hasOwnProperty(t)?Oe[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mm(t,n,i,r)&&(n=null),r||i===null?pm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Xt=dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ws=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Xn=Symbol.for("react.fragment"),_l=Symbol.for("react.strict_mode"),ma=Symbol.for("react.profiler"),Md=Symbol.for("react.provider"),Bd=Symbol.for("react.context"),jl=Symbol.for("react.forward_ref"),ga=Symbol.for("react.suspense"),xa=Symbol.for("react.suspense_list"),kl=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),Od=Symbol.for("react.offscreen"),Mc=Symbol.iterator;function Br(e){return e===null||typeof e!="object"?null:(e=Mc&&e[Mc]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,Io;function Zr(e){if(Io===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Io=t&&t[1]||""}return`
`+Io+e}var Ro=!1;function Lo(e,t){if(!e||Ro)return"";Ro=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,l=o.length-1;1<=a&&0<=l&&i[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==o[l]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Ro=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Zr(e):""}function gm(e){switch(e.tag){case 5:return Zr(e.type);case 16:return Zr("Lazy");case 13:return Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 2:case 15:return e=Lo(e.type,!1),e;case 11:return e=Lo(e.type.render,!1),e;case 1:return e=Lo(e.type,!0),e;default:return""}}function ya(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xn:return"Fragment";case Qn:return"Portal";case ma:return"Profiler";case _l:return"StrictMode";case ga:return"Suspense";case xa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Bd:return(e.displayName||"Context")+".Consumer";case Md:return(e._context.displayName||"Context")+".Provider";case jl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kl:return t=e.displayName||null,t!==null?t:ya(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return ya(e(t))}catch{}}return null}function xm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ya(t);case 8:return t===_l?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ym(e){var t=zd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qs(e){e._valueTracker||(e._valueTracker=ym(e))}function Fd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=zd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ni(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function va(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Bc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Cn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $d(e,t){t=t.checked,t!=null&&Cl(e,"checked",t,!1)}function wa(e,t){$d(e,t);var n=Cn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Sa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Sa(e,t.type,Cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Oc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Sa(e,t,n){(t!=="number"||Ni(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Gr=Array.isArray;function ur(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Cn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ca(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(Gr(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Cn(n)}}function Hd(e,t){var n=Cn(t.value),r=Cn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Fc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Vd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _a(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zs,Ud=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zs=Zs||document.createElement("div"),Zs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function us(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vm=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(e){vm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jr[t]=Jr[e]})});function Wd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jr.hasOwnProperty(e)&&Jr[e]?(""+t).trim():t+"px"}function qd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Wd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var wm=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ja(e,t){if(t){if(wm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function ka(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ba=null;function bl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ea=null,dr=null,hr=null;function $c(e){if(e=Ls(e)){if(typeof Ea!="function")throw Error(D(280));var t=e.stateNode;t&&(t=po(t),Ea(e.stateNode,e.type,t))}}function Zd(e){dr?hr?hr.push(e):hr=[e]:dr=e}function Gd(){if(dr){var e=dr,t=hr;if(hr=dr=null,$c(e),t)for(e=0;e<t.length;e++)$c(t[e])}}function Kd(e,t){return e(t)}function Yd(){}var Po=!1;function Jd(e,t,n){if(Po)return e(t,n);Po=!0;try{return Kd(e,t,n)}finally{Po=!1,(dr!==null||hr!==null)&&(Yd(),Gd())}}function ds(e,t){var n=e.stateNode;if(n===null)return null;var r=po(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var Na=!1;if(qt)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Na=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Na=!1}function Sm(e,t,n,r,i,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(m){this.onError(m)}}var Qr=!1,Ai=null,Ti=!1,Aa=null,Cm={onError:function(e){Qr=!0,Ai=e}};function _m(e,t,n,r,i,o,a,l,c){Qr=!1,Ai=null,Sm.apply(Cm,arguments)}function jm(e,t,n,r,i,o,a,l,c){if(_m.apply(this,arguments),Qr){if(Qr){var u=Ai;Qr=!1,Ai=null}else throw Error(D(198));Ti||(Ti=!0,Aa=u)}}function Kn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Qd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Hc(e){if(Kn(e)!==e)throw Error(D(188))}function km(e){var t=e.alternate;if(!t){if(t=Kn(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Hc(i),e;if(o===r)return Hc(i),t;o=o.sibling}throw Error(D(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Xd(e){return e=km(e),e!==null?eh(e):null}function eh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eh(e);if(t!==null)return t;e=e.sibling}return null}var th=ot.unstable_scheduleCallback,Vc=ot.unstable_cancelCallback,bm=ot.unstable_shouldYield,Em=ot.unstable_requestPaint,ke=ot.unstable_now,Nm=ot.unstable_getCurrentPriorityLevel,El=ot.unstable_ImmediatePriority,nh=ot.unstable_UserBlockingPriority,Ii=ot.unstable_NormalPriority,Am=ot.unstable_LowPriority,rh=ot.unstable_IdlePriority,lo=null,Lt=null;function Tm(e){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(lo,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:Lm,Im=Math.log,Rm=Math.LN2;function Lm(e){return e>>>=0,e===0?32:31-(Im(e)/Rm|0)|0}var Gs=64,Ks=4194304;function Kr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ri(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Kr(l):(o&=a,o!==0&&(r=Kr(o)))}else a=n&~i,a!==0?r=Kr(a):o!==0&&(r=Kr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ct(t),i=1<<n,r|=e[n],t&=~i;return r}function Pm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Ct(o),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=Pm(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function Ta(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sh(){var e=Gs;return Gs<<=1,!(Gs&4194240)&&(Gs=64),e}function Do(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Is(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ct(t),e[t]=n}function Mm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ct(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Nl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ct(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var he=0;function ih(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var oh,Al,ah,lh,ch,Ia=!1,Ys=[],hn=null,pn=null,fn=null,hs=new Map,ps=new Map,sn=[],Bm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uc(e,t){switch(e){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":hs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ps.delete(t.pointerId)}}function zr(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Ls(t),t!==null&&Al(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Om(e,t,n,r,i){switch(t){case"focusin":return hn=zr(hn,e,t,n,r,i),!0;case"dragenter":return pn=zr(pn,e,t,n,r,i),!0;case"mouseover":return fn=zr(fn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return hs.set(o,zr(hs.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ps.set(o,zr(ps.get(o)||null,e,t,n,r,i)),!0}return!1}function uh(e){var t=Dn(e.target);if(t!==null){var n=Kn(t);if(n!==null){if(t=n.tag,t===13){if(t=Qd(n),t!==null){e.blockedOn=t,ch(e.priority,function(){ah(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ra(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ba=r,n.target.dispatchEvent(r),ba=null}else return t=Ls(n),t!==null&&Al(t),e.blockedOn=n,!1;t.shift()}return!0}function Wc(e,t,n){hi(e)&&n.delete(t)}function zm(){Ia=!1,hn!==null&&hi(hn)&&(hn=null),pn!==null&&hi(pn)&&(pn=null),fn!==null&&hi(fn)&&(fn=null),hs.forEach(Wc),ps.forEach(Wc)}function Fr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ia||(Ia=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,zm)))}function fs(e){function t(i){return Fr(i,e)}if(0<Ys.length){Fr(Ys[0],e);for(var n=1;n<Ys.length;n++){var r=Ys[n];r.blockedOn===e&&(r.blockedOn=null)}}for(hn!==null&&Fr(hn,e),pn!==null&&Fr(pn,e),fn!==null&&Fr(fn,e),hs.forEach(t),ps.forEach(t),n=0;n<sn.length;n++)r=sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<sn.length&&(n=sn[0],n.blockedOn===null);)uh(n),n.blockedOn===null&&sn.shift()}var pr=Xt.ReactCurrentBatchConfig,Li=!0;function Fm(e,t,n,r){var i=he,o=pr.transition;pr.transition=null;try{he=1,Tl(e,t,n,r)}finally{he=i,pr.transition=o}}function $m(e,t,n,r){var i=he,o=pr.transition;pr.transition=null;try{he=4,Tl(e,t,n,r)}finally{he=i,pr.transition=o}}function Tl(e,t,n,r){if(Li){var i=Ra(e,t,n,r);if(i===null)Wo(e,t,r,Pi,n),Uc(e,r);else if(Om(i,e,t,n,r))r.stopPropagation();else if(Uc(e,r),t&4&&-1<Bm.indexOf(e)){for(;i!==null;){var o=Ls(i);if(o!==null&&oh(o),o=Ra(e,t,n,r),o===null&&Wo(e,t,r,Pi,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Wo(e,t,r,null,n)}}var Pi=null;function Ra(e,t,n,r){if(Pi=null,e=bl(r),e=Dn(e),e!==null)if(t=Kn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Qd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pi=e,null}function dh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nm()){case El:return 1;case nh:return 4;case Ii:case Am:return 16;case rh:return 536870912;default:return 16}default:return 16}}var un=null,Il=null,pi=null;function hh(){if(pi)return pi;var e,t=Il,n=t.length,r,i="value"in un?un.value:un.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return pi=i.slice(e,1<r?1-r:void 0)}function fi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Js(){return!0}function qc(){return!1}function lt(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Js:qc,this.isPropagationStopped=qc,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=lt(Ir),Rs=_e({},Ir,{view:0,detail:0}),Hm=lt(Rs),Mo,Bo,$r,co=_e({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ll,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$r&&($r&&e.type==="mousemove"?(Mo=e.screenX-$r.screenX,Bo=e.screenY-$r.screenY):Bo=Mo=0,$r=e),Mo)},movementY:function(e){return"movementY"in e?e.movementY:Bo}}),Zc=lt(co),Vm=_e({},co,{dataTransfer:0}),Um=lt(Vm),Wm=_e({},Rs,{relatedTarget:0}),Oo=lt(Wm),qm=_e({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Zm=lt(qm),Gm=_e({},Ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Km=lt(Gm),Ym=_e({},Ir,{data:0}),Gc=lt(Ym),Jm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xm[e])?!!t[e]:!1}function Ll(){return eg}var tg=_e({},Rs,{key:function(e){if(e.key){var t=Jm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ll,charCode:function(e){return e.type==="keypress"?fi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ng=lt(tg),rg=_e({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kc=lt(rg),sg=_e({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ll}),ig=lt(sg),og=_e({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),ag=lt(og),lg=_e({},co,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cg=lt(lg),ug=[9,13,27,32],Pl=qt&&"CompositionEvent"in window,Xr=null;qt&&"documentMode"in document&&(Xr=document.documentMode);var dg=qt&&"TextEvent"in window&&!Xr,ph=qt&&(!Pl||Xr&&8<Xr&&11>=Xr),Yc=" ",Jc=!1;function fh(e,t){switch(e){case"keyup":return ug.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var er=!1;function hg(e,t){switch(e){case"compositionend":return mh(t);case"keypress":return t.which!==32?null:(Jc=!0,Yc);case"textInput":return e=t.data,e===Yc&&Jc?null:e;default:return null}}function pg(e,t){if(er)return e==="compositionend"||!Pl&&fh(e,t)?(e=hh(),pi=Il=un=null,er=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ph&&t.locale!=="ko"?null:t.data;default:return null}}var fg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fg[e.type]:t==="textarea"}function gh(e,t,n,r){Zd(r),t=Di(t,"onChange"),0<t.length&&(n=new Rl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var es=null,ms=null;function mg(e){Eh(e,0)}function uo(e){var t=rr(e);if(Fd(t))return e}function gg(e,t){if(e==="change")return t}var xh=!1;if(qt){var zo;if(qt){var Fo="oninput"in document;if(!Fo){var Xc=document.createElement("div");Xc.setAttribute("oninput","return;"),Fo=typeof Xc.oninput=="function"}zo=Fo}else zo=!1;xh=zo&&(!document.documentMode||9<document.documentMode)}function eu(){es&&(es.detachEvent("onpropertychange",yh),ms=es=null)}function yh(e){if(e.propertyName==="value"&&uo(ms)){var t=[];gh(t,ms,e,bl(e)),Jd(mg,t)}}function xg(e,t,n){e==="focusin"?(eu(),es=t,ms=n,es.attachEvent("onpropertychange",yh)):e==="focusout"&&eu()}function yg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uo(ms)}function vg(e,t){if(e==="click")return uo(t)}function wg(e,t){if(e==="input"||e==="change")return uo(t)}function Sg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:Sg;function gs(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fa.call(t,i)||!kt(e[i],t[i]))return!1}return!0}function tu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nu(e,t){var n=tu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tu(n)}}function vh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wh(){for(var e=window,t=Ni();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ni(e.document)}return t}function Dl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Cg(e){var t=wh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&vh(n.ownerDocument.documentElement,n)){if(r!==null&&Dl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=nu(n,o);var a=nu(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _g=qt&&"documentMode"in document&&11>=document.documentMode,tr=null,La=null,ts=null,Pa=!1;function ru(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pa||tr==null||tr!==Ni(r)||(r=tr,"selectionStart"in r&&Dl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ts&&gs(ts,r)||(ts=r,r=Di(La,"onSelect"),0<r.length&&(t=new Rl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=tr)))}function Qs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nr={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionend:Qs("Transition","TransitionEnd")},$o={},Sh={};qt&&(Sh=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function ho(e){if($o[e])return $o[e];if(!nr[e])return e;var t=nr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sh)return $o[e]=t[n];return e}var Ch=ho("animationend"),_h=ho("animationiteration"),jh=ho("animationstart"),kh=ho("transitionend"),bh=new Map,su="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(e,t){bh.set(e,t),Gn(t,[e])}for(var Ho=0;Ho<su.length;Ho++){var Vo=su[Ho],jg=Vo.toLowerCase(),kg=Vo[0].toUpperCase()+Vo.slice(1);jn(jg,"on"+kg)}jn(Ch,"onAnimationEnd");jn(_h,"onAnimationIteration");jn(jh,"onAnimationStart");jn("dblclick","onDoubleClick");jn("focusin","onFocus");jn("focusout","onBlur");jn(kh,"onTransitionEnd");wr("onMouseEnter",["mouseout","mouseover"]);wr("onMouseLeave",["mouseout","mouseover"]);wr("onPointerEnter",["pointerout","pointerover"]);wr("onPointerLeave",["pointerout","pointerover"]);Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yr));function iu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,jm(r,t,void 0,e),e.currentTarget=null}function Eh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&i.isPropagationStopped())break e;iu(i,l,u),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&i.isPropagationStopped())break e;iu(i,l,u),o=c}}}if(Ti)throw e=Aa,Ti=!1,Aa=null,e}function ge(e,t){var n=t[za];n===void 0&&(n=t[za]=new Set);var r=e+"__bubble";n.has(r)||(Nh(t,e,2,!1),n.add(r))}function Uo(e,t,n){var r=0;t&&(r|=4),Nh(n,e,r,t)}var Xs="_reactListening"+Math.random().toString(36).slice(2);function xs(e){if(!e[Xs]){e[Xs]=!0,Dd.forEach(function(n){n!=="selectionchange"&&(bg.has(n)||Uo(n,!1,e),Uo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xs]||(t[Xs]=!0,Uo("selectionchange",!1,t))}}function Nh(e,t,n,r){switch(dh(t)){case 1:var i=Fm;break;case 4:i=$m;break;default:i=Tl}n=i.bind(null,t,n,e),i=void 0,!Na||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wo(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Dn(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}Jd(function(){var u=o,m=bl(n),p=[];e:{var g=bh.get(e);if(g!==void 0){var w=Rl,C=e;switch(e){case"keypress":if(fi(n)===0)break e;case"keydown":case"keyup":w=ng;break;case"focusin":C="focus",w=Oo;break;case"focusout":C="blur",w=Oo;break;case"beforeblur":case"afterblur":w=Oo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Um;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=ig;break;case Ch:case _h:case jh:w=Zm;break;case kh:w=ag;break;case"scroll":w=Hm;break;case"wheel":w=cg;break;case"copy":case"cut":case"paste":w=Km;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Kc}var _=(t&4)!==0,N=!_&&e==="scroll",f=_?g!==null?g+"Capture":null:g;_=[];for(var d=u,h;d!==null;){h=d;var v=h.stateNode;if(h.tag===5&&v!==null&&(h=v,f!==null&&(v=ds(d,f),v!=null&&_.push(ys(d,v,h)))),N)break;d=d.return}0<_.length&&(g=new w(g,C,null,n,m),p.push({event:g,listeners:_}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",g&&n!==ba&&(C=n.relatedTarget||n.fromElement)&&(Dn(C)||C[Zt]))break e;if((w||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,w?(C=n.relatedTarget||n.toElement,w=u,C=C?Dn(C):null,C!==null&&(N=Kn(C),C!==N||C.tag!==5&&C.tag!==6)&&(C=null)):(w=null,C=u),w!==C)){if(_=Zc,v="onMouseLeave",f="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(_=Kc,v="onPointerLeave",f="onPointerEnter",d="pointer"),N=w==null?g:rr(w),h=C==null?g:rr(C),g=new _(v,d+"leave",w,n,m),g.target=N,g.relatedTarget=h,v=null,Dn(m)===u&&(_=new _(f,d+"enter",C,n,m),_.target=h,_.relatedTarget=N,v=_),N=v,w&&C)t:{for(_=w,f=C,d=0,h=_;h;h=Yn(h))d++;for(h=0,v=f;v;v=Yn(v))h++;for(;0<d-h;)_=Yn(_),d--;for(;0<h-d;)f=Yn(f),h--;for(;d--;){if(_===f||f!==null&&_===f.alternate)break t;_=Yn(_),f=Yn(f)}_=null}else _=null;w!==null&&ou(p,g,w,_,!1),C!==null&&N!==null&&ou(p,N,C,_,!0)}}e:{if(g=u?rr(u):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var S=gg;else if(Qc(g))if(xh)S=wg;else{S=yg;var A=xg}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=vg);if(S&&(S=S(e,u))){gh(p,S,n,m);break e}A&&A(e,g,u),e==="focusout"&&(A=g._wrapperState)&&A.controlled&&g.type==="number"&&Sa(g,"number",g.value)}switch(A=u?rr(u):window,e){case"focusin":(Qc(A)||A.contentEditable==="true")&&(tr=A,La=u,ts=null);break;case"focusout":ts=La=tr=null;break;case"mousedown":Pa=!0;break;case"contextmenu":case"mouseup":case"dragend":Pa=!1,ru(p,n,m);break;case"selectionchange":if(_g)break;case"keydown":case"keyup":ru(p,n,m)}var I;if(Pl)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else er?fh(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(ph&&n.locale!=="ko"&&(er||L!=="onCompositionStart"?L==="onCompositionEnd"&&er&&(I=hh()):(un=m,Il="value"in un?un.value:un.textContent,er=!0)),A=Di(u,L),0<A.length&&(L=new Gc(L,e,null,n,m),p.push({event:L,listeners:A}),I?L.data=I:(I=mh(n),I!==null&&(L.data=I)))),(I=dg?hg(e,n):pg(e,n))&&(u=Di(u,"onBeforeInput"),0<u.length&&(m=new Gc("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:u}),m.data=I))}Eh(p,t)})}function ys(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Di(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ds(e,n),o!=null&&r.unshift(ys(e,o,i)),o=ds(e,t),o!=null&&r.push(ys(e,o,i))),e=e.return}return r}function Yn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ou(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=ds(n,o),c!=null&&a.unshift(ys(n,c,l))):i||(c=ds(n,o),c!=null&&a.push(ys(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Eg=/\r\n?/g,Ng=/\u0000|\uFFFD/g;function au(e){return(typeof e=="string"?e:""+e).replace(Eg,`
`).replace(Ng,"")}function ei(e,t,n){if(t=au(t),au(e)!==t&&n)throw Error(D(425))}function Mi(){}var Da=null,Ma=null;function Ba(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Oa=typeof setTimeout=="function"?setTimeout:void 0,Ag=typeof clearTimeout=="function"?clearTimeout:void 0,lu=typeof Promise=="function"?Promise:void 0,Tg=typeof queueMicrotask=="function"?queueMicrotask:typeof lu<"u"?function(e){return lu.resolve(null).then(e).catch(Ig)}:Oa;function Ig(e){setTimeout(function(){throw e})}function qo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),fs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fs(t)}function mn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Rr=Math.random().toString(36).slice(2),It="__reactFiber$"+Rr,vs="__reactProps$"+Rr,Zt="__reactContainer$"+Rr,za="__reactEvents$"+Rr,Rg="__reactListeners$"+Rr,Lg="__reactHandles$"+Rr;function Dn(e){var t=e[It];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zt]||n[It]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=cu(e);e!==null;){if(n=e[It])return n;e=cu(e)}return t}e=n,n=e.parentNode}return null}function Ls(e){return e=e[It]||e[Zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function po(e){return e[vs]||null}var Fa=[],sr=-1;function kn(e){return{current:e}}function xe(e){0>sr||(e.current=Fa[sr],Fa[sr]=null,sr--)}function me(e,t){sr++,Fa[sr]=e.current,e.current=t}var _n={},Ve=kn(_n),Xe=kn(!1),Hn=_n;function Sr(e,t){var n=e.type.contextTypes;if(!n)return _n;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function et(e){return e=e.childContextTypes,e!=null}function Bi(){xe(Xe),xe(Ve)}function uu(e,t,n){if(Ve.current!==_n)throw Error(D(168));me(Ve,t),me(Xe,n)}function Ah(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(D(108,xm(e)||"Unknown",i));return _e({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_n,Hn=Ve.current,me(Ve,e),me(Xe,Xe.current),!0}function du(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=Ah(e,t,Hn),r.__reactInternalMemoizedMergedChildContext=e,xe(Xe),xe(Ve),me(Ve,e)):xe(Xe),me(Xe,n)}var Ot=null,fo=!1,Zo=!1;function Th(e){Ot===null?Ot=[e]:Ot.push(e)}function Pg(e){fo=!0,Th(e)}function bn(){if(!Zo&&Ot!==null){Zo=!0;var e=0,t=he;try{var n=Ot;for(he=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ot=null,fo=!1}catch(i){throw Ot!==null&&(Ot=Ot.slice(e+1)),th(El,bn),i}finally{he=t,Zo=!1}}return null}var ir=[],or=0,zi=null,Fi=0,ut=[],dt=0,Vn=null,Ft=1,$t="";function Rn(e,t){ir[or++]=Fi,ir[or++]=zi,zi=e,Fi=t}function Ih(e,t,n){ut[dt++]=Ft,ut[dt++]=$t,ut[dt++]=Vn,Vn=e;var r=Ft;e=$t;var i=32-Ct(r)-1;r&=~(1<<i),n+=1;var o=32-Ct(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ft=1<<32-Ct(t)+i|n<<i|r,$t=o+e}else Ft=1<<o|n<<i|r,$t=e}function Ml(e){e.return!==null&&(Rn(e,1),Ih(e,1,0))}function Bl(e){for(;e===zi;)zi=ir[--or],ir[or]=null,Fi=ir[--or],ir[or]=null;for(;e===Vn;)Vn=ut[--dt],ut[dt]=null,$t=ut[--dt],ut[dt]=null,Ft=ut[--dt],ut[dt]=null}var it=null,st=null,ye=!1,wt=null;function Rh(e,t){var n=ht(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function hu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,it=e,st=mn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,it=e,st=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vn!==null?{id:Ft,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ht(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,it=e,st=null,!0):!1;default:return!1}}function $a(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ha(e){if(ye){var t=st;if(t){var n=t;if(!hu(e,t)){if($a(e))throw Error(D(418));t=mn(n.nextSibling);var r=it;t&&hu(e,t)?Rh(r,n):(e.flags=e.flags&-4097|2,ye=!1,it=e)}}else{if($a(e))throw Error(D(418));e.flags=e.flags&-4097|2,ye=!1,it=e}}}function pu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;it=e}function ti(e){if(e!==it)return!1;if(!ye)return pu(e),ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ba(e.type,e.memoizedProps)),t&&(t=st)){if($a(e))throw Lh(),Error(D(418));for(;t;)Rh(e,t),t=mn(t.nextSibling)}if(pu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){st=mn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}st=null}}else st=it?mn(e.stateNode.nextSibling):null;return!0}function Lh(){for(var e=st;e;)e=mn(e.nextSibling)}function Cr(){st=it=null,ye=!1}function Ol(e){wt===null?wt=[e]:wt.push(e)}var Dg=Xt.ReactCurrentBatchConfig;function Hr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=i.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fu(e){var t=e._init;return t(e._payload)}function Ph(e){function t(f,d){if(e){var h=f.deletions;h===null?(f.deletions=[d],f.flags|=16):h.push(d)}}function n(f,d){if(!e)return null;for(;d!==null;)t(f,d),d=d.sibling;return null}function r(f,d){for(f=new Map;d!==null;)d.key!==null?f.set(d.key,d):f.set(d.index,d),d=d.sibling;return f}function i(f,d){return f=vn(f,d),f.index=0,f.sibling=null,f}function o(f,d,h){return f.index=h,e?(h=f.alternate,h!==null?(h=h.index,h<d?(f.flags|=2,d):h):(f.flags|=2,d)):(f.flags|=1048576,d)}function a(f){return e&&f.alternate===null&&(f.flags|=2),f}function l(f,d,h,v){return d===null||d.tag!==6?(d=ea(h,f.mode,v),d.return=f,d):(d=i(d,h),d.return=f,d)}function c(f,d,h,v){var S=h.type;return S===Xn?m(f,d,h.props.children,v,h.key):d!==null&&(d.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===nn&&fu(S)===d.type)?(v=i(d,h.props),v.ref=Hr(f,d,h),v.return=f,v):(v=Si(h.type,h.key,h.props,null,f.mode,v),v.ref=Hr(f,d,h),v.return=f,v)}function u(f,d,h,v){return d===null||d.tag!==4||d.stateNode.containerInfo!==h.containerInfo||d.stateNode.implementation!==h.implementation?(d=ta(h,f.mode,v),d.return=f,d):(d=i(d,h.children||[]),d.return=f,d)}function m(f,d,h,v,S){return d===null||d.tag!==7?(d=Fn(h,f.mode,v,S),d.return=f,d):(d=i(d,h),d.return=f,d)}function p(f,d,h){if(typeof d=="string"&&d!==""||typeof d=="number")return d=ea(""+d,f.mode,h),d.return=f,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Ws:return h=Si(d.type,d.key,d.props,null,f.mode,h),h.ref=Hr(f,null,d),h.return=f,h;case Qn:return d=ta(d,f.mode,h),d.return=f,d;case nn:var v=d._init;return p(f,v(d._payload),h)}if(Gr(d)||Br(d))return d=Fn(d,f.mode,h,null),d.return=f,d;ni(f,d)}return null}function g(f,d,h,v){var S=d!==null?d.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return S!==null?null:l(f,d,""+h,v);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ws:return h.key===S?c(f,d,h,v):null;case Qn:return h.key===S?u(f,d,h,v):null;case nn:return S=h._init,g(f,d,S(h._payload),v)}if(Gr(h)||Br(h))return S!==null?null:m(f,d,h,v,null);ni(f,h)}return null}function w(f,d,h,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return f=f.get(h)||null,l(d,f,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ws:return f=f.get(v.key===null?h:v.key)||null,c(d,f,v,S);case Qn:return f=f.get(v.key===null?h:v.key)||null,u(d,f,v,S);case nn:var A=v._init;return w(f,d,h,A(v._payload),S)}if(Gr(v)||Br(v))return f=f.get(h)||null,m(d,f,v,S,null);ni(d,v)}return null}function C(f,d,h,v){for(var S=null,A=null,I=d,L=d=0,k=null;I!==null&&L<h.length;L++){I.index>L?(k=I,I=null):k=I.sibling;var E=g(f,I,h[L],v);if(E===null){I===null&&(I=k);break}e&&I&&E.alternate===null&&t(f,I),d=o(E,d,L),A===null?S=E:A.sibling=E,A=E,I=k}if(L===h.length)return n(f,I),ye&&Rn(f,L),S;if(I===null){for(;L<h.length;L++)I=p(f,h[L],v),I!==null&&(d=o(I,d,L),A===null?S=I:A.sibling=I,A=I);return ye&&Rn(f,L),S}for(I=r(f,I);L<h.length;L++)k=w(I,f,L,h[L],v),k!==null&&(e&&k.alternate!==null&&I.delete(k.key===null?L:k.key),d=o(k,d,L),A===null?S=k:A.sibling=k,A=k);return e&&I.forEach(function(W){return t(f,W)}),ye&&Rn(f,L),S}function _(f,d,h,v){var S=Br(h);if(typeof S!="function")throw Error(D(150));if(h=S.call(h),h==null)throw Error(D(151));for(var A=S=null,I=d,L=d=0,k=null,E=h.next();I!==null&&!E.done;L++,E=h.next()){I.index>L?(k=I,I=null):k=I.sibling;var W=g(f,I,E.value,v);if(W===null){I===null&&(I=k);break}e&&I&&W.alternate===null&&t(f,I),d=o(W,d,L),A===null?S=W:A.sibling=W,A=W,I=k}if(E.done)return n(f,I),ye&&Rn(f,L),S;if(I===null){for(;!E.done;L++,E=h.next())E=p(f,E.value,v),E!==null&&(d=o(E,d,L),A===null?S=E:A.sibling=E,A=E);return ye&&Rn(f,L),S}for(I=r(f,I);!E.done;L++,E=h.next())E=w(I,f,L,E.value,v),E!==null&&(e&&E.alternate!==null&&I.delete(E.key===null?L:E.key),d=o(E,d,L),A===null?S=E:A.sibling=E,A=E);return e&&I.forEach(function(Y){return t(f,Y)}),ye&&Rn(f,L),S}function N(f,d,h,v){if(typeof h=="object"&&h!==null&&h.type===Xn&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case Ws:e:{for(var S=h.key,A=d;A!==null;){if(A.key===S){if(S=h.type,S===Xn){if(A.tag===7){n(f,A.sibling),d=i(A,h.props.children),d.return=f,f=d;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===nn&&fu(S)===A.type){n(f,A.sibling),d=i(A,h.props),d.ref=Hr(f,A,h),d.return=f,f=d;break e}n(f,A);break}else t(f,A);A=A.sibling}h.type===Xn?(d=Fn(h.props.children,f.mode,v,h.key),d.return=f,f=d):(v=Si(h.type,h.key,h.props,null,f.mode,v),v.ref=Hr(f,d,h),v.return=f,f=v)}return a(f);case Qn:e:{for(A=h.key;d!==null;){if(d.key===A)if(d.tag===4&&d.stateNode.containerInfo===h.containerInfo&&d.stateNode.implementation===h.implementation){n(f,d.sibling),d=i(d,h.children||[]),d.return=f,f=d;break e}else{n(f,d);break}else t(f,d);d=d.sibling}d=ta(h,f.mode,v),d.return=f,f=d}return a(f);case nn:return A=h._init,N(f,d,A(h._payload),v)}if(Gr(h))return C(f,d,h,v);if(Br(h))return _(f,d,h,v);ni(f,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,d!==null&&d.tag===6?(n(f,d.sibling),d=i(d,h),d.return=f,f=d):(n(f,d),d=ea(h,f.mode,v),d.return=f,f=d),a(f)):n(f,d)}return N}var _r=Ph(!0),Dh=Ph(!1),$i=kn(null),Hi=null,ar=null,zl=null;function Fl(){zl=ar=Hi=null}function $l(e){var t=$i.current;xe($i),e._currentValue=t}function Va(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fr(e,t){Hi=e,zl=ar=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qe=!0),e.firstContext=null)}function ft(e){var t=e._currentValue;if(zl!==e)if(e={context:e,memoizedValue:t,next:null},ar===null){if(Hi===null)throw Error(D(308));ar=e,Hi.dependencies={lanes:0,firstContext:e}}else ar=ar.next=e;return t}var Mn=null;function Hl(e){Mn===null?Mn=[e]:Mn.push(e)}function Mh(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Hl(t)):(n.next=i.next,i.next=n),t.interleaved=n,Gt(e,r)}function Gt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function Vl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ut(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Gt(e,n)}return i=r.interleaved,i===null?(t.next=t,Hl(r)):(t.next=i.next,i.next=t),r.interleaved=t,Gt(e,n)}function mi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Nl(e,n)}}function mu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vi(e,t,n,r){var i=e.updateQueue;rn=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=u:l.next=u,m.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;a=0,m=u=c=null,l=o;do{var g=l.lane,w=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=e,_=l;switch(g=t,w=n,_.tag){case 1:if(C=_.payload,typeof C=="function"){p=C.call(w,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=_.payload,g=typeof C=="function"?C.call(w,p,g):C,g==null)break e;p=_e({},p,g);break e;case 2:rn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(u=m=w,c=p):m=m.next=w,a|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(m===null&&(c=p),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=m,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Wn|=a,e.lanes=a,e.memoizedState=p}}function gu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(D(191,i));i.call(r)}}}var Ps={},Pt=kn(Ps),ws=kn(Ps),Ss=kn(Ps);function Bn(e){if(e===Ps)throw Error(D(174));return e}function Ul(e,t){switch(me(Ss,t),me(ws,e),me(Pt,Ps),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_a(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_a(t,e)}xe(Pt),me(Pt,t)}function jr(){xe(Pt),xe(ws),xe(Ss)}function Oh(e){Bn(Ss.current);var t=Bn(Pt.current),n=_a(t,e.type);t!==n&&(me(ws,e),me(Pt,n))}function Wl(e){ws.current===e&&(xe(Pt),xe(ws))}var Se=kn(0);function Ui(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Go=[];function ql(){for(var e=0;e<Go.length;e++)Go[e]._workInProgressVersionPrimary=null;Go.length=0}var gi=Xt.ReactCurrentDispatcher,Ko=Xt.ReactCurrentBatchConfig,Un=0,Ce=null,Ie=null,Le=null,Wi=!1,ns=!1,Cs=0,Mg=0;function Fe(){throw Error(D(321))}function Zl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!kt(e[n],t[n]))return!1;return!0}function Gl(e,t,n,r,i,o){if(Un=o,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gi.current=e===null||e.memoizedState===null?Fg:$g,e=n(r,i),ns){o=0;do{if(ns=!1,Cs=0,25<=o)throw Error(D(301));o+=1,Le=Ie=null,t.updateQueue=null,gi.current=Hg,e=n(r,i)}while(ns)}if(gi.current=qi,t=Ie!==null&&Ie.next!==null,Un=0,Le=Ie=Ce=null,Wi=!1,t)throw Error(D(300));return e}function Kl(){var e=Cs!==0;return Cs=0,e}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Ce.memoizedState=Le=e:Le=Le.next=e,Le}function mt(){if(Ie===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=Le===null?Ce.memoizedState:Le.next;if(t!==null)Le=t,Ie=e;else{if(e===null)throw Error(D(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Le===null?Ce.memoizedState=Le=e:Le=Le.next=e}return Le}function _s(e,t){return typeof t=="function"?t(e):t}function Yo(e){var t=mt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=Ie,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var m=u.lane;if((Un&m)===m)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=p,a=r):c=c.next=p,Ce.lanes|=m,Wn|=m}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=l,kt(r,t.memoizedState)||(Qe=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Ce.lanes|=o,Wn|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jo(e){var t=mt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);kt(o,t.memoizedState)||(Qe=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function zh(){}function Fh(e,t){var n=Ce,r=mt(),i=t(),o=!kt(r.memoizedState,i);if(o&&(r.memoizedState=i,Qe=!0),r=r.queue,Yl(Vh.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,js(9,Hh.bind(null,n,r,i,t),void 0,null),Pe===null)throw Error(D(349));Un&30||$h(n,t,i)}return i}function $h(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Hh(e,t,n,r){t.value=n,t.getSnapshot=r,Uh(t)&&Wh(e)}function Vh(e,t,n){return n(function(){Uh(t)&&Wh(e)})}function Uh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kt(e,n)}catch{return!0}}function Wh(e){var t=Gt(e,1);t!==null&&_t(t,e,1,-1)}function xu(e){var t=Tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},t.queue=e,e=e.dispatch=zg.bind(null,Ce,e),[t.memoizedState,e]}function js(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function qh(){return mt().memoizedState}function xi(e,t,n,r){var i=Tt();Ce.flags|=e,i.memoizedState=js(1|t,n,void 0,r===void 0?null:r)}function mo(e,t,n,r){var i=mt();r=r===void 0?null:r;var o=void 0;if(Ie!==null){var a=Ie.memoizedState;if(o=a.destroy,r!==null&&Zl(r,a.deps)){i.memoizedState=js(t,n,o,r);return}}Ce.flags|=e,i.memoizedState=js(1|t,n,o,r)}function yu(e,t){return xi(8390656,8,e,t)}function Yl(e,t){return mo(2048,8,e,t)}function Zh(e,t){return mo(4,2,e,t)}function Gh(e,t){return mo(4,4,e,t)}function Kh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yh(e,t,n){return n=n!=null?n.concat([e]):null,mo(4,4,Kh.bind(null,t,e),n)}function Jl(){}function Jh(e,t){var n=mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qh(e,t){var n=mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xh(e,t,n){return Un&21?(kt(n,t)||(n=sh(),Ce.lanes|=n,Wn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=n)}function Bg(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var r=Ko.transition;Ko.transition={};try{e(!1),t()}finally{he=n,Ko.transition=r}}function ep(){return mt().memoizedState}function Og(e,t,n){var r=yn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tp(e))np(t,n);else if(n=Mh(e,t,n,r),n!==null){var i=We();_t(n,e,r,i),rp(n,t,r)}}function zg(e,t,n){var r=yn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tp(e))np(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(i.hasEagerState=!0,i.eagerState=l,kt(l,a)){var c=t.interleaved;c===null?(i.next=i,Hl(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=Mh(e,t,i,r),n!==null&&(i=We(),_t(n,e,r,i),rp(n,t,r))}}function tp(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function np(e,t){ns=Wi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Nl(e,n)}}var qi={readContext:ft,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},Fg={readContext:ft,useCallback:function(e,t){return Tt().memoizedState=[e,t===void 0?null:t],e},useContext:ft,useEffect:yu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xi(4194308,4,Kh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xi(4194308,4,e,t)},useInsertionEffect:function(e,t){return xi(4,2,e,t)},useMemo:function(e,t){var n=Tt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Tt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Og.bind(null,Ce,e),[r.memoizedState,e]},useRef:function(e){var t=Tt();return e={current:e},t.memoizedState=e},useState:xu,useDebugValue:Jl,useDeferredValue:function(e){return Tt().memoizedState=e},useTransition:function(){var e=xu(!1),t=e[0];return e=Bg.bind(null,e[1]),Tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ce,i=Tt();if(ye){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Pe===null)throw Error(D(349));Un&30||$h(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,yu(Vh.bind(null,r,o,e),[e]),r.flags|=2048,js(9,Hh.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Tt(),t=Pe.identifierPrefix;if(ye){var n=$t,r=Ft;n=(r&~(1<<32-Ct(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Cs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Mg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$g={readContext:ft,useCallback:Jh,useContext:ft,useEffect:Yl,useImperativeHandle:Yh,useInsertionEffect:Zh,useLayoutEffect:Gh,useMemo:Qh,useReducer:Yo,useRef:qh,useState:function(){return Yo(_s)},useDebugValue:Jl,useDeferredValue:function(e){var t=mt();return Xh(t,Ie.memoizedState,e)},useTransition:function(){var e=Yo(_s)[0],t=mt().memoizedState;return[e,t]},useMutableSource:zh,useSyncExternalStore:Fh,useId:ep,unstable_isNewReconciler:!1},Hg={readContext:ft,useCallback:Jh,useContext:ft,useEffect:Yl,useImperativeHandle:Yh,useInsertionEffect:Zh,useLayoutEffect:Gh,useMemo:Qh,useReducer:Jo,useRef:qh,useState:function(){return Jo(_s)},useDebugValue:Jl,useDeferredValue:function(e){var t=mt();return Ie===null?t.memoizedState=e:Xh(t,Ie.memoizedState,e)},useTransition:function(){var e=Jo(_s)[0],t=mt().memoizedState;return[e,t]},useMutableSource:zh,useSyncExternalStore:Fh,useId:ep,unstable_isNewReconciler:!1};function yt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ua(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var go={isMounted:function(e){return(e=e._reactInternals)?Kn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=We(),i=yn(e),o=Ut(r,i);o.payload=t,n!=null&&(o.callback=n),t=gn(e,o,i),t!==null&&(_t(t,e,i,r),mi(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=We(),i=yn(e),o=Ut(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=gn(e,o,i),t!==null&&(_t(t,e,i,r),mi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=We(),r=yn(e),i=Ut(n,r);i.tag=2,t!=null&&(i.callback=t),t=gn(e,i,r),t!==null&&(_t(t,e,r,n),mi(t,e,r))}};function vu(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!gs(n,r)||!gs(i,o):!0}function sp(e,t,n){var r=!1,i=_n,o=t.contextType;return typeof o=="object"&&o!==null?o=ft(o):(i=et(t)?Hn:Ve.current,r=t.contextTypes,o=(r=r!=null)?Sr(e,i):_n),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=go,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function wu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Vl(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=ft(o):(o=et(t)?Hn:Ve.current,i.context=Sr(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ua(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&go.enqueueReplaceState(i,i.state,null),Vi(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function kr(e,t){try{var n="",r=t;do n+=gm(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Qo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function qa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Vg=typeof WeakMap=="function"?WeakMap:Map;function ip(e,t,n){n=Ut(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gi||(Gi=!0,nl=r),qa(e,t)},n}function op(e,t,n){n=Ut(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){qa(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){qa(e,t),typeof r!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Su(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Vg;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=r1.bind(null,e,t,n),t.then(e,e))}function Cu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _u(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ut(-1,1),t.tag=2,gn(n,t,1))),n.lanes|=1),e)}var Ug=Xt.ReactCurrentOwner,Qe=!1;function Ue(e,t,n,r){t.child=e===null?Dh(t,null,n,r):_r(t,e.child,n,r)}function ju(e,t,n,r,i){n=n.render;var o=t.ref;return fr(t,i),r=Gl(e,t,n,r,o,i),n=Kl(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kt(e,t,i)):(ye&&n&&Ml(t),t.flags|=1,Ue(e,t,r,i),t.child)}function ku(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!ic(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,ap(e,t,o,r,i)):(e=Si(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:gs,n(a,r)&&e.ref===t.ref)return Kt(e,t,i)}return t.flags|=1,e=vn(o,r),e.ref=t.ref,e.return=t,t.child=e}function ap(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(gs(o,r)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Qe=!0);else return t.lanes=e.lanes,Kt(e,t,i)}return Za(e,t,n,r,i)}function lp(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(cr,rt),rt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,me(cr,rt),rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,me(cr,rt),rt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,me(cr,rt),rt|=r;return Ue(e,t,i,n),t.child}function cp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Za(e,t,n,r,i){var o=et(n)?Hn:Ve.current;return o=Sr(t,o),fr(t,i),n=Gl(e,t,n,r,o,i),r=Kl(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kt(e,t,i)):(ye&&r&&Ml(t),t.flags|=1,Ue(e,t,n,i),t.child)}function bu(e,t,n,r,i){if(et(n)){var o=!0;Oi(t)}else o=!1;if(fr(t,i),t.stateNode===null)yi(e,t),sp(t,n,r),Wa(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=ft(u):(u=et(n)?Hn:Ve.current,u=Sr(t,u));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&wu(t,a,r,u),rn=!1;var g=t.memoizedState;a.state=g,Vi(t,r,a,i),c=t.memoizedState,l!==r||g!==c||Xe.current||rn?(typeof m=="function"&&(Ua(t,n,m,r),c=t.memoizedState),(l=rn||vu(t,n,l,r,g,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Bh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:yt(t.type,l),a.props=u,p=t.pendingProps,g=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=ft(c):(c=et(n)?Hn:Ve.current,c=Sr(t,c));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||g!==c)&&wu(t,a,r,c),rn=!1,g=t.memoizedState,a.state=g,Vi(t,r,a,i);var C=t.memoizedState;l!==p||g!==C||Xe.current||rn?(typeof w=="function"&&(Ua(t,n,w,r),C=t.memoizedState),(u=rn||vu(t,n,u,r,g,C,c)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=C),a.props=r,a.state=C,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Ga(e,t,n,r,o,i)}function Ga(e,t,n,r,i,o){cp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&du(t,n,!1),Kt(e,t,o);r=t.stateNode,Ug.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=_r(t,e.child,null,o),t.child=_r(t,null,l,o)):Ue(e,t,l,o),t.memoizedState=r.state,i&&du(t,n,!0),t.child}function up(e){var t=e.stateNode;t.pendingContext?uu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&uu(e,t.context,!1),Ul(e,t.containerInfo)}function Eu(e,t,n,r,i){return Cr(),Ol(i),t.flags|=256,Ue(e,t,n,r),t.child}var Ka={dehydrated:null,treeContext:null,retryLane:0};function Ya(e){return{baseLanes:e,cachePool:null,transitions:null}}function dp(e,t,n){var r=t.pendingProps,i=Se.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),me(Se,i&1),e===null)return Ha(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=vo(a,r,0,null),e=Fn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ya(n),t.memoizedState=Ka,e):Ql(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Wg(e,t,a,r,l,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=vn(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=vn(l,o):(o=Fn(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Ya(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Ka,r}return o=e.child,e=o.sibling,r=vn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ql(e,t){return t=vo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ri(e,t,n,r){return r!==null&&Ol(r),_r(t,e.child,null,n),e=Ql(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wg(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Qo(Error(D(422))),ri(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=vo({mode:"visible",children:r.children},i,0,null),o=Fn(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&_r(t,e.child,null,a),t.child.memoizedState=Ya(a),t.memoizedState=Ka,o);if(!(t.mode&1))return ri(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(D(419)),r=Qo(o,r,void 0),ri(e,t,a,r)}if(l=(a&e.childLanes)!==0,Qe||l){if(r=Pe,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Gt(e,i),_t(r,e,i,-1))}return sc(),r=Qo(Error(D(421))),ri(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=s1.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,st=mn(i.nextSibling),it=t,ye=!0,wt=null,e!==null&&(ut[dt++]=Ft,ut[dt++]=$t,ut[dt++]=Vn,Ft=e.id,$t=e.overflow,Vn=t),t=Ql(t,r.children),t.flags|=4096,t)}function Nu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Va(e.return,t,n)}function Xo(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function hp(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ue(e,t,r.children,n),r=Se.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nu(e,n,t);else if(e.tag===19)Nu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(me(Se,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ui(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Xo(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ui(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Xo(t,!0,n,null,o);break;case"together":Xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=vn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function qg(e,t,n){switch(t.tag){case 3:up(t),Cr();break;case 5:Oh(t);break;case 1:et(t.type)&&Oi(t);break;case 4:Ul(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;me($i,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(me(Se,Se.current&1),t.flags|=128,null):n&t.child.childLanes?dp(e,t,n):(me(Se,Se.current&1),e=Kt(e,t,n),e!==null?e.sibling:null);me(Se,Se.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return hp(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),me(Se,Se.current),r)break;return null;case 22:case 23:return t.lanes=0,lp(e,t,n)}return Kt(e,t,n)}var pp,Ja,fp,mp;pp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ja=function(){};fp=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Bn(Pt.current);var o=null;switch(n){case"input":i=va(e,i),r=va(e,r),o=[];break;case"select":i=_e({},i,{value:void 0}),r=_e({},r,{value:void 0}),o=[];break;case"textarea":i=Ca(e,i),r=Ca(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Mi)}ja(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cs.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ge("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};mp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Vr(e,t){if(!ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zg(e,t,n){var r=t.pendingProps;switch(Bl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return et(t.type)&&Bi(),$e(t),null;case 3:return r=t.stateNode,jr(),xe(Xe),xe(Ve),ql(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ti(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wt!==null&&(il(wt),wt=null))),Ja(e,t),$e(t),null;case 5:Wl(t);var i=Bn(Ss.current);if(n=t.type,e!==null&&t.stateNode!=null)fp(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return $e(t),null}if(e=Bn(Pt.current),ti(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[It]=t,r[vs]=o,e=(t.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(i=0;i<Yr.length;i++)ge(Yr[i],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":Bc(r,o),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ge("invalid",r);break;case"textarea":zc(r,o),ge("invalid",r)}ja(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&ei(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ei(r.textContent,l,e),i=["children",""+l]):cs.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ge("scroll",r)}switch(n){case"input":qs(r),Oc(r,o,!0);break;case"textarea":qs(r),Fc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Mi)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[It]=t,e[vs]=r,pp(e,t,!1,!1),t.stateNode=e;e:{switch(a=ka(n,r),n){case"dialog":ge("cancel",e),ge("close",e),i=r;break;case"iframe":case"object":case"embed":ge("load",e),i=r;break;case"video":case"audio":for(i=0;i<Yr.length;i++)ge(Yr[i],e);i=r;break;case"source":ge("error",e),i=r;break;case"img":case"image":case"link":ge("error",e),ge("load",e),i=r;break;case"details":ge("toggle",e),i=r;break;case"input":Bc(e,r),i=va(e,r),ge("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=_e({},r,{value:void 0}),ge("invalid",e);break;case"textarea":zc(e,r),i=Ca(e,r),ge("invalid",e);break;default:i=r}ja(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?qd(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ud(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&us(e,c):typeof c=="number"&&us(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(cs.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ge("scroll",e):c!=null&&Cl(e,o,c,a))}switch(n){case"input":qs(e),Oc(e,r,!1);break;case"textarea":qs(e),Fc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Cn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?ur(e,!!r.multiple,o,!1):r.defaultValue!=null&&ur(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Mi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $e(t),null;case 6:if(e&&t.stateNode!=null)mp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Bn(Ss.current),Bn(Pt.current),ti(t)){if(r=t.stateNode,n=t.memoizedProps,r[It]=t,(o=r.nodeValue!==n)&&(e=it,e!==null))switch(e.tag){case 3:ei(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ei(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[It]=t,t.stateNode=r}return $e(t),null;case 13:if(xe(Se),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ye&&st!==null&&t.mode&1&&!(t.flags&128))Lh(),Cr(),t.flags|=98560,o=!1;else if(o=ti(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(D(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(D(317));o[It]=t}else Cr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$e(t),o=!1}else wt!==null&&(il(wt),wt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Se.current&1?Re===0&&(Re=3):sc())),t.updateQueue!==null&&(t.flags|=4),$e(t),null);case 4:return jr(),Ja(e,t),e===null&&xs(t.stateNode.containerInfo),$e(t),null;case 10:return $l(t.type._context),$e(t),null;case 17:return et(t.type)&&Bi(),$e(t),null;case 19:if(xe(Se),o=t.memoizedState,o===null)return $e(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Vr(o,!1);else{if(Re!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ui(e),a!==null){for(t.flags|=128,Vr(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return me(Se,Se.current&1|2),t.child}e=e.sibling}o.tail!==null&&ke()>br&&(t.flags|=128,r=!0,Vr(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ui(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Vr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ye)return $e(t),null}else 2*ke()-o.renderingStartTime>br&&n!==1073741824&&(t.flags|=128,r=!0,Vr(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ke(),t.sibling=null,n=Se.current,me(Se,r?n&1|2:n&1),t):($e(t),null);case 22:case 23:return rc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?rt&1073741824&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Gg(e,t){switch(Bl(t),t.tag){case 1:return et(t.type)&&Bi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jr(),xe(Xe),xe(Ve),ql(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wl(t),null;case 13:if(xe(Se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Cr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(Se),null;case 4:return jr(),null;case 10:return $l(t.type._context),null;case 22:case 23:return rc(),null;case 24:return null;default:return null}}var si=!1,He=!1,Kg=typeof WeakSet=="function"?WeakSet:Set,F=null;function lr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(e,t,r)}else n.current=null}function Qa(e,t,n){try{n()}catch(r){je(e,t,r)}}var Au=!1;function Yg(e,t){if(Da=Li,e=wh(),Dl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,m=0,p=e,g=null;t:for(;;){for(var w;p!==n||i!==0&&p.nodeType!==3||(l=a+i),p!==o||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===e)break t;if(g===n&&++u===i&&(l=a),g===o&&++m===r&&(c=a),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ma={focusedElem:e,selectionRange:n},Li=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var _=C.memoizedProps,N=C.memoizedState,f=t.stateNode,d=f.getSnapshotBeforeUpdate(t.elementType===t.type?_:yt(t.type,_),N);f.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(v){je(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return C=Au,Au=!1,C}function rs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Qa(t,n,o)}i=i.next}while(i!==r)}}function xo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Xa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gp(e){var t=e.alternate;t!==null&&(e.alternate=null,gp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[It],delete t[vs],delete t[za],delete t[Rg],delete t[Lg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xp(e){return e.tag===5||e.tag===3||e.tag===4}function Tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function el(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Mi));else if(r!==4&&(e=e.child,e!==null))for(el(e,t,n),e=e.sibling;e!==null;)el(e,t,n),e=e.sibling}function tl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(tl(e,t,n),e=e.sibling;e!==null;)tl(e,t,n),e=e.sibling}var Me=null,vt=!1;function en(e,t,n){for(n=n.child;n!==null;)yp(e,t,n),n=n.sibling}function yp(e,t,n){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(lo,n)}catch{}switch(n.tag){case 5:He||lr(n,t);case 6:var r=Me,i=vt;Me=null,en(e,t,n),Me=r,vt=i,Me!==null&&(vt?(e=Me,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Me.removeChild(n.stateNode));break;case 18:Me!==null&&(vt?(e=Me,n=n.stateNode,e.nodeType===8?qo(e.parentNode,n):e.nodeType===1&&qo(e,n),fs(e)):qo(Me,n.stateNode));break;case 4:r=Me,i=vt,Me=n.stateNode.containerInfo,vt=!0,en(e,t,n),Me=r,vt=i;break;case 0:case 11:case 14:case 15:if(!He&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Qa(n,t,a),i=i.next}while(i!==r)}en(e,t,n);break;case 1:if(!He&&(lr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){je(n,t,l)}en(e,t,n);break;case 21:en(e,t,n);break;case 22:n.mode&1?(He=(r=He)||n.memoizedState!==null,en(e,t,n),He=r):en(e,t,n);break;default:en(e,t,n)}}function Iu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Kg),t.forEach(function(r){var i=i1.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Me=l.stateNode,vt=!1;break e;case 3:Me=l.stateNode.containerInfo,vt=!0;break e;case 4:Me=l.stateNode.containerInfo,vt=!0;break e}l=l.return}if(Me===null)throw Error(D(160));yp(o,a,i),Me=null,vt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){je(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vp(t,e),t=t.sibling}function vp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xt(t,e),At(e),r&4){try{rs(3,e,e.return),xo(3,e)}catch(_){je(e,e.return,_)}try{rs(5,e,e.return)}catch(_){je(e,e.return,_)}}break;case 1:xt(t,e),At(e),r&512&&n!==null&&lr(n,n.return);break;case 5:if(xt(t,e),At(e),r&512&&n!==null&&lr(n,n.return),e.flags&32){var i=e.stateNode;try{us(i,"")}catch(_){je(e,e.return,_)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&$d(i,o),ka(l,a);var u=ka(l,o);for(a=0;a<c.length;a+=2){var m=c[a],p=c[a+1];m==="style"?qd(i,p):m==="dangerouslySetInnerHTML"?Ud(i,p):m==="children"?us(i,p):Cl(i,m,p,u)}switch(l){case"input":wa(i,o);break;case"textarea":Hd(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?ur(i,!!o.multiple,w,!1):g!==!!o.multiple&&(o.defaultValue!=null?ur(i,!!o.multiple,o.defaultValue,!0):ur(i,!!o.multiple,o.multiple?[]:"",!1))}i[vs]=o}catch(_){je(e,e.return,_)}}break;case 6:if(xt(t,e),At(e),r&4){if(e.stateNode===null)throw Error(D(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(_){je(e,e.return,_)}}break;case 3:if(xt(t,e),At(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fs(t.containerInfo)}catch(_){je(e,e.return,_)}break;case 4:xt(t,e),At(e);break;case 13:xt(t,e),At(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(tc=ke())),r&4&&Iu(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(He=(u=He)||m,xt(t,e),He=u):xt(t,e),At(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!m&&e.mode&1)for(F=e,m=e.child;m!==null;){for(p=F=m;F!==null;){switch(g=F,w=g.child,g.tag){case 0:case 11:case 14:case 15:rs(4,g,g.return);break;case 1:lr(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(_){je(r,n,_)}}break;case 5:lr(g,g.return);break;case 22:if(g.memoizedState!==null){Lu(p);continue}}w!==null?(w.return=g,F=w):Lu(p)}m=m.sibling}e:for(m=null,p=e;;){if(p.tag===5){if(m===null){m=p;try{i=p.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Wd("display",a))}catch(_){je(e,e.return,_)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(_){je(e,e.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:xt(t,e),At(e),r&4&&Iu(e);break;case 21:break;default:xt(t,e),At(e)}}function At(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xp(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(us(i,""),r.flags&=-33);var o=Tu(e);tl(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Tu(e);el(e,l,a);break;default:throw Error(D(161))}}catch(c){je(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jg(e,t,n){F=e,wp(e)}function wp(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var i=F,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||si;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||He;l=si;var u=He;if(si=a,(He=c)&&!u)for(F=i;F!==null;)a=F,c=a.child,a.tag===22&&a.memoizedState!==null?Pu(i):c!==null?(c.return=a,F=c):Pu(i);for(;o!==null;)F=o,wp(o),o=o.sibling;F=i,si=l,He=u}Ru(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,F=o):Ru(e)}}function Ru(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:He||xo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!He)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&gu(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}gu(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&fs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}He||t.flags&512&&Xa(t)}catch(g){je(t,t.return,g)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function Lu(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function Pu(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xo(4,t)}catch(c){je(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){je(t,i,c)}}var o=t.return;try{Xa(t)}catch(c){je(t,o,c)}break;case 5:var a=t.return;try{Xa(t)}catch(c){je(t,a,c)}}}catch(c){je(t,t.return,c)}if(t===e){F=null;break}var l=t.sibling;if(l!==null){l.return=t.return,F=l;break}F=t.return}}var Qg=Math.ceil,Zi=Xt.ReactCurrentDispatcher,Xl=Xt.ReactCurrentOwner,pt=Xt.ReactCurrentBatchConfig,ie=0,Pe=null,Ae=null,Be=0,rt=0,cr=kn(0),Re=0,ks=null,Wn=0,yo=0,ec=0,ss=null,Je=null,tc=0,br=1/0,Bt=null,Gi=!1,nl=null,xn=null,ii=!1,dn=null,Ki=0,is=0,rl=null,vi=-1,wi=0;function We(){return ie&6?ke():vi!==-1?vi:vi=ke()}function yn(e){return e.mode&1?ie&2&&Be!==0?Be&-Be:Dg.transition!==null?(wi===0&&(wi=sh()),wi):(e=he,e!==0||(e=window.event,e=e===void 0?16:dh(e.type)),e):1}function _t(e,t,n,r){if(50<is)throw is=0,rl=null,Error(D(185));Is(e,n,r),(!(ie&2)||e!==Pe)&&(e===Pe&&(!(ie&2)&&(yo|=n),Re===4&&on(e,Be)),tt(e,r),n===1&&ie===0&&!(t.mode&1)&&(br=ke()+500,fo&&bn()))}function tt(e,t){var n=e.callbackNode;Dm(e,t);var r=Ri(e,e===Pe?Be:0);if(r===0)n!==null&&Vc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Vc(n),t===1)e.tag===0?Pg(Du.bind(null,e)):Th(Du.bind(null,e)),Tg(function(){!(ie&6)&&bn()}),n=null;else{switch(ih(r)){case 1:n=El;break;case 4:n=nh;break;case 16:n=Ii;break;case 536870912:n=rh;break;default:n=Ii}n=Np(n,Sp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sp(e,t){if(vi=-1,wi=0,ie&6)throw Error(D(327));var n=e.callbackNode;if(mr()&&e.callbackNode!==n)return null;var r=Ri(e,e===Pe?Be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Yi(e,r);else{t=r;var i=ie;ie|=2;var o=_p();(Pe!==e||Be!==t)&&(Bt=null,br=ke()+500,zn(e,t));do try{t1();break}catch(l){Cp(e,l)}while(!0);Fl(),Zi.current=o,ie=i,Ae!==null?t=0:(Pe=null,Be=0,t=Re)}if(t!==0){if(t===2&&(i=Ta(e),i!==0&&(r=i,t=sl(e,i))),t===1)throw n=ks,zn(e,0),on(e,r),tt(e,ke()),n;if(t===6)on(e,r);else{if(i=e.current.alternate,!(r&30)&&!Xg(i)&&(t=Yi(e,r),t===2&&(o=Ta(e),o!==0&&(r=o,t=sl(e,o))),t===1))throw n=ks,zn(e,0),on(e,r),tt(e,ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Ln(e,Je,Bt);break;case 3:if(on(e,r),(r&130023424)===r&&(t=tc+500-ke(),10<t)){if(Ri(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){We(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Oa(Ln.bind(null,e,Je,Bt),t);break}Ln(e,Je,Bt);break;case 4:if(on(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Ct(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Qg(r/1960))-r,10<r){e.timeoutHandle=Oa(Ln.bind(null,e,Je,Bt),r);break}Ln(e,Je,Bt);break;case 5:Ln(e,Je,Bt);break;default:throw Error(D(329))}}}return tt(e,ke()),e.callbackNode===n?Sp.bind(null,e):null}function sl(e,t){var n=ss;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=Yi(e,t),e!==2&&(t=Je,Je=n,t!==null&&il(t)),e}function il(e){Je===null?Je=e:Je.push.apply(Je,e)}function Xg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!kt(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function on(e,t){for(t&=~ec,t&=~yo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ct(t),r=1<<n;e[n]=-1,t&=~r}}function Du(e){if(ie&6)throw Error(D(327));mr();var t=Ri(e,0);if(!(t&1))return tt(e,ke()),null;var n=Yi(e,t);if(e.tag!==0&&n===2){var r=Ta(e);r!==0&&(t=r,n=sl(e,r))}if(n===1)throw n=ks,zn(e,0),on(e,t),tt(e,ke()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ln(e,Je,Bt),tt(e,ke()),null}function nc(e,t){var n=ie;ie|=1;try{return e(t)}finally{ie=n,ie===0&&(br=ke()+500,fo&&bn())}}function qn(e){dn!==null&&dn.tag===0&&!(ie&6)&&mr();var t=ie;ie|=1;var n=pt.transition,r=he;try{if(pt.transition=null,he=1,e)return e()}finally{he=r,pt.transition=n,ie=t,!(ie&6)&&bn()}}function rc(){rt=cr.current,xe(cr)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ag(n)),Ae!==null)for(n=Ae.return;n!==null;){var r=n;switch(Bl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bi();break;case 3:jr(),xe(Xe),xe(Ve),ql();break;case 5:Wl(r);break;case 4:jr();break;case 13:xe(Se);break;case 19:xe(Se);break;case 10:$l(r.type._context);break;case 22:case 23:rc()}n=n.return}if(Pe=e,Ae=e=vn(e.current,null),Be=rt=t,Re=0,ks=null,ec=yo=Wn=0,Je=ss=null,Mn!==null){for(t=0;t<Mn.length;t++)if(n=Mn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Mn=null}return e}function Cp(e,t){do{var n=Ae;try{if(Fl(),gi.current=qi,Wi){for(var r=Ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wi=!1}if(Un=0,Le=Ie=Ce=null,ns=!1,Cs=0,Xl.current=null,n===null||n.return===null){Re=1,ks=t,Ae=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Be,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,m=l,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=Cu(a);if(w!==null){w.flags&=-257,_u(w,a,l,o,t),w.mode&1&&Su(o,u,t),t=w,c=u;var C=t.updateQueue;if(C===null){var _=new Set;_.add(c),t.updateQueue=_}else C.add(c);break e}else{if(!(t&1)){Su(o,u,t),sc();break e}c=Error(D(426))}}else if(ye&&l.mode&1){var N=Cu(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),_u(N,a,l,o,t),Ol(kr(c,l));break e}}o=c=kr(c,l),Re!==4&&(Re=2),ss===null?ss=[o]:ss.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var f=ip(o,c,t);mu(o,f);break e;case 1:l=c;var d=o.type,h=o.stateNode;if(!(o.flags&128)&&(typeof d.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(xn===null||!xn.has(h)))){o.flags|=65536,t&=-t,o.lanes|=t;var v=op(o,l,t);mu(o,v);break e}}o=o.return}while(o!==null)}kp(n)}catch(S){t=S,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function _p(){var e=Zi.current;return Zi.current=qi,e===null?qi:e}function sc(){(Re===0||Re===3||Re===2)&&(Re=4),Pe===null||!(Wn&268435455)&&!(yo&268435455)||on(Pe,Be)}function Yi(e,t){var n=ie;ie|=2;var r=_p();(Pe!==e||Be!==t)&&(Bt=null,zn(e,t));do try{e1();break}catch(i){Cp(e,i)}while(!0);if(Fl(),ie=n,Zi.current=r,Ae!==null)throw Error(D(261));return Pe=null,Be=0,Re}function e1(){for(;Ae!==null;)jp(Ae)}function t1(){for(;Ae!==null&&!bm();)jp(Ae)}function jp(e){var t=Ep(e.alternate,e,rt);e.memoizedProps=e.pendingProps,t===null?kp(e):Ae=t,Xl.current=null}function kp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Gg(n,t),n!==null){n.flags&=32767,Ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Re=6,Ae=null;return}}else if(n=Zg(n,t,rt),n!==null){Ae=n;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);Re===0&&(Re=5)}function Ln(e,t,n){var r=he,i=pt.transition;try{pt.transition=null,he=1,n1(e,t,n,r)}finally{pt.transition=i,he=r}return null}function n1(e,t,n,r){do mr();while(dn!==null);if(ie&6)throw Error(D(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Mm(e,o),e===Pe&&(Ae=Pe=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ii||(ii=!0,Np(Ii,function(){return mr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=pt.transition,pt.transition=null;var a=he;he=1;var l=ie;ie|=4,Xl.current=null,Yg(e,n),vp(n,e),Cg(Ma),Li=!!Da,Ma=Da=null,e.current=n,Jg(n),Em(),ie=l,he=a,pt.transition=o}else e.current=n;if(ii&&(ii=!1,dn=e,Ki=i),o=e.pendingLanes,o===0&&(xn=null),Tm(n.stateNode),tt(e,ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gi)throw Gi=!1,e=nl,nl=null,e;return Ki&1&&e.tag!==0&&mr(),o=e.pendingLanes,o&1?e===rl?is++:(is=0,rl=e):is=0,bn(),null}function mr(){if(dn!==null){var e=ih(Ki),t=pt.transition,n=he;try{if(pt.transition=null,he=16>e?16:e,dn===null)var r=!1;else{if(e=dn,dn=null,Ki=0,ie&6)throw Error(D(331));var i=ie;for(ie|=4,F=e.current;F!==null;){var o=F,a=o.child;if(F.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(F=u;F!==null;){var m=F;switch(m.tag){case 0:case 11:case 15:rs(8,m,o)}var p=m.child;if(p!==null)p.return=m,F=p;else for(;F!==null;){m=F;var g=m.sibling,w=m.return;if(gp(m),m===u){F=null;break}if(g!==null){g.return=w,F=g;break}F=w}}}var C=o.alternate;if(C!==null){var _=C.child;if(_!==null){C.child=null;do{var N=_.sibling;_.sibling=null,_=N}while(_!==null)}}F=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,F=a;else e:for(;F!==null;){if(o=F,o.flags&2048)switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var f=o.sibling;if(f!==null){f.return=o.return,F=f;break e}F=o.return}}var d=e.current;for(F=d;F!==null;){a=F;var h=a.child;if(a.subtreeFlags&2064&&h!==null)h.return=a,F=h;else e:for(a=d;F!==null;){if(l=F,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xo(9,l)}}catch(S){je(l,l.return,S)}if(l===a){F=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,F=v;break e}F=l.return}}if(ie=i,bn(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(lo,e)}catch{}r=!0}return r}finally{he=n,pt.transition=t}}return!1}function Mu(e,t,n){t=kr(n,t),t=ip(e,t,1),e=gn(e,t,1),t=We(),e!==null&&(Is(e,1,t),tt(e,t))}function je(e,t,n){if(e.tag===3)Mu(e,e,n);else for(;t!==null;){if(t.tag===3){Mu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xn===null||!xn.has(r))){e=kr(n,e),e=op(t,e,1),t=gn(t,e,1),e=We(),t!==null&&(Is(t,1,e),tt(t,e));break}}t=t.return}}function r1(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=We(),e.pingedLanes|=e.suspendedLanes&n,Pe===e&&(Be&n)===n&&(Re===4||Re===3&&(Be&130023424)===Be&&500>ke()-tc?zn(e,0):ec|=n),tt(e,t)}function bp(e,t){t===0&&(e.mode&1?(t=Ks,Ks<<=1,!(Ks&130023424)&&(Ks=4194304)):t=1);var n=We();e=Gt(e,t),e!==null&&(Is(e,t,n),tt(e,n))}function s1(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bp(e,n)}function i1(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),bp(e,n)}var Ep;Ep=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)Qe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qe=!1,qg(e,t,n);Qe=!!(e.flags&131072)}else Qe=!1,ye&&t.flags&1048576&&Ih(t,Fi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;yi(e,t),e=t.pendingProps;var i=Sr(t,Ve.current);fr(t,n),i=Gl(null,t,r,e,i,n);var o=Kl();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,et(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vl(t),i.updater=go,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Ga(null,t,r,!0,o,n)):(t.tag=0,ye&&o&&Ml(t),Ue(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(yi(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=a1(r),e=yt(r,e),i){case 0:t=Za(null,t,r,e,n);break e;case 1:t=bu(null,t,r,e,n);break e;case 11:t=ju(null,t,r,e,n);break e;case 14:t=ku(null,t,r,yt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),Za(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),bu(e,t,r,i,n);case 3:e:{if(up(t),e===null)throw Error(D(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Bh(e,t),Vi(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=kr(Error(D(423)),t),t=Eu(e,t,r,n,i);break e}else if(r!==i){i=kr(Error(D(424)),t),t=Eu(e,t,r,n,i);break e}else for(st=mn(t.stateNode.containerInfo.firstChild),it=t,ye=!0,wt=null,n=Dh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cr(),r===i){t=Kt(e,t,n);break e}Ue(e,t,r,n)}t=t.child}return t;case 5:return Oh(t),e===null&&Ha(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,Ba(r,i)?a=null:o!==null&&Ba(r,o)&&(t.flags|=32),cp(e,t),Ue(e,t,a,n),t.child;case 6:return e===null&&Ha(t),null;case 13:return dp(e,t,n);case 4:return Ul(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_r(t,null,r,n):Ue(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),ju(e,t,r,i,n);case 7:return Ue(e,t,t.pendingProps,n),t.child;case 8:return Ue(e,t,t.pendingProps.children,n),t.child;case 12:return Ue(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,me($i,r._currentValue),r._currentValue=a,o!==null)if(kt(o.value,a)){if(o.children===i.children&&!Xe.current){t=Kt(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Ut(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?c.next=c:(c.next=m.next,m.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Va(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(D(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Va(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ue(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,fr(t,n),i=ft(i),r=r(i),t.flags|=1,Ue(e,t,r,n),t.child;case 14:return r=t.type,i=yt(r,t.pendingProps),i=yt(r.type,i),ku(e,t,r,i,n);case 15:return ap(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),yi(e,t),t.tag=1,et(r)?(e=!0,Oi(t)):e=!1,fr(t,n),sp(t,r,i),Wa(t,r,i,n),Ga(null,t,r,!0,e,n);case 19:return hp(e,t,n);case 22:return lp(e,t,n)}throw Error(D(156,t.tag))};function Np(e,t){return th(e,t)}function o1(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(e,t,n,r){return new o1(e,t,n,r)}function ic(e){return e=e.prototype,!(!e||!e.isReactComponent)}function a1(e){if(typeof e=="function")return ic(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jl)return 11;if(e===kl)return 14}return 2}function vn(e,t){var n=e.alternate;return n===null?(n=ht(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Si(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")ic(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Xn:return Fn(n.children,i,o,t);case _l:a=8,i|=8;break;case ma:return e=ht(12,n,t,i|2),e.elementType=ma,e.lanes=o,e;case ga:return e=ht(13,n,t,i),e.elementType=ga,e.lanes=o,e;case xa:return e=ht(19,n,t,i),e.elementType=xa,e.lanes=o,e;case Od:return vo(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Md:a=10;break e;case Bd:a=9;break e;case jl:a=11;break e;case kl:a=14;break e;case nn:a=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=ht(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Fn(e,t,n,r){return e=ht(7,e,r,t),e.lanes=n,e}function vo(e,t,n,r){return e=ht(22,e,r,t),e.elementType=Od,e.lanes=n,e.stateNode={isHidden:!1},e}function ea(e,t,n){return e=ht(6,e,null,t),e.lanes=n,e}function ta(e,t,n){return t=ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function l1(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Do(0),this.expirationTimes=Do(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Do(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function oc(e,t,n,r,i,o,a,l,c){return e=new l1(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ht(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vl(o),e}function c1(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ap(e){if(!e)return _n;e=e._reactInternals;e:{if(Kn(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(et(n))return Ah(e,n,t)}return t}function Tp(e,t,n,r,i,o,a,l,c){return e=oc(n,r,!0,e,i,o,a,l,c),e.context=Ap(null),n=e.current,r=We(),i=yn(n),o=Ut(r,i),o.callback=t??null,gn(n,o,i),e.current.lanes=i,Is(e,i,r),tt(e,r),e}function wo(e,t,n,r){var i=t.current,o=We(),a=yn(i);return n=Ap(n),t.context===null?t.context=n:t.pendingContext=n,t=Ut(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=gn(i,t,a),e!==null&&(_t(e,i,a,o),mi(e,i,a)),a}function Ji(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ac(e,t){Bu(e,t),(e=e.alternate)&&Bu(e,t)}function u1(){return null}var Ip=typeof reportError=="function"?reportError:function(e){console.error(e)};function lc(e){this._internalRoot=e}So.prototype.render=lc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));wo(e,t,null,null)};So.prototype.unmount=lc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qn(function(){wo(null,e,null,null)}),t[Zt]=null}};function So(e){this._internalRoot=e}So.prototype.unstable_scheduleHydration=function(e){if(e){var t=lh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<sn.length&&t!==0&&t<sn[n].priority;n++);sn.splice(n,0,e),n===0&&uh(e)}};function cc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Co(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ou(){}function d1(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Ji(a);o.call(u)}}var a=Tp(t,r,e,0,null,!1,!1,"",Ou);return e._reactRootContainer=a,e[Zt]=a.current,xs(e.nodeType===8?e.parentNode:e),qn(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Ji(c);l.call(u)}}var c=oc(e,0,!1,null,null,!1,!1,"",Ou);return e._reactRootContainer=c,e[Zt]=c.current,xs(e.nodeType===8?e.parentNode:e),qn(function(){wo(t,c,n,r)}),c}function _o(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var l=i;i=function(){var c=Ji(a);l.call(c)}}wo(t,a,e,i)}else a=d1(n,t,e,i,r);return Ji(a)}oh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Kr(t.pendingLanes);n!==0&&(Nl(t,n|1),tt(t,ke()),!(ie&6)&&(br=ke()+500,bn()))}break;case 13:qn(function(){var r=Gt(e,1);if(r!==null){var i=We();_t(r,e,1,i)}}),ac(e,1)}};Al=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var n=We();_t(t,e,134217728,n)}ac(e,134217728)}};ah=function(e){if(e.tag===13){var t=yn(e),n=Gt(e,t);if(n!==null){var r=We();_t(n,e,t,r)}ac(e,t)}};lh=function(){return he};ch=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};Ea=function(e,t,n){switch(t){case"input":if(wa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=po(r);if(!i)throw Error(D(90));Fd(r),wa(r,i)}}}break;case"textarea":Hd(e,n);break;case"select":t=n.value,t!=null&&ur(e,!!n.multiple,t,!1)}};Kd=nc;Yd=qn;var h1={usingClientEntryPoint:!1,Events:[Ls,rr,po,Zd,Gd,nc]},Ur={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p1={bundleType:Ur.bundleType,version:Ur.version,rendererPackageName:Ur.rendererPackageName,rendererConfig:Ur.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xd(e),e===null?null:e.stateNode},findFiberByHostInstance:Ur.findFiberByHostInstance||u1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oi.isDisabled&&oi.supportsFiber)try{lo=oi.inject(p1),Lt=oi}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h1;at.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cc(t))throw Error(D(200));return c1(e,t,null,n)};at.createRoot=function(e,t){if(!cc(e))throw Error(D(299));var n=!1,r="",i=Ip;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=oc(e,1,!1,null,null,n,!1,r,i),e[Zt]=t.current,xs(e.nodeType===8?e.parentNode:e),new lc(t)};at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Xd(t),e=e===null?null:e.stateNode,e};at.flushSync=function(e){return qn(e)};at.hydrate=function(e,t,n){if(!Co(t))throw Error(D(200));return _o(null,e,t,!0,n)};at.hydrateRoot=function(e,t,n){if(!cc(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=Ip;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Tp(t,null,e,1,n??null,i,!1,o,a),e[Zt]=t.current,xs(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new So(t)};at.render=function(e,t,n){if(!Co(t))throw Error(D(200));return _o(null,e,t,!1,n)};at.unmountComponentAtNode=function(e){if(!Co(e))throw Error(D(40));return e._reactRootContainer?(qn(function(){_o(null,null,e,!1,function(){e._reactRootContainer=null,e[Zt]=null})}),!0):!1};at.unstable_batchedUpdates=nc;at.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Co(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return _o(e,t,n,!1,r)};at.version="18.3.1-next-f1338f8080-20240426";function Rp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rp)}catch(e){console.error(e)}}Rp(),Rd.exports=at;var f1=Rd.exports,zu=f1;pa.createRoot=zu.createRoot,pa.hydrateRoot=zu.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Fu="popstate";function m1(e={}){function t(r,i){let{pathname:o,search:a,hash:l}=r.location;return ol("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bs(i)}return x1(t,n,null,e)}function ve(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function g1(){return Math.random().toString(36).substring(2,10)}function $u(e,t){return{usr:e.state,key:e.key,idx:t}}function ol(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Lr(t):t,state:n,key:t&&t.key||r||g1()}}function bs({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Lr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function x1(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l="POP",c=null,u=m();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function m(){return(a.state||{idx:null}).idx}function p(){l="POP";let N=m(),f=N==null?null:N-u;u=N,c&&c({action:l,location:_.location,delta:f})}function g(N,f){l="PUSH";let d=ol(_.location,N,f);u=m()+1;let h=$u(d,u),v=_.createHref(d);try{a.pushState(h,"",v)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(v)}o&&c&&c({action:l,location:_.location,delta:1})}function w(N,f){l="REPLACE";let d=ol(_.location,N,f);u=m();let h=$u(d,u),v=_.createHref(d);a.replaceState(h,"",v),o&&c&&c({action:l,location:_.location,delta:0})}function C(N){return y1(N)}let _={get action(){return l},get location(){return e(i,a)},listen(N){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Fu,p),c=N,()=>{i.removeEventListener(Fu,p),c=null}},createHref(N){return t(i,N)},createURL:C,encodeLocation(N){let f=C(N);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:g,replace:w,go(N){return a.go(N)}};return _}function y1(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ve(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:bs(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Lp(e,t,n="/"){return v1(e,t,n,!1)}function v1(e,t,n,r){let i=typeof t=="string"?Lr(t):t,o=Yt(i.pathname||"/",n);if(o==null)return null;let a=Pp(e);w1(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=I1(o);l=A1(a[c],u,r)}return l}function Pp(e,t=[],n=[],r="",i=!1){let o=(a,l,c=i,u)=>{let m={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&c)return;ve(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let p=Wt([r,m.relativePath]),g=n.concat(m);a.children&&a.children.length>0&&(ve(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Pp(a.children,t,g,p,c)),!(a.path==null&&!a.index)&&t.push({path:p,score:E1(p,a.index),routesMeta:g})};return e.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))o(a,l);else for(let u of Dp(a.path))o(a,l,!0,u)}),t}function Dp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=Dp(r.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function w1(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:N1(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var S1=/^:[\w-]+$/,C1=3,_1=2,j1=1,k1=10,b1=-2,Hu=e=>e==="*";function E1(e,t){let n=e.split("/"),r=n.length;return n.some(Hu)&&(r+=b1),t&&(r+=_1),n.filter(i=>!Hu(i)).reduce((i,o)=>i+(S1.test(o)?C1:o===""?j1:k1),r)}function N1(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function A1(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,m=o==="/"?t:t.slice(o.length)||"/",p=Qi({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),g=c.route;if(!p&&u&&n&&!r[r.length-1].route.index&&(p=Qi({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Wt([o,p.pathname]),pathnameBase:D1(Wt([o,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(o=Wt([o,p.pathnameBase]))}return a}function Qi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=T1(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,{paramName:m,isOptional:p},g)=>{if(m==="*"){let C=l[g]||"";a=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const w=l[g];return p&&!w?u[m]=void 0:u[m]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:e}}function T1(e,t=!1,n=!0){bt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function I1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return bt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Yt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function R1(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Lr(e):e;return{pathname:n?n.startsWith("/")?n:L1(n,t):t,search:M1(r),hash:B1(i)}}function L1(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function na(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function P1(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function uc(e){let t=P1(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function dc(e,t,n,r=!1){let i;typeof e=="string"?i=Lr(e):(i={...e},ve(!i.pathname||!i.pathname.includes("?"),na("?","pathname","search",i)),ve(!i.pathname||!i.pathname.includes("#"),na("#","pathname","hash",i)),ve(!i.search||!i.search.includes("#"),na("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,l;if(a==null)l=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?t[p]:"/"}let c=R1(i,l),u=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}var Wt=e=>e.join("/").replace(/\/\/+/g,"/"),D1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,B1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function O1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Mp=["POST","PUT","PATCH","DELETE"];new Set(Mp);var z1=["GET",...Mp];new Set(z1);var Pr=x.createContext(null);Pr.displayName="DataRouter";var jo=x.createContext(null);jo.displayName="DataRouterState";x.createContext(!1);var Bp=x.createContext({isTransitioning:!1});Bp.displayName="ViewTransition";var F1=x.createContext(new Map);F1.displayName="Fetchers";var $1=x.createContext(null);$1.displayName="Await";var Et=x.createContext(null);Et.displayName="Navigation";var Ds=x.createContext(null);Ds.displayName="Location";var Nt=x.createContext({outlet:null,matches:[],isDataRoute:!1});Nt.displayName="Route";var hc=x.createContext(null);hc.displayName="RouteError";function H1(e,{relative:t}={}){ve(Dr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=x.useContext(Et),{hash:i,pathname:o,search:a}=Ms(e,{relative:t}),l=o;return n!=="/"&&(l=o==="/"?n:Wt([n,o])),r.createHref({pathname:l,search:a,hash:i})}function Dr(){return x.useContext(Ds)!=null}function En(){return ve(Dr(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Ds).location}var Op="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zp(e){x.useContext(Et).static||x.useLayoutEffect(e)}function pc(){let{isDataRoute:e}=x.useContext(Nt);return e?nx():V1()}function V1(){ve(Dr(),"useNavigate() may be used only in the context of a <Router> component.");let e=x.useContext(Pr),{basename:t,navigator:n}=x.useContext(Et),{matches:r}=x.useContext(Nt),{pathname:i}=En(),o=JSON.stringify(uc(r)),a=x.useRef(!1);return zp(()=>{a.current=!0}),x.useCallback((c,u={})=>{if(bt(a.current,Op),!a.current)return;if(typeof c=="number"){n.go(c);return}let m=dc(c,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Wt([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,o,i,e])}x.createContext(null);function U1(){let{matches:e}=x.useContext(Nt),t=e[e.length-1];return t?t.params:{}}function Ms(e,{relative:t}={}){let{matches:n}=x.useContext(Nt),{pathname:r}=En(),i=JSON.stringify(uc(n));return x.useMemo(()=>dc(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function W1(e,t){return Fp(e,t)}function Fp(e,t,n,r,i){var d;ve(Dr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=x.useContext(Et),{matches:a}=x.useContext(Nt),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",m=l?l.pathnameBase:"/",p=l&&l.route;{let h=p&&p.path||"";$p(u,!p||h.endsWith("*")||h.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${h}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${h}"> to <Route path="${h==="/"?"*":`${h}/*`}">.`)}let g=En(),w;if(t){let h=typeof t=="string"?Lr(t):t;ve(m==="/"||((d=h.pathname)==null?void 0:d.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${h.pathname}" was given in the \`location\` prop.`),w=h}else w=g;let C=w.pathname||"/",_=C;if(m!=="/"){let h=m.replace(/^\//,"").split("/");_="/"+C.replace(/^\//,"").split("/").slice(h.length).join("/")}let N=Lp(e,{pathname:_});bt(p||N!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),bt(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let f=Y1(N&&N.map(h=>Object.assign({},h,{params:Object.assign({},c,h.params),pathname:Wt([m,o.encodeLocation?o.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?m:Wt([m,o.encodeLocation?o.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),a,n,r,i);return t&&f?x.createElement(Ds.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},f):f}function q1(){let e=tx(),t=O1(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=x.createElement(x.Fragment,null,x.createElement("p",null,"💿 Hey developer 👋"),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:o},"ErrorBoundary")," or"," ",x.createElement("code",{style:o},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:i},n):null,a)}var Z1=x.createElement(q1,null),G1=class extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?x.createElement(Nt.Provider,{value:this.props.routeContext},x.createElement(hc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function K1({routeContext:e,match:t,children:n}){let r=x.useContext(Pr);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(Nt.Provider,{value:e},n)}function Y1(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n==null?void 0:n.errors;if(a!=null){let u=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);ve(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=u),m.route.id){let{loaderData:p,errors:g}=n,w=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!g||g[m.route.id]===void 0);if(m.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,m,p)=>{let g,w=!1,C=null,_=null;n&&(g=a&&m.route.id?a[m.route.id]:void 0,C=m.route.errorElement||Z1,l&&(c<0&&p===0?($p("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,_=null):c===p&&(w=!0,_=m.route.hydrateFallbackElement||null)));let N=t.concat(o.slice(0,p+1)),f=()=>{let d;return g?d=C:w?d=_:m.route.Component?d=x.createElement(m.route.Component,null):m.route.element?d=m.route.element:d=u,x.createElement(K1,{match:m,routeContext:{outlet:u,matches:N,isDataRoute:n!=null},children:d})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?x.createElement(G1,{location:n.location,revalidation:n.revalidation,component:C,error:g,children:f(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:r}):f()},null)}function fc(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J1(e){let t=x.useContext(Pr);return ve(t,fc(e)),t}function Q1(e){let t=x.useContext(jo);return ve(t,fc(e)),t}function X1(e){let t=x.useContext(Nt);return ve(t,fc(e)),t}function mc(e){let t=X1(e),n=t.matches[t.matches.length-1];return ve(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ex(){return mc("useRouteId")}function tx(){var r;let e=x.useContext(hc),t=Q1("useRouteError"),n=mc("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function nx(){let{router:e}=J1("useNavigate"),t=mc("useNavigate"),n=x.useRef(!1);return zp(()=>{n.current=!0}),x.useCallback(async(i,o={})=>{bt(n.current,Op),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var Vu={};function $p(e,t,n){!t&&!Vu[e]&&(Vu[e]=!0,bt(!1,n))}x.memo(rx);function rx({routes:e,future:t,state:n,unstable_onError:r}){return Fp(e,void 0,n,r,t)}function sx({to:e,replace:t,state:n,relative:r}){ve(Dr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=x.useContext(Et);bt(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=x.useContext(Nt),{pathname:a}=En(),l=pc(),c=dc(e,uc(o),a,r==="path"),u=JSON.stringify(c);return x.useEffect(()=>{l(JSON.parse(u),{replace:t,state:n,relative:r})},[l,u,r,t,n]),null}function Jn(e){ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ix({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){ve(!Dr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),l=x.useMemo(()=>({basename:a,navigator:i,static:o,future:{}}),[a,i,o]);typeof n=="string"&&(n=Lr(n));let{pathname:c="/",search:u="",hash:m="",state:p=null,key:g="default"}=n,w=x.useMemo(()=>{let C=Yt(c,a);return C==null?null:{location:{pathname:C,search:u,hash:m,state:p,key:g},navigationType:r}},[a,c,u,m,p,g,r]);return bt(w!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:x.createElement(Et.Provider,{value:l},x.createElement(Ds.Provider,{children:t,value:w}))}function ox({children:e,location:t}){return W1(al(e),t)}function al(e,t=[]){let n=[];return x.Children.forEach(e,(r,i)=>{if(!x.isValidElement(r))return;let o=[...t,i];if(r.type===x.Fragment){n.push.apply(n,al(r.props.children,o));return}ve(r.type===Jn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ve(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=al(r.props.children,o)),n.push(a)}),n}var Ci="get",_i="application/x-www-form-urlencoded";function ko(e){return e!=null&&typeof e.tagName=="string"}function ax(e){return ko(e)&&e.tagName.toLowerCase()==="button"}function lx(e){return ko(e)&&e.tagName.toLowerCase()==="form"}function cx(e){return ko(e)&&e.tagName.toLowerCase()==="input"}function ux(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function dx(e,t){return e.button===0&&(!t||t==="_self")&&!ux(e)}var ai=null;function hx(){if(ai===null)try{new FormData(document.createElement("form"),0),ai=!1}catch{ai=!0}return ai}var px=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ra(e){return e!=null&&!px.has(e)?(bt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_i}"`),null):e}function fx(e,t){let n,r,i,o,a;if(lx(e)){let l=e.getAttribute("action");r=l?Yt(l,t):null,n=e.getAttribute("method")||Ci,i=ra(e.getAttribute("enctype"))||_i,o=new FormData(e)}else if(ax(e)||cx(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(r=c?Yt(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||Ci,i=ra(e.getAttribute("formenctype"))||ra(l.getAttribute("enctype"))||_i,o=new FormData(l,e),!hx()){let{name:u,type:m,value:p}=e;if(m==="image"){let g=u?`${u}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else u&&o.append(u,p)}}else{if(ko(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ci,r=null,i=_i,a=e}return o&&i==="text/plain"&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gc(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mx(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Yt(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function gx(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xx(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function yx(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let a=await gx(o,n);return a.links?a.links():[]}return[]}));return Cx(r.flat(1).filter(xx).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Uu(e,t,n,r,i,o){let a=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var m;return n[u].pathname!==c.pathname||((m=n[u].route.path)==null?void 0:m.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return o==="assets"?t.filter((c,u)=>a(c,u)||l(c,u)):o==="data"?t.filter((c,u)=>{var p;let m=r.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(a(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function vx(e,t,{includeHydrateFallback:n}={}){return wx(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function wx(e){return[...new Set(e)]}function Sx(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Cx(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(Sx(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function Hp(){let e=x.useContext(Pr);return gc(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _x(){let e=x.useContext(jo);return gc(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var xc=x.createContext(void 0);xc.displayName="FrameworkContext";function Vp(){let e=x.useContext(xc);return gc(e,"You must render this element inside a <HydratedRouter> element"),e}function jx(e,t){let n=x.useContext(xc),[r,i]=x.useState(!1),[o,a]=x.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:m,onTouchStart:p}=t,g=x.useRef(null);x.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let _=f=>{f.forEach(d=>{a(d.isIntersecting)})},N=new IntersectionObserver(_,{threshold:.5});return g.current&&N.observe(g.current),()=>{N.disconnect()}}},[e]),x.useEffect(()=>{if(r){let _=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(_)}}},[r]);let w=()=>{i(!0)},C=()=>{i(!1),a(!1)};return n?e!=="intent"?[o,g,{}]:[o,g,{onFocus:Wr(l,w),onBlur:Wr(c,C),onMouseEnter:Wr(u,w),onMouseLeave:Wr(m,C),onTouchStart:Wr(p,w)}]:[!1,g,{}]}function Wr(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function kx({page:e,...t}){let{router:n}=Hp(),r=x.useMemo(()=>Lp(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?x.createElement(Ex,{page:e,matches:r,...t}):null}function bx(e){let{manifest:t,routeModules:n}=Vp(),[r,i]=x.useState([]);return x.useEffect(()=>{let o=!1;return yx(e,t,n).then(a=>{o||i(a)}),()=>{o=!0}},[e,t,n]),r}function Ex({page:e,matches:t,...n}){let r=En(),{manifest:i,routeModules:o}=Vp(),{basename:a}=Hp(),{loaderData:l,matches:c}=_x(),u=x.useMemo(()=>Uu(e,t,c,i,r,"data"),[e,t,c,i,r]),m=x.useMemo(()=>Uu(e,t,c,i,r,"assets"),[e,t,c,i,r]),p=x.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let C=new Set,_=!1;if(t.forEach(f=>{var h;let d=i.routes[f.route.id];!d||!d.hasLoader||(!u.some(v=>v.route.id===f.route.id)&&f.route.id in l&&((h=o[f.route.id])!=null&&h.shouldRevalidate)||d.hasClientLoader?_=!0:C.add(f.route.id))}),C.size===0)return[];let N=mx(e,a,"data");return _&&C.size>0&&N.searchParams.set("_routes",t.filter(f=>C.has(f.route.id)).map(f=>f.route.id).join(",")),[N.pathname+N.search]},[a,l,r,i,u,t,e,o]),g=x.useMemo(()=>vx(m,i),[m,i]),w=bx(m);return x.createElement(x.Fragment,null,p.map(C=>x.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),g.map(C=>x.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),w.map(({key:C,link:_})=>x.createElement("link",{key:C,nonce:n.nonce,..._})))}function Nx(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Up=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Up&&(window.__reactRouterVersion="7.8.2")}catch{}function Ax({basename:e,children:t,window:n}){let r=x.useRef();r.current==null&&(r.current=m1({window:n,v5Compat:!0}));let i=r.current,[o,a]=x.useState({action:i.action,location:i.location}),l=x.useCallback(c=>{x.startTransition(()=>a(c))},[a]);return x.useLayoutEffect(()=>i.listen(l),[i,l]),x.createElement(ix,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var Wp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qp=x.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:m,viewTransition:p,...g},w){let{basename:C}=x.useContext(Et),_=typeof u=="string"&&Wp.test(u),N,f=!1;if(typeof u=="string"&&_&&(N=u,Up))try{let k=new URL(window.location.href),E=u.startsWith("//")?new URL(k.protocol+u):new URL(u),W=Yt(E.pathname,C);E.origin===k.origin&&W!=null?u=W+E.search+E.hash:f=!0}catch{bt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let d=H1(u,{relative:i}),[h,v,S]=jx(r,g),A=Lx(u,{replace:a,state:l,target:c,preventScrollReset:m,relative:i,viewTransition:p});function I(k){t&&t(k),k.defaultPrevented||A(k)}let L=x.createElement("a",{...g,...S,href:N||d,onClick:f||o?t:I,ref:Nx(w,v),target:c,"data-discover":!_&&n==="render"?"true":void 0});return h&&!_?x.createElement(x.Fragment,null,L,x.createElement(kx,{page:d})):L});qp.displayName="Link";var Tx=x.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:a,viewTransition:l,children:c,...u},m){let p=Ms(a,{relative:u.relative}),g=En(),w=x.useContext(jo),{navigator:C,basename:_}=x.useContext(Et),N=w!=null&&Ox(p)&&l===!0,f=C.encodeLocation?C.encodeLocation(p).pathname:p.pathname,d=g.pathname,h=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(d=d.toLowerCase(),h=h?h.toLowerCase():null,f=f.toLowerCase()),h&&_&&(h=Yt(h,_)||h);const v=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let S=d===f||!i&&d.startsWith(f)&&d.charAt(v)==="/",A=h!=null&&(h===f||!i&&h.startsWith(f)&&h.charAt(f.length)==="/"),I={isActive:S,isPending:A,isTransitioning:N},L=S?t:void 0,k;typeof r=="function"?k=r(I):k=[r,S?"active":null,A?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let E=typeof o=="function"?o(I):o;return x.createElement(qp,{...u,"aria-current":L,className:k,ref:m,style:E,to:a,viewTransition:l},typeof c=="function"?c(I):c)});Tx.displayName="NavLink";var Ix=x.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:a=Ci,action:l,onSubmit:c,relative:u,preventScrollReset:m,viewTransition:p,...g},w)=>{let C=Mx(),_=Bx(l,{relative:u}),N=a.toLowerCase()==="get"?"get":"post",f=typeof l=="string"&&Wp.test(l),d=h=>{if(c&&c(h),h.defaultPrevented)return;h.preventDefault();let v=h.nativeEvent.submitter,S=(v==null?void 0:v.getAttribute("formmethod"))||a;C(v||h.currentTarget,{fetcherKey:t,method:S,navigate:n,replace:i,state:o,relative:u,preventScrollReset:m,viewTransition:p})};return x.createElement("form",{ref:w,method:N,action:_,onSubmit:r?c:d,...g,"data-discover":!f&&e==="render"?"true":void 0})});Ix.displayName="Form";function Rx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zp(e){let t=x.useContext(Pr);return ve(t,Rx(e)),t}function Lx(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:a}={}){let l=pc(),c=En(),u=Ms(e,{relative:o});return x.useCallback(m=>{if(dx(m,t)){m.preventDefault();let p=n!==void 0?n:bs(c)===bs(u);l(e,{replace:p,state:r,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,n,r,t,e,i,o,a])}var Px=0,Dx=()=>`__${String(++Px)}__`;function Mx(){let{router:e}=Zp("useSubmit"),{basename:t}=x.useContext(Et),n=ex();return x.useCallback(async(r,i={})=>{let{action:o,method:a,encType:l,formData:c,body:u}=fx(r,t);if(i.navigate===!1){let m=i.fetcherKey||Dx();await e.fetch(m,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||a,formEncType:i.encType||l,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||a,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function Bx(e,{relative:t}={}){let{basename:n}=x.useContext(Et),r=x.useContext(Nt);ve(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Ms(e||".",{relative:t})},a=En();if(e==null){o.search=a.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(m=>m==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let m=l.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Wt([n,o.pathname])),bs(o)}function Ox(e,{relative:t}={}){let n=x.useContext(Bp);ve(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Zp("useViewTransitionState"),i=Ms(e,{relative:t});if(!n.isTransitioning)return!1;let o=Yt(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Yt(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Qi(i.pathname,a)!=null||Qi(i.pathname,o)!=null}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=()=>{};var Wu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Fx=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],a=e[n++],l=e[n++],c=((i&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return t.join("")},Kp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],a=i+1<e.length,l=a?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,m=o>>2,p=(o&3)<<4|l>>4;let g=(l&15)<<2|u>>6,w=u&63;c||(w=64,a||(g=64)),r.push(n[m],n[p],n[g],n[w])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Gp(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Fx(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],l=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const p=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||l==null||u==null||p==null)throw new $x;const g=o<<2|l>>4;if(r.push(g),u!==64){const w=l<<4&240|u>>2;if(r.push(w),p!==64){const C=u<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class $x extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hx=function(e){const t=Gp(e);return Kp.encodeByteArray(t,!0)},Yp=function(e){return Hx(e).replace(/\./g,"")},Jp=function(e){try{return Kp.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=()=>Vx().__FIREBASE_DEFAULTS__,Wx=()=>{if(typeof process>"u"||typeof Wu>"u")return;const e=Wu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},qx=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Jp(e[1]);return t&&JSON.parse(t)},yc=()=>{try{return zx()||Ux()||Wx()||qx()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Zx=e=>{var t,n;return(n=(t=yc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},Qp=()=>{var e;return(e=yc())==null?void 0:e.config},Xp=e=>{var t;return(t=yc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kx(e){return(await fetch(e,{credentials:"include"})).ok}const os={};function Yx(){const e={prod:[],emulator:[]};for(const t of Object.keys(os))os[t]?e.emulator.push(t):e.prod.push(t);return e}function Jx(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let qu=!1;function Qx(e,t){if(typeof window>"u"||typeof document>"u"||!bo(window.location.host)||os[e]===t||os[e]||qu)return;os[e]=t;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",o=Yx().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{qu=!0,a()},g}function m(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=Jx(r),w=n("text"),C=document.getElementById(w)||document.createElement("span"),_=n("learnmore"),N=document.getElementById(_)||document.createElement("a"),f=n("preprendIcon"),d=document.getElementById(f)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const h=g.element;l(h),m(N,_);const v=u();c(d,f),h.append(d,C,N,v),document.body.appendChild(h)}o?(C.innerText="Preview backend disconnected.",d.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(d.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function e0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function t0(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function n0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function r0(){const e=qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function s0(){try{return typeof indexedDB=="object"}catch{return!1}}function i0(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)==null?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="FirebaseError";class Nn extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=o0,Object.setPrototypeOf(this,Nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bs.prototype.create)}}class Bs{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],a=o?a0(o,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Nn(i,l,r)}}function a0(e,t){return e.replace(l0,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const l0=/\{\$([^}]+)}/g;function c0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Er(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],a=t[i];if(Zu(o)&&Zu(a)){if(!Er(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Zu(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function u0(e,t){const n=new d0(e,t);return n.subscribe.bind(n)}class d0{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");h0(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=sa),i.error===void 0&&(i.error=sa),i.complete===void 0&&(i.complete=sa);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function h0(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function sa(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(e){return e&&e._delegate?e._delegate:e}class Nr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Gx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(m0(t))try{this.getOrInitializeService({instanceIdentifier:Pn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Pn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Pn){return this.instances.has(t)}getOptions(t=Pn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&a.resolve(i)}return i}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:f0(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Pn){return this.component?this.component.multipleInstances?t:Pn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function f0(e){return e===Pn?void 0:e}function m0(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new p0(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(fe||(fe={}));const x0={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},y0=fe.INFO,v0={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},w0=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=v0[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ef{constructor(t){this.name=t,this._logLevel=y0,this._logHandler=w0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in fe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?x0[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...t),this._logHandler(this,fe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...t),this._logHandler(this,fe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...t),this._logHandler(this,fe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...t),this._logHandler(this,fe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...t),this._logHandler(this,fe.ERROR,...t)}}const S0=(e,t)=>t.some(n=>e instanceof n);let Gu,Ku;function C0(){return Gu||(Gu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _0(){return Ku||(Ku=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tf=new WeakMap,ll=new WeakMap,nf=new WeakMap,ia=new WeakMap,vc=new WeakMap;function j0(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{n(wn(e.result)),i()},a=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&tf.set(n,e)}).catch(()=>{}),vc.set(t,e),t}function k0(e){if(ll.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});ll.set(e,t)}let cl={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ll.get(e);if(t==="objectStoreNames")return e.objectStoreNames||nf.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function b0(e){cl=e(cl)}function E0(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(oa(this),t,...n);return nf.set(r,t.sort?t.sort():[t]),wn(r)}:_0().includes(e)?function(...t){return e.apply(oa(this),t),wn(tf.get(this))}:function(...t){return wn(e.apply(oa(this),t))}}function N0(e){return typeof e=="function"?E0(e):(e instanceof IDBTransaction&&k0(e),S0(e,C0())?new Proxy(e,cl):e)}function wn(e){if(e instanceof IDBRequest)return j0(e);if(ia.has(e))return ia.get(e);const t=N0(e);return t!==e&&(ia.set(e,t),vc.set(t,e)),t}const oa=e=>vc.get(e);function A0(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),l=wn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(wn(a.result),c.oldVersion,c.newVersion,wn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const T0=["get","getKey","getAll","getAllKeys","count"],I0=["put","add","delete","clear"],aa=new Map;function Yu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(aa.get(t))return aa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=I0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||T0.includes(n)))return;const o=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&c.done]))[0]};return aa.set(t,o),o}b0(e=>({...e,get:(t,n,r)=>Yu(t,n)||e.get(t,n,r),has:(t,n)=>!!Yu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(L0(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function L0(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ul="@firebase/app",Ju="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt=new ef("@firebase/app"),P0="@firebase/app-compat",D0="@firebase/analytics-compat",M0="@firebase/analytics",B0="@firebase/app-check-compat",O0="@firebase/app-check",z0="@firebase/auth",F0="@firebase/auth-compat",$0="@firebase/database",H0="@firebase/data-connect",V0="@firebase/database-compat",U0="@firebase/functions",W0="@firebase/functions-compat",q0="@firebase/installations",Z0="@firebase/installations-compat",G0="@firebase/messaging",K0="@firebase/messaging-compat",Y0="@firebase/performance",J0="@firebase/performance-compat",Q0="@firebase/remote-config",X0="@firebase/remote-config-compat",ey="@firebase/storage",ty="@firebase/storage-compat",ny="@firebase/firestore",ry="@firebase/ai",sy="@firebase/firestore-compat",iy="firebase",oy="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="[DEFAULT]",ay={[ul]:"fire-core",[P0]:"fire-core-compat",[M0]:"fire-analytics",[D0]:"fire-analytics-compat",[O0]:"fire-app-check",[B0]:"fire-app-check-compat",[z0]:"fire-auth",[F0]:"fire-auth-compat",[$0]:"fire-rtdb",[H0]:"fire-data-connect",[V0]:"fire-rtdb-compat",[U0]:"fire-fn",[W0]:"fire-fn-compat",[q0]:"fire-iid",[Z0]:"fire-iid-compat",[G0]:"fire-fcm",[K0]:"fire-fcm-compat",[Y0]:"fire-perf",[J0]:"fire-perf-compat",[Q0]:"fire-rc",[X0]:"fire-rc-compat",[ey]:"fire-gcs",[ty]:"fire-gcs-compat",[ny]:"fire-fst",[sy]:"fire-fst-compat",[ry]:"fire-vertex","fire-js":"fire-js",[iy]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new Map,ly=new Map,hl=new Map;function Qu(e,t){try{e.container.addComponent(t)}catch(n){Jt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Es(e){const t=e.name;if(hl.has(t))return Jt.debug(`There were multiple attempts to register component ${t}.`),!1;hl.set(t,e);for(const n of Xi.values())Qu(n,e);for(const n of ly.values())Qu(n,e);return!0}function rf(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Rt(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sn=new Bs("app","Firebase",cy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=oy;function sf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:dl,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw Sn.create("bad-app-name",{appName:String(i)});if(n||(n=Qp()),!n)throw Sn.create("no-options");const o=Xi.get(i);if(o){if(Er(n,o.options)&&Er(r,o.config))return o;throw Sn.create("duplicate-app",{appName:i})}const a=new g0(i);for(const c of hl.values())a.addComponent(c);const l=new uy(n,r,a);return Xi.set(i,l),l}function dy(e=dl){const t=Xi.get(e);if(!t&&e===dl&&Qp())return sf();if(!t)throw Sn.create("no-app",{appName:e});return t}function gr(e,t,n){let r=ay[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${t}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Jt.warn(a.join(" "));return}Es(new Nr(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="firebase-heartbeat-database",py=1,Ns="firebase-heartbeat-store";let la=null;function of(){return la||(la=A0(hy,py,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ns)}catch(n){console.warn(n)}}}}).catch(e=>{throw Sn.create("idb-open",{originalErrorMessage:e.message})})),la}async function fy(e){try{const n=(await of()).transaction(Ns),r=await n.objectStore(Ns).get(af(e));return await n.done,r}catch(t){if(t instanceof Nn)Jt.warn(t.message);else{const n=Sn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Jt.warn(n.message)}}}async function Xu(e,t){try{const r=(await of()).transaction(Ns,"readwrite");await r.objectStore(Ns).put(t,af(e)),await r.done}catch(n){if(n instanceof Nn)Jt.warn(n.message);else{const r=Sn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jt.warn(r.message)}}}function af(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=1024,gy=30;class xy{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ed();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>gy){const a=wy(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jt.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ed(),{heartbeatsToSend:r,unsentEntries:i}=yy(this._heartbeatsCache.heartbeats),o=Yp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Jt.warn(n),""}}}function ed(){return new Date().toISOString().substring(0,10)}function yy(e,t=my){const n=[];let r=e.slice();for(const i of e){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),td(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),td(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vy{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s0()?i0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fy(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xu(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xu(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function td(e){return Yp(JSON.stringify({version:2,heartbeats:e})).length}function wy(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(e){Es(new Nr("platform-logger",t=>new R0(t),"PRIVATE")),Es(new Nr("heartbeat",t=>new xy(t),"PRIVATE")),gr(ul,Ju,e),gr(ul,Ju,"esm2020"),gr("fire-js","")}Sy("");var Cy="firebase",_y="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(Cy,_y,"app");function lf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jy=lf,cf=new Bs("auth","Firebase",lf());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new ef("@firebase/auth");function ky(e,...t){eo.logLevel<=fe.WARN&&eo.warn(`Auth (${zs}): ${e}`,...t)}function ji(e,...t){eo.logLevel<=fe.ERROR&&eo.error(`Auth (${zs}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(e,...t){throw Sc(e,...t)}function jt(e,...t){return Sc(e,...t)}function wc(e,t,n){const r={...jy(),[t]:n};return new Bs("auth","Firebase",r).create(t,{appName:e.name})}function $n(e){return wc(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function by(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Mt(e,"argument-error"),wc(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sc(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return cf.create(e,...t)}function J(e,t,...n){if(!e)throw Sc(t,...n)}function Ht(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ji(t),new Error(t)}function Qt(e,t){e||Ht(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Ey(){return nd()==="http:"||nd()==="https:"}function nd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ey()||t0()||"connection"in navigator)?navigator.onLine:!0}function Ay(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n){this.shortDelay=t,this.longDelay=n,Qt(n>t,"Short delay should be less than long delay!"),this.isMobile=Xx()||n0()}get(){return Ny()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(e,t){Qt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ry=new Fs(3e4,6e4);function _c(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Mr(e,t,n,r,i={}){return df(e,i,async()=>{let o={},a={};r&&(t==="GET"?a=r:o={body:JSON.stringify(r)});const l=Os({key:e.config.apiKey,...a}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...o};return e0()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&bo(e.emulatorConfig.host)&&(u.credentials="include"),uf.fetch()(await hf(e,e.config.apiHost,n,l),u)})}async function df(e,t,n){e._canInitEmulator=!1;const r={...Ty,...t};try{const i=new Py(e),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw li(e,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw li(e,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw li(e,"email-already-in-use",a);if(c==="USER_DISABLED")throw li(e,"user-disabled",a);const m=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw wc(e,m,u);Mt(e,m)}}catch(i){if(i instanceof Nn)throw i;Mt(e,"network-request-failed",{message:String(i)})}}async function Ly(e,t,n,r,i={}){const o=await Mr(e,t,n,r,i);return"mfaPendingCredential"in o&&Mt(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function hf(e,t,n,r){const i=`${t}${n}?${r}`,o=e,a=o.config.emulator?Cc(e.config,i):`${e.config.apiScheme}://${i}`;return Iy.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class Py{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jt(this.auth,"network-request-failed")),Ry.get())})}}function li(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=jt(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dy(e,t){return Mr(e,"POST","/v1/accounts:delete",t)}async function to(e,t){return Mr(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function My(e,t=!1){const n=An(e),r=await n.getIdToken(t),i=jc(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:as(ca(i.auth_time)),issuedAtTime:as(ca(i.iat)),expirationTime:as(ca(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ca(e){return Number(e)*1e3}function jc(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return ji("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jp(n);return i?JSON.parse(i):(ji("Failed to decode base64 JWT payload"),null)}catch(i){return ji("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rd(e){const t=jc(e);return J(t,"internal-error"),J(typeof t.exp<"u","internal-error"),J(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function As(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Nn&&By(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function By({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=as(this.lastLoginAt),this.creationTime=as(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(e){var p;const t=e.auth,n=await e.getIdToken(),r=await As(e,to(t,{idToken:n}));J(r==null?void 0:r.users.length,t,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const o=(p=i.providerUserInfo)!=null&&p.length?pf(i.providerUserInfo):[],a=Fy(e.providerData,o),l=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new fl(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,m)}async function zy(e){const t=An(e);await no(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Fy(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function pf(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $y(e,t){const n=await df(e,{},async()=>{const r=Os({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,a=await hf(e,i,"/v1/token",`key=${o}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return e.emulatorConfig&&bo(e.emulatorConfig.host)&&(c.credentials="include"),uf.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Hy(e,t){return Mr(e,"POST","/v2/accounts:revokeToken",_c(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){J(t.idToken,"internal-error"),J(typeof t.idToken<"u","internal-error"),J(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):rd(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){J(t.length!==0,"internal-error");const n=rd(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await $y(t,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,a=new xr;return r&&(J(typeof r=="string","internal-error",{appName:t}),a.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:t}),a.accessToken=i),o&&(J(typeof o=="number","internal-error",{appName:t}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new xr,this.toJSON())}_performRefresh(){return Ht("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(e,t){J(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class St{constructor({uid:t,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Oy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new fl(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const n=await As(this,this.stsTokenManager.getToken(this.auth,t));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return My(this,t)}reload(){return zy(this)}_assign(t){this!==t&&(J(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new St({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await no(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rt(this.auth.app))return Promise.reject($n(this.auth));const t=await this.getIdToken();return await As(this,Dy(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:w,providerData:C,stsTokenManager:_}=n;J(p&&_,t,"internal-error");const N=xr.fromJSON(this.name,_);J(typeof p=="string",t,"internal-error"),tn(r,t.name),tn(i,t.name),J(typeof g=="boolean",t,"internal-error"),J(typeof w=="boolean",t,"internal-error"),tn(o,t.name),tn(a,t.name),tn(l,t.name),tn(c,t.name),tn(u,t.name),tn(m,t.name);const f=new St({uid:p,auth:t,email:i,emailVerified:g,displayName:r,isAnonymous:w,photoURL:a,phoneNumber:o,tenantId:l,stsTokenManager:N,createdAt:u,lastLoginAt:m});return C&&Array.isArray(C)&&(f.providerData=C.map(d=>({...d}))),c&&(f._redirectEventId=c),f}static async _fromIdTokenResponse(t,n,r=!1){const i=new xr;i.updateFromServerResponse(n);const o=new St({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await no(o),o}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];J(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?pf(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),l=new xr;l.updateFromIdToken(r);const c=new St({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new fl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new Map;function Vt(e){Qt(e instanceof Function,"Expected a class definition");let t=sd.get(e);return t?(Qt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,sd.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}ff.type="NONE";const id=ff;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(e,t,n){return`firebase:${e}:${t}:${n}`}class yr{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=ki(this.userKey,i.apiKey,o),this.fullPersistenceKey=ki("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await to(this.auth,{idToken:t}).catch(()=>{});return n?St._fromGetAccountInfoResponse(this.auth,n,t):null}return St._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new yr(Vt(id),t,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Vt(id);const a=ki(r,t.config.apiKey,t.name);let l=null;for(const u of n)try{const m=await u._get(a);if(m){let p;if(typeof m=="string"){const g=await to(t,{idToken:m}).catch(()=>{});if(!g)break;p=await St._fromGetAccountInfoResponse(t,g,m)}else p=St._fromJSON(t,m);u!==o&&(l=p),o=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new yr(o,t,r):(o=c[0],l&&await o._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(a)}catch{}})),new yr(o,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yf(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mf(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wf(t))return"Blackberry";if(Sf(t))return"Webos";if(gf(t))return"Safari";if((t.includes("chrome/")||xf(t))&&!t.includes("edge/"))return"Chrome";if(vf(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mf(e=qe()){return/firefox\//i.test(e)}function gf(e=qe()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function xf(e=qe()){return/crios\//i.test(e)}function yf(e=qe()){return/iemobile/i.test(e)}function vf(e=qe()){return/android/i.test(e)}function wf(e=qe()){return/blackberry/i.test(e)}function Sf(e=qe()){return/webos/i.test(e)}function kc(e=qe()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vy(e=qe()){var t;return kc(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Uy(){return r0()&&document.documentMode===10}function Cf(e=qe()){return kc(e)||vf(e)||Sf(e)||wf(e)||/windows phone/i.test(e)||yf(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(e,t=[]){let n;switch(e){case"Browser":n=od(qe());break;case"Worker":n=`${od(qe())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${zs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=o=>new Promise((a,l)=>{try{const c=t(o);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qy(e,t={}){return Mr(e,"GET","/v2/passwordPolicy",_c(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=6;class Gy{constructor(t){var r;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Zy,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ad(this),this.idTokenSubscription=new ad(this),this.beforeStateQueue=new Wy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Vt(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await yr.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await to(this,{idToken:t}),r=await St._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var o;if(Rt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(t);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await no(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Ay()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Rt(this.app))return Promise.reject($n(this));const n=t?An(t):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&J(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Rt(this.app)?Promise.reject($n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Rt(this.app)?Promise.reject($n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vt(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await qy(this),n=new Gy(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Bs("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Hy(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Vt(t)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await yr.create(this,[Vt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=t.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=t.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=_f(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var n;if(Rt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&ky(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Eo(e){return An(e)}class ad{constructor(t){this.auth=t,this.observer=null,this.addObserver=u0(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yy(e){bc=e}function Jy(e){return bc.loadJS(e)}function Qy(){return bc.gapiScript}function Xy(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(e,t){const n=rf(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Er(o,t??{}))return i;Mt(i,"already-initialized")}return n.initialize({options:t})}function tv(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vt);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function nv(e,t,n){const r=Eo(e);J(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,o=jf(t),{host:a,port:l}=rv(t),c=l===null?"":`:${l}`,u={url:`${o}//${a}${c}/`},m=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(Er(u,r.config.emulator)&&Er(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,bo(a)?(Kx(`${o}//${a}${c}`),Qx("Auth",!0)):sv()}function jf(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function rv(e){const t=jf(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:ld(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:ld(a)}}}function ld(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function sv(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ht("not implemented")}_getIdTokenResponse(t){return Ht("not implemented")}_linkToIdToken(t,n){return Ht("not implemented")}_getReauthenticationResolver(t){return Ht("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vr(e,t){return Ly(e,"POST","/v1/accounts:signInWithIdp",_c(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="http://localhost";class Zn extends kf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Zn(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Mt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const a=new Zn(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return vr(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,vr(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,vr(t,n)}buildRequest(){const t={requestUri:iv,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Os(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Ec{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends $s{constructor(){super("facebook.com")}static credential(t){return Zn._fromParams({providerId:an.PROVIDER_ID,signInMethod:an.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return an.credentialFromTaggedObject(t)}static credentialFromError(t){return an.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return an.credential(t.oauthAccessToken)}catch{return null}}}an.FACEBOOK_SIGN_IN_METHOD="facebook.com";an.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt extends $s{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Zn._fromParams({providerId:zt.PROVIDER_ID,signInMethod:zt.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return zt.credentialFromTaggedObject(t)}static credentialFromError(t){return zt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return zt.credential(n,r)}catch{return null}}}zt.GOOGLE_SIGN_IN_METHOD="google.com";zt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends $s{constructor(){super("github.com")}static credential(t){return Zn._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ln.credentialFromTaggedObject(t)}static credentialFromError(t){return ln.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ln.credential(t.oauthAccessToken)}catch{return null}}}ln.GITHUB_SIGN_IN_METHOD="github.com";ln.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends $s{constructor(){super("twitter.com")}static credential(t,n){return Zn._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return cn.credentialFromTaggedObject(t)}static credentialFromError(t){return cn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return cn.credential(n,r)}catch{return null}}}cn.TWITTER_SIGN_IN_METHOD="twitter.com";cn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const o=await St._fromIdTokenResponse(t,r,i),a=cd(r);return new Ar({user:o,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=cd(r);return new Ar({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function cd(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends Nn{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ro.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new ro(t,n,r,i)}}function bf(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ro._fromErrorAndOperation(e,o,t,r):o})}async function ov(e,t,n=!1){const r=await As(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ar._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function av(e,t,n=!1){const{auth:r}=e;if(Rt(r.app))return Promise.reject($n(r));const i="reauthenticate";try{const o=await As(e,bf(r,i,t,e),n);J(o.idToken,r,"internal-error");const a=jc(o.idToken);J(a,r,"internal-error");const{sub:l}=a;return J(e.uid===l,r,"user-mismatch"),Ar._forOperation(e,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Mt(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lv(e,t,n=!1){if(Rt(e.app))return Promise.reject($n(e));const r="signIn",i=await bf(e,r,t),o=await Ar._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}function cv(e,t,n,r){return An(e).onIdTokenChanged(t,n,r)}function uv(e,t,n){return An(e).beforeAuthStateChanged(t,n)}function dv(e,t,n,r){return An(e).onAuthStateChanged(t,n,r)}function ls(e){return An(e).signOut()}const so="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(so,"1"),this.storage.removeItem(so),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=1e3,pv=10;class Nf extends Ef{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cf(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);Uy()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,pv):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},hv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Nf.type="LOCAL";const fv=Nf;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends Ef{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Af.type="SESSION";const Tf=Af;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new No(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:o}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async u=>u(n.origin,o)),c=await mv(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}No.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=Nc("",20);i.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(g.data.response);break;default:clearTimeout(m),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return window}function xv(e){Dt().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(){return typeof Dt().WorkerGlobalScope<"u"&&typeof Dt().importScripts=="function"}async function yv(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vv(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function wv(){return If()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="firebaseLocalStorageDb",Sv=1,io="firebaseLocalStorage",Lf="fbase_key";class Hs{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ao(e,t){return e.transaction([io],t?"readwrite":"readonly").objectStore(io)}function Cv(){const e=indexedDB.deleteDatabase(Rf);return new Hs(e).toPromise()}function ml(){const e=indexedDB.open(Rf,Sv);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(io,{keyPath:Lf})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(io)?t(r):(r.close(),await Cv(),t(await ml()))})})}async function ud(e,t,n){const r=Ao(e,!0).put({[Lf]:t,value:n});return new Hs(r).toPromise()}async function _v(e,t){const n=Ao(e,!1).get(t),r=await new Hs(n).toPromise();return r===void 0?null:r.value}function dd(e,t){const n=Ao(e,!0).delete(t);return new Hs(n).toPromise()}const jv=800,kv=3;class Pf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ml(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>kv)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return If()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=No._getInstance(wv()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await yv(),!this.activeServiceWorker)return;this.sender=new gv(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||vv()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ml();return await ud(t,so,"1"),await dd(t,so),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ud(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>_v(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>dd(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const o=Ao(i,!1).getAll();return new Hs(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:o}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Pf.type="LOCAL";const bv=Pf;new Fs(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(e,t){return t?Vt(t):(J(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends kf{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return vr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return vr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return vr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Ev(e){return lv(e.auth,new Ac(e),e.bypassAuthState)}function Nv(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),av(n,new Ac(e),e.bypassAuthState)}async function Av(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),ov(n,new Ac(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:a,type:l}=t;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ev;case"linkViaPopup":case"linkViaRedirect":return Av;case"reauthViaPopup":case"reauthViaRedirect":return Nv;default:Mt(this.auth,"internal-error")}}resolve(t){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Fs(2e3,1e4);async function hd(e,t,n){if(Rt(e.app))return Promise.reject(jt(e,"operation-not-supported-in-this-environment"));const r=Eo(e);by(e,t,Ec);const i=Df(r,n);return new On(r,"signInViaPopup",t,i).executeNotNull()}class On extends Mf{constructor(t,n,r,i,o){super(t,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,On.currentPopupAction&&On.currentPopupAction.cancel(),On.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return J(t,this.auth,"internal-error"),t}async onExecution(){Qt(this.filter.length===1,"Popup operations only handle one event");const t=Nc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,On.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Tv.get())};t()}}On.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="pendingRedirect",bi=new Map;class Rv extends Mf{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=bi.get(this.auth._key());if(!t){try{const r=await Lv(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}bi.set(this.auth._key(),t)}return this.bypassAuthState||bi.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Lv(e,t){const n=Mv(t),r=Dv(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Pv(e,t){bi.set(e._key(),t)}function Dv(e){return Vt(e._redirectPersistence)}function Mv(e){return ki(Iv,e.config.apiKey,e.name)}async function Bv(e,t,n=!1){if(Rt(e.app))return Promise.reject($n(e));const r=Eo(e),i=Df(r,t),a=await new Rv(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=10*60*1e3;class zv{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Fv(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Bf(t)){const i=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(jt(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Ov&&this.cachedEventUids.clear(),this.cachedEventUids.has(pd(t))}saveEventToCache(t){this.cachedEventUids.add(pd(t)),this.lastProcessedEventTime=Date.now()}}function pd(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Bf({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Fv(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bf(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $v(e,t={}){return Mr(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vv=/^https?/;async function Uv(e){if(e.config.emulator)return;const{authorizedDomains:t}=await $v(e);for(const n of t)try{if(Wv(n))return}catch{}Mt(e,"unauthorized-domain")}function Wv(e){const t=pl(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!Vv.test(n))return!1;if(Hv.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Fs(3e4,6e4);function fd(){const e=Dt().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Zv(e){return new Promise((t,n)=>{var i,o,a;function r(){fd(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{fd(),n(jt(e,"network-request-failed"))},timeout:qv.get()})}if((o=(i=Dt().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)t(gapi.iframes.getContext());else if((a=Dt().gapi)!=null&&a.load)r();else{const l=Xy("iframefcb");return Dt()[l]=()=>{gapi.load?r():n(jt(e,"network-request-failed"))},Jy(`${Qy()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw Ei=null,t})}let Ei=null;function Gv(e){return Ei=Ei||Zv(e),Ei}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=new Fs(5e3,15e3),Yv="__/auth/iframe",Jv="emulator/auth/iframe",Qv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e2(e){const t=e.config;J(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Cc(t,Jv):`https://${e.config.authDomain}/${Yv}`,r={apiKey:t.apiKey,appName:e.name,v:zs},i=Xv.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Os(r).slice(1)}`}async function t2(e){const t=await Gv(e),n=Dt().gapi;return J(n,e,"internal-error"),t.open({where:document.body,url:e2(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qv,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const a=jt(e,"network-request-failed"),l=Dt().setTimeout(()=>{o(a)},Kv.get());function c(){Dt().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r2=500,s2=600,i2="_blank",o2="http://localhost";class md{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function a2(e,t,n,r=r2,i=s2){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...n2,width:r.toString(),height:i.toString(),top:o,left:a},u=qe().toLowerCase();n&&(l=xf(u)?i2:n),mf(u)&&(t=t||o2,c.scrollbars="yes");const m=Object.entries(c).reduce((g,[w,C])=>`${g}${w}=${C},`,"");if(Vy(u)&&l!=="_self")return l2(t||"",l),new md(null);const p=window.open(t||"",l,m);J(p,e,"popup-blocked");try{p.focus()}catch{}return new md(p)}function l2(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="__/auth/handler",u2="emulator/auth/handler",d2=encodeURIComponent("fac");async function gd(e,t,n,r,i,o){J(e.config.authDomain,e,"auth-domain-config-required"),J(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:zs,eventId:i};if(t instanceof Ec){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",c0(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,p]of Object.entries({}))a[m]=p}if(t instanceof $s){const m=t.getScopes().filter(p=>p!=="");m.length>0&&(a.scopes=m.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const c=await e._getAppCheckToken(),u=c?`#${d2}=${encodeURIComponent(c)}`:"";return`${h2(e)}?${Os(l).slice(1)}${u}`}function h2({config:e}){return e.emulator?Cc(e,u2):`https://${e.authDomain}/${c2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="webStorageSupport";class p2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tf,this._completeRedirectFn=Bv,this._overrideRedirectResult=Pv}async _openPopup(t,n,r,i){var a;Qt((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await gd(t,n,r,pl(),i);return a2(t,o,Nc())}async _openRedirect(t,n,r,i){await this._originValidation(t);const o=await gd(t,n,r,pl(),i);return xv(o),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Qt(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await t2(t),r=new zv(t);return n.register("authEvent",i=>(J(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(ua,{type:ua},i=>{var a;const o=(a=i==null?void 0:i[0])==null?void 0:a[ua];o!==void 0&&n(!!o),Mt(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Uv(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Cf()||gf()||kc()}}const f2=p2;var xd="@firebase/auth",yd="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x2(e){Es(new Nr("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_f(e)},u=new Ky(r,i,o,c);return tv(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Es(new Nr("auth-internal",t=>{const n=Eo(t.getProvider("auth").getImmediate());return(r=>new m2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(xd,yd,g2(e)),gr(xd,yd,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=5*60,v2=Xp("authIdTokenMaxAge")||y2;let vd=null;const w2=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>v2)return;const i=n==null?void 0:n.token;vd!==i&&(vd=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function S2(e=dy()){const t=rf(e,"auth");if(t.isInitialized())return t.getImmediate();const n=ev(e,{popupRedirectResolver:f2,persistence:[bv,fv,Tf]}),r=Xp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=w2(o.toString());uv(n,a,()=>a(n.currentUser)),cv(n,l=>a(l))}}const i=Zx("auth");return i&&nv(n,`http://${i}`),n}function C2(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}Yy({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const o=jt("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",C2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x2("Browser");const _2={apiKey:"AIzaSyACrvzdsRee2iDXypKh3FoPqVVHEi3Hod4",authDomain:"theravillage-edb89.firebaseapp.com",projectId:"theravillage-edb89",storageBucket:"theravillage-edb89.firebasestorage.app",messagingSenderId:"326430627435",appId:"1:326430627435:web:945cffc0162b41d451832e",measurementId:"G-TR613CVSKF"};let qr=null,da=null,ha=null;const j2=async()=>qr?{app:qr,auth:da,googleProvider:ha}:(qr=sf(_2),da=S2(qr),ha=new zt,{app:qr,auth:da,googleProvider:ha}),Of=x.createContext(),wd="https://tv-api-326430627435.us-central1.run.app",De=()=>{const e=x.useContext(Of);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},k2=({children:e})=>{const[t,n]=x.useState(null),[r,i]=x.useState(!1),[o,a]=x.useState(()=>{try{return!localStorage.getItem("theravillage_user_data")}catch{return!0}}),[l,c]=x.useState(!1),[u,m]=x.useState(()=>{try{const k=localStorage.getItem("theravillage_user_data");return k?JSON.parse(k):null}catch{return null}}),[p,g]=x.useState(null),[w,C]=x.useState(null),[_,N]=x.useState(!1);x.useEffect(()=>{(async()=>{try{const{auth:E,googleProvider:W}=await j2();g(E),C(W);const Y=dv(E,async b=>{n(b),b?await f(b):(i(!1),c(!1),m(null),localStorage.removeItem("theravillage_user_data")),a(!1),N(!0)});try{localStorage.getItem("theravillage_user_data")&&(a(!1),N(!0))}catch(b){console.warn("Failed to read cached data:",b)}return Y}catch(E){console.error("Failed to initialize Firebase:",E),a(!1)}})()},[]);const f=async k=>{try{const E=await k.getIdToken(),W=await fetch(`${wd}/users/me`,{headers:{Authorization:`Bearer ${E}`}});if(W.ok){const Y=await W.json();console.log("AuthContext: User exists, role:",Y.role),m(Y),c(!0),i(Y.role==="admin");try{localStorage.setItem("theravillage_user_data",JSON.stringify(Y))}catch(b){console.warn("Failed to cache user data:",b)}return{exists:!0,userData:Y}}else return W.status===404?(console.log("AuthContext: User does not exist"),c(!1),i(!1),{exists:!1}):(console.error("AuthContext: Error checking user:",W.status),c(!1),i(!1),{exists:!1})}catch(E){return console.error("Error checking registration:",E),c(!1),i(!1),{exists:!1}}},d=async(k=!1)=>{if(!p||!w)throw new Error("Firebase not initialized");try{k&&(await ls(p),await new Promise(b=>setTimeout(b,1e3)));const E=await hd(p,w),W=E.user,Y=await f(W);return Y!=null&&Y.exists||await v(W),E}catch(E){throw console.error("Sign-in error:",E),E.code==="auth/popup-blocked"?new Error("Popup was blocked by browser. Please allow popups for this site and try again."):E.code==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):E}},h=async(k=!1)=>{if(!p||!w)throw new Error("Firebase not initialized");try{k&&(await ls(p),await new Promise(Y=>setTimeout(Y,1e3)));const E=await hd(p,w),W=E.user;return E}catch(E){throw console.error("Sign-in error:",E),E.code==="auth/popup-blocked"?new Error("Popup was blocked by browser. Please allow popups for this site and try again."):E.code==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):E}},v=async k=>{var E;try{const W=await k.getIdToken(),Y=await fetch(`${wd}/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:W,name:k.displayName||((E=k.email)==null?void 0:E.split("@")[0])||"User"})});if(Y.ok)return c(!0),await f(k),{success:!0,message:"Registration successful! Welcome to TheraVillage!"};if(Y.status===400)return c(!0),await f(k),{success:!0,message:"Welcome back!"};throw new Error("Registration failed")}catch(W){return console.error("Registration error:",W),{success:!1,error:W.message}}},L={user:t,isAdmin:r,isRegistered:l,loading:o,userData:u,isStable:_,signInWithGoogle:d,signInWithGoogleForInvitation:h,signOut:async()=>{if(!p){console.error("Firebase not initialized");return}try{await ls(p),localStorage.removeItem("theravillage_user_data")}catch(k){console.error("Sign-out error:",k)}},checkUserRegistration:f,getToken:async()=>{if(!t)return null;try{return await t.getIdToken()}catch(k){return console.error("Error getting token:",k),null}},auth:p,refreshUserState:async()=>t?await f(t):null};return s.jsx(Of.Provider,{value:L,children:e})},zf=ao.createContext(),Vs=()=>{const e=ao.useContext(zf);if(!e)throw new Error("useNotification must be used within NotificationProvider");return e},b2=({children:e})=>{const[t,n]=x.useState([]),r=(u,m="info",p=3e3)=>{const g=Date.now()+Math.random(),w={id:g,message:u,type:m,duration:p};return n(C=>[...C,w]),setTimeout(()=>{i(g)},p),g},i=u=>{n(m=>m.filter(p=>p.id!==u))},o=(u,m=3e3)=>r(u,"success",m),a=(u,m=4e3)=>r(u,"error",m),l=(u,m=3e3)=>r(u,"info",m),c=(u,m=3500)=>r(u,"warning",m);return s.jsxs(zf.Provider,{value:{showNotification:r,showSuccess:o,showError:a,showInfo:l,showWarning:c,removeNotification:i},children:[e,s.jsx(E2,{notifications:t,onRemove:i})]})},E2=({notifications:e,onRemove:t})=>e.length===0?null:s.jsx("div",{className:"notification-container",children:e.map(n=>s.jsx(N2,{notification:n,onRemove:t},n.id))}),N2=({notification:e,onRemove:t})=>{const[n,r]=x.useState(!1);x.useEffect(()=>{setTimeout(()=>r(!0),10)},[]);const i=()=>{r(!1),setTimeout(()=>t(e.id),300)},o=()=>{switch(e.type){case"success":return s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",fill:"currentColor"})});case"error":return s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM15.36 14.3L14.3 15.36L12 13.06L9.7 15.36L8.64 14.3L10.94 12L8.64 9.7L9.7 8.64L12 10.94L14.3 8.64L15.36 9.7L13.06 12L15.36 14.3Z",fill:"currentColor"})});case"warning":return s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M1 21H23L12 2L1 21ZM13 18H11V16H13V18ZM13 14H11V10H13V14Z",fill:"currentColor"})});default:return s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})})}};return s.jsxs("div",{className:`notification ${e.type} ${n?"visible":""}`,children:[s.jsx("div",{className:"notification-icon",children:o()}),s.jsx("div",{className:"notification-content",children:s.jsx("p",{children:e.message})}),s.jsx("button",{className:"notification-close",onClick:i,children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})})})]})},A2=({isOpen:e,title:t,message:n,onConfirm:r,onCancel:i,confirmText:o="Confirm",cancelText:a="Cancel"})=>e?s.jsx("div",{className:"confirm-dialog-overlay",children:s.jsxs("div",{className:"confirm-dialog",children:[s.jsx("div",{className:"confirm-header",children:s.jsx("h3",{children:t})}),s.jsx("div",{className:"confirm-content",children:s.jsx("p",{children:n})}),s.jsxs("div",{className:"confirm-actions",children:[s.jsx("button",{className:"confirm-cancel-btn",onClick:i,children:a}),s.jsx("button",{className:"confirm-confirm-btn",onClick:r,children:o})]})]})}):null,T2=()=>{const{user:e}=De(),[t,n]=x.useState(""),[r,i]=x.useState(!1),[o,a]=x.useState(""),[l,c]=x.useState(""),u=async()=>{if(!t){a("Please select a role");return}i(!0),a(""),c("");try{const p=await e.getIdToken(),g=await fetch("https://tv-api-326430627435.us-central1.run.app/users/select-role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:p,role:t})});if(g.ok)c("Role selected successfully! Redirecting..."),setTimeout(()=>{window.location.reload()},1500);else{const w=await g.json();a(w.detail||"Failed to select role")}}catch{a("Failed to select role. Please try again.")}finally{i(!1)}},m=[{id:"therapist",title:"Therapist",description:"I provide therapy services to clients",icon:"👨‍⚕️",color:"#4CAF50"},{id:"agency",title:"Agency",description:"I represent a therapy agency or organization",icon:"🏢",color:"#FF9800"}];return s.jsx("div",{className:"auth-container",children:s.jsxs("div",{className:"auth-card",children:[s.jsxs("div",{className:"auth-header",children:[s.jsx("div",{className:"auth-logo",children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"currentColor"}),s.jsx("path",{d:"M19 15L19.5 17.5L22 18L19.5 18.5L19 21L18.5 18.5L16 18L18.5 17.5L19 15Z",fill:"currentColor"}),s.jsx("path",{d:"M5 15L5.5 17.5L8 18L5.5 18.5L5 21L4.5 18.5L2 18L4.5 17.5L5 15Z",fill:"currentColor"})]})}),s.jsx("h1",{className:"auth-title",children:"Welcome to TheraVillage!"}),s.jsx("p",{className:"auth-subtitle",children:"Please select your role to get started"}),s.jsx("p",{className:"client-note",children:"Note: Client accounts are created through therapist invitations only"})]}),o&&s.jsx("div",{className:"status-message error",children:o}),l&&s.jsx("div",{className:"status-message success",children:l}),s.jsx("div",{className:"role-options",children:m.map(p=>s.jsxs("div",{className:`role-option ${t===p.id?"selected":""}`,onClick:()=>n(p.id),children:[s.jsx("div",{className:"role-icon",children:p.id==="therapist"?s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})}):s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 7V3H2V21H22V7H12ZM6 19H4V17H6V19ZM6 15H4V13H6V15ZM6 11H4V9H6V11ZM6 7H4V5H6V7ZM10 19H8V17H10V19ZM10 15H8V13H10V15ZM10 11H8V9H10V11ZM10 7H8V5H10V7ZM20 19H12V17H14V15H12V13H14V11H12V9H20V19Z",fill:"currentColor"})})}),s.jsxs("div",{className:"role-content",children:[s.jsx("h3",{children:p.title}),s.jsx("p",{children:p.description})]})]},p.id))}),s.jsx("button",{className:"btn btn-primary",onClick:u,disabled:!t||r,children:r?s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2V6M12 18V22M4.93 4.93L7.76 7.76M16.24 16.24L19.07 19.07M2 12H6M18 12H22M7.76 7.76L4.93 4.93M19.07 19.07L16.24 16.24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Setting up..."]}):"Continue"})]})})},I2=({onBack:e})=>{const{getToken:t}=De(),[n,r]=x.useState({guardian_first_name:"",guardian_last_name:"",guardian_email:"",patient_first_name:"",patient_last_name:"",patient_dob:""}),[i,o]=x.useState(!1),[a,l]=x.useState(""),[c,u]=x.useState(""),m=g=>{const{name:w,value:C}=g.target;if(w.includes(".")){const[_,N]=w.split(".");r(f=>({...f,[_]:{...f[_],[N]:C}}))}else r(_=>({..._,[w]:C}))},p=async g=>{g.preventDefault(),o(!0),l(""),u("");try{const w=await t(),C=await fetch("https://tv-api-326430627435.us-central1.run.app/therapist/clients/invite",{method:"POST",headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"},body:JSON.stringify({guardian_first_name:n.guardian_first_name,guardian_last_name:n.guardian_last_name,guardian_email:n.guardian_email,patient_first_name:n.patient_first_name,patient_last_name:n.patient_last_name,patient_dob:n.patient_dob||null})});if(C.ok){const _=await C.json();u(`Invitation sent to ${n.guardian_email}! The client will receive an email with a secure link to join TheraVillage.`),r({guardian_first_name:"",guardian_last_name:"",guardian_email:"",patient_first_name:"",patient_last_name:"",patient_dob:""}),setTimeout(()=>{e()},3e3)}else{const _=await C.json();l(_.detail||"Failed to send invitation")}}catch(w){l("Network error. Please try again."),console.error("Error sending invitation:",w)}finally{o(!1)}};return s.jsx("div",{className:"add-new-client",style:{backgroundColor:"#F8F9FA",minHeight:"100vh",padding:"24px 0",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,overflow:"auto"},children:s.jsxs("div",{className:"dashboard-container",style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:[s.jsxs("div",{className:"dashboard-header",style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"32px",padding:"32px",textAlign:"center",position:"relative"},children:[s.jsxs("button",{className:"back-btn",onClick:e,style:{position:"absolute",top:"20px",left:"20px",padding:"8px 16px",backgroundColor:"white",border:"2px solid #20B2AA",borderRadius:"8px",color:"#20B2AA",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z",fill:"currentColor"})}),"Back to Dashboard"]}),s.jsx("h1",{style:{fontSize:"30px",fontWeight:"700",color:"#343A40",margin:"0 0 8px 0"},children:"Add New Client"}),s.jsx("p",{style:{fontSize:"18px",color:"#6C757D",margin:"0"},children:"Send an invitation to a new client"})]}),s.jsx("div",{className:"dashboard-card",style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",padding:"32px"},children:s.jsxs("form",{onSubmit:p,className:"client-form",children:[s.jsxs("div",{className:"form-section",children:[s.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#343A40",margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"12px",paddingBottom:"16px",borderBottom:"2px solid #20B2AA"},children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M20 4H4C2.89 4 2 4.89 2 6V18C2 19.11 2.89 20 4 20H20C21.11 20 22 19.11 22 18V6C22 4.89 21.11 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z",fill:"#20B2AA"})}),"Client Invitation"]}),s.jsx("p",{className:"form-description",style:{fontSize:"16px",color:"#6C757D",margin:"16px 0 24px 0"},children:"Send an invitation to a new client. They will receive an email with a secure link to join TheraVillage."}),s.jsxs("div",{className:"form-group",style:{marginBottom:"24px"},children:[s.jsx("label",{htmlFor:"guardian_first_name",style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.025em",marginBottom:"8px"},children:"Guardian First Name *"}),s.jsx("input",{type:"text",id:"guardian_first_name",name:"guardian_first_name",value:n.guardian_first_name,onChange:m,required:!0,placeholder:"Enter guardian's first name",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #E2E8F0",borderRadius:"8px",backgroundColor:"white",color:"#343A40",transition:"border-color 150ms ease-in-out"}})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:"24px"},children:[s.jsx("label",{htmlFor:"guardian_last_name",style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.025em",marginBottom:"8px"},children:"Guardian Last Name *"}),s.jsx("input",{type:"text",id:"guardian_last_name",name:"guardian_last_name",value:n.guardian_last_name,onChange:m,required:!0,placeholder:"Enter guardian's last name",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #E2E8F0",borderRadius:"8px",backgroundColor:"white",color:"#343A40",transition:"border-color 150ms ease-in-out"}})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:"24px"},children:[s.jsx("label",{htmlFor:"guardian_email",style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.025em",marginBottom:"8px"},children:"Guardian's Email *"}),s.jsx("input",{type:"email",id:"guardian_email",name:"guardian_email",value:n.guardian_email,onChange:m,required:!0,placeholder:"Enter guardian's email address",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #E2E8F0",borderRadius:"8px",backgroundColor:"white",color:"#343A40",transition:"border-color 150ms ease-in-out"}})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:"24px"},children:[s.jsx("label",{htmlFor:"patient_first_name",style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.025em",marginBottom:"8px"},children:"Patient's First Name *"}),s.jsx("input",{type:"text",id:"patient_first_name",name:"patient_first_name",value:n.patient_first_name,onChange:m,required:!0,placeholder:"Enter patient's first name",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #E2E8F0",borderRadius:"8px",backgroundColor:"white",color:"#343A40",transition:"border-color 150ms ease-in-out"}})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:"24px"},children:[s.jsx("label",{htmlFor:"patient_last_name",style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.025em",marginBottom:"8px"},children:"Patient's Last Name *"}),s.jsx("input",{type:"text",id:"patient_last_name",name:"patient_last_name",value:n.patient_last_name,onChange:m,required:!0,placeholder:"Enter patient's last name",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #E2E8F0",borderRadius:"8px",backgroundColor:"white",color:"#343A40",transition:"border-color 150ms ease-in-out"}})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:"24px"},children:[s.jsx("label",{htmlFor:"patient_dob",style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.025em",marginBottom:"8px"},children:"Patient's Date of Birth"}),s.jsx("input",{type:"date",id:"patient_dob",name:"patient_dob",value:n.patient_dob,onChange:m,style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #E2E8F0",borderRadius:"8px",backgroundColor:"white",color:"#343A40",transition:"border-color 150ms ease-in-out"}})]})]}),a&&s.jsx("div",{className:"error-message",style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px"},children:a}),c&&s.jsx("div",{className:"success-message",style:{backgroundColor:"#dcfce7",color:"#16a34a",padding:"12px",borderRadius:"8px",marginBottom:"16px"},children:c}),s.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"16px",justifyContent:"flex-end",marginTop:"32px"},children:[s.jsx("button",{type:"button",className:"cancel-btn",onClick:e,style:{padding:"12px 24px",backgroundColor:"white",border:"2px solid #6C757D",borderRadius:"8px",color:"#6C757D",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),s.jsx("button",{type:"submit",className:"submit-btn",disabled:i,style:{padding:"12px 24px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"8px",fontWeight:"500",cursor:i?"not-allowed":"pointer",opacity:i?.6:1},children:i?"Sending Invitation...":"Send Invitation"})]})]})})]})})},Ff=({onClose:e,selectedClient:t,isReschedule:n=!1,originalAppointment:r=null})=>{const{getToken:i}=De(),{showSuccess:o,showError:a}=Vs(),[l,c]=x.useState([]),[u,m]=x.useState({client_id:t?t.id.toString():"",start_date:"",start_time:"",duration_minutes:60,location:{type:"virtual",address:""},recurring_rule:"",recurring_end_date:""}),[p,g]=x.useState(!!t),[w,C]=x.useState(!1),_=()=>{const v=[];for(let S=6;S<22;S++)for(let A=0;A<60;A+=15){const I=`${S.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`;v.push(I)}return v},N=v=>{const[S,A]=v.split(":"),I=parseInt(S),L=I>=12?"PM":"AM";return`${I>12?I-12:I===0?12:I}:${A} ${L}`};x.useEffect(()=>{f()},[]),x.useEffect(()=>{t?(m(v=>({...v,client_id:t.id.toString()})),g(!0)):g(!1)},[t]);const f=async()=>{try{const v=await i(),S=await fetch("https://tv-api-326430627435.us-central1.run.app/therapist/clients",{headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(S.ok){const A=await S.json();c(A.clients||[])}else a("Failed to fetch clients")}catch(v){a("Network error fetching clients"),console.error("Error fetching clients:",v)}},d=v=>{const{name:S,value:A}=v.target;if(S==="client_id"&&g(!1),S.includes(".")){const[I,L]=S.split(".");m(k=>({...k,[I]:{...k[I],[L]:A}}))}else m(I=>({...I,[S]:A}))},h=async v=>{v.preventDefault(),C(!0);try{const S=await i(),A=`${u.start_date}T${u.start_time}:00`;if(console.log("📅 APPOINTMENT CREATION (No TZ):",{dateInput:u.start_date,timeInput:u.start_time,combined:A}),u.duration_minutes<=0){a("Duration must be greater than 0 minutes"),C(!1);return}let I;if(n&&r?I=await fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/appointments/${r.id}/reschedule`,{method:"POST",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},body:JSON.stringify({client_id:parseInt(u.client_id),start_ts:A,duration_minutes:u.duration_minutes,location:u.location,recurring_rule:u.recurring_rule||null,recurring_end_date:u.recurring_end_date||null})}):I=await fetch("https://tv-api-326430627435.us-central1.run.app/therapist/appointments",{method:"POST",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},body:JSON.stringify({client_id:parseInt(u.client_id),start_ts:A,duration_minutes:u.duration_minutes,location:u.location,recurring_rule:u.recurring_rule||null,recurring_end_date:u.recurring_end_date||null})}),I.ok){const L=await I.json();if(n)o("Appointment rescheduled successfully! Client has been notified.");else{const k=L.count||1;k>1?o(`${k} recurring appointments scheduled successfully!`):o("Appointment scheduled successfully!")}setTimeout(()=>{e()},1500)}else{const L=await I.json();a(L.detail||"Failed to schedule appointment")}}catch(S){a("Network error. Please try again."),console.error("Error scheduling appointment:",S)}finally{C(!1)}};return s.jsx("div",{className:"schedule-appointment-modal",children:s.jsxs("div",{className:"modal-content",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:n?"Reschedule Appointment":"Schedule Appointment"}),s.jsx("button",{className:"close-btn",onClick:e,children:"×"})]}),s.jsx("div",{className:"modal-body",children:s.jsxs("form",{onSubmit:h,className:"appointment-form",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h2",{children:"Client & Time"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"client_id",children:"Select Client *"}),p&&t&&s.jsx("div",{className:"selected-client-indicator",children:s.jsxs("span",{className:"indicator-text",children:["Pre-selected: ",t.name]})}),s.jsxs("select",{id:"client_id",name:"client_id",value:u.client_id,onChange:d,required:!0,className:p?"pre-selected":"",children:[s.jsx("option",{value:"",children:"Choose a client..."}),l.map(v=>s.jsxs("option",{value:v.id,children:[v.name," - ",v.school||"No school"]},v.id))]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"start_date",children:"Date *"}),s.jsx("input",{type:"date",id:"start_date",name:"start_date",value:u.start_date,onChange:d,required:!0,min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"time-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"start_time",children:"Start Time *"}),s.jsxs("select",{id:"start_time",name:"start_time",value:u.start_time,onChange:d,required:!0,children:[s.jsx("option",{value:"",children:"Select start time..."}),_().map(v=>s.jsx("option",{value:v,children:N(v)},v))]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"duration_minutes",children:"Duration (minutes) *"}),s.jsxs("select",{id:"duration_minutes",name:"duration_minutes",value:u.duration_minutes,onChange:d,required:!0,children:[s.jsx("option",{value:15,children:"15 minutes"}),s.jsx("option",{value:30,children:"30 minutes"}),s.jsx("option",{value:45,children:"45 minutes"}),s.jsx("option",{value:60,children:"1 hour"}),s.jsx("option",{value:75,children:"1 hour 15 minutes"}),s.jsx("option",{value:90,children:"1.5 hours"}),s.jsx("option",{value:105,children:"1 hour 45 minutes"}),s.jsx("option",{value:120,children:"2 hours"})]})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h2",{children:"Location"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Session Type"}),s.jsxs("div",{className:"radio-group",children:[s.jsxs("label",{className:"radio-label",children:[s.jsx("input",{type:"radio",name:"location.type",value:"virtual",checked:u.location.type==="virtual",onChange:d}),s.jsx("span",{className:"radio-text",children:"Virtual Session"})]}),s.jsxs("label",{className:"radio-label",children:[s.jsx("input",{type:"radio",name:"location.type",value:"in_person",checked:u.location.type==="in_person",onChange:d}),s.jsx("span",{className:"radio-text",children:"In-Person Session"})]})]})]}),u.location.type==="in_person"&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"location.address",children:"Address"}),s.jsx("input",{type:"text",id:"location.address",name:"location.address",value:u.location.address,onChange:d,placeholder:"Enter session address"})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h2",{children:"Recurring Options"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"recurring_rule",children:"Recurring Pattern"}),s.jsxs("select",{id:"recurring_rule",name:"recurring_rule",value:u.recurring_rule,onChange:d,children:[s.jsx("option",{value:"",children:"No recurrence"}),s.jsx("option",{value:"weekly",children:"Weekly"}),s.jsx("option",{value:"biweekly",children:"Bi-weekly"}),s.jsx("option",{value:"monthly",children:"Monthly"})]})]}),u.recurring_rule&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"recurring_end_date",children:"Repeat Until *"}),s.jsx("input",{type:"date",id:"recurring_end_date",name:"recurring_end_date",value:u.recurring_end_date,onChange:d,required:!0,min:u.start_date}),s.jsxs("small",{className:"form-help",children:["Appointments will be created ",u.recurring_rule," until this date"]})]})]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{type:"button",className:"cancel-btn",onClick:e,children:"Cancel"}),s.jsx("button",{type:"submit",className:"submit-btn",disabled:w,children:w?"Scheduling...":"Schedule Appointment"})]})]})})]})})},R2=({onBack:e})=>{const{token:t}=De(),[n,r]=x.useState([]),[i,o]=x.useState(new Date),[a,l]=x.useState(!1),[c,u]=x.useState("");x.useEffect(()=>{m()},[i]);const m=async()=>{try{l(!0);const h=new Date(i.getFullYear(),i.getMonth(),1),v=new Date(i.getFullYear(),i.getMonth()+1,0),S=await fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/appointments?start_date=${h.toISOString().split("T")[0]}&end_date=${v.toISOString().split("T")[0]}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(S.ok){const A=await S.json();r(A.appointments||[])}else u("Failed to fetch appointments")}catch(h){u("Network error fetching appointments"),console.error("Error fetching appointments:",h)}finally{l(!1)}},p=h=>{const v=h.getFullYear(),S=h.getMonth(),A=new Date(v,S,1),L=new Date(v,S+1,0).getDate(),k=A.getDay();return{daysInMonth:L,startingDayOfWeek:k}},g=h=>n.filter(v=>{const S=new Date(v.start_ts);return S.getDate()===h&&S.getMonth()===i.getMonth()&&S.getFullYear()===i.getFullYear()}),w=h=>new Date(h).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),C=h=>{o(v=>{const S=new Date(v);return S.setMonth(v.getMonth()+h),S})},{daysInMonth:_,startingDayOfWeek:N}=p(i),f=["January","February","March","April","May","June","July","August","September","October","November","December"],d=()=>{const h=[];for(let v=0;v<N;v++)h.push(s.jsx("div",{className:"calendar-day empty"},`empty-${v}`));for(let v=1;v<=_;v++){const S=g(v),A=new Date().toDateString()===new Date(i.getFullYear(),i.getMonth(),v).toDateString();h.push(s.jsxs("div",{className:`calendar-day ${A?"today":""}`,children:[s.jsx("div",{className:"day-number",children:v}),s.jsx("div",{className:"appointments-list",children:S.map(I=>s.jsxs("div",{className:`appointment-item ${I.status}`,children:[s.jsx("div",{className:"appointment-time",children:w(I.start_ts)}),s.jsx("div",{className:"appointment-client",children:I.client_name})]},I.id))})]},v))}return h};return s.jsxs("div",{className:"view-calendar",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("button",{className:"back-btn",onClick:e,children:"← Back to Dashboard"}),s.jsx("h1",{children:"Calendar View"})]}),s.jsxs("div",{className:"calendar-container",children:[s.jsxs("div",{className:"calendar-header",children:[s.jsx("button",{className:"nav-btn",onClick:()=>C(-1),children:"← Previous"}),s.jsxs("h2",{children:[f[i.getMonth()]," ",i.getFullYear()]}),s.jsx("button",{className:"nav-btn",onClick:()=>C(1),children:"Next →"})]}),a&&s.jsx("div",{className:"loading-message",children:"Loading appointments..."}),c&&s.jsx("div",{className:"error-message",children:c}),s.jsxs("div",{className:"calendar-grid",children:[s.jsxs("div",{className:"calendar-weekdays",children:[s.jsx("div",{className:"weekday",children:"Sun"}),s.jsx("div",{className:"weekday",children:"Mon"}),s.jsx("div",{className:"weekday",children:"Tue"}),s.jsx("div",{className:"weekday",children:"Wed"}),s.jsx("div",{className:"weekday",children:"Thu"}),s.jsx("div",{className:"weekday",children:"Fri"}),s.jsx("div",{className:"weekday",children:"Sat"})]}),s.jsx("div",{className:"calendar-days",children:d()})]}),s.jsxs("div",{className:"calendar-legend",children:[s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color scheduled"}),s.jsx("span",{children:"Scheduled"})]}),s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color confirmed"}),s.jsx("span",{children:"Confirmed"})]}),s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color in_progress"}),s.jsx("span",{children:"In Progress"})]}),s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color completed"}),s.jsx("span",{children:"Completed"})]})]})]})]})},L2=({onBack:e})=>{const{token:t}=De(),[n,r]=x.useState([]),[i,o]=x.useState([]),[a,l]=x.useState("all"),[c,u]=x.useState(""),[m,p]=x.useState(!1),[g,w]=x.useState("");x.useEffect(()=>{C()},[]),x.useEffect(()=>{_()},[n,a,c]);const C=async()=>{try{p(!0),r([{id:1,name:"Deep Breathing Exercise",category:"breathing",description:"A simple breathing technique to help with anxiety and stress management.",instructions:"Sit comfortably, close your eyes, and take slow, deep breaths. Inhale for 4 counts, hold for 4, exhale for 4.",duration:"5-10 minutes",difficulty:"beginner",equipment:"none"},{id:2,name:"Progressive Muscle Relaxation",category:"relaxation",description:"Systematically tense and relax different muscle groups to reduce physical tension.",instructions:"Start with your toes and work up to your head, tensing each muscle group for 5 seconds then relaxing.",duration:"15-20 minutes",difficulty:"beginner",equipment:"none"},{id:3,name:"Mindfulness Meditation",category:"meditation",description:"Focus on the present moment to reduce stress and improve mental clarity.",instructions:"Find a quiet place, sit comfortably, and focus on your breath or a specific object.",duration:"10-30 minutes",difficulty:"beginner",equipment:"none"},{id:4,name:"Cognitive Behavioral Therapy (CBT) Exercises",category:"cbt",description:"Identify and challenge negative thought patterns.",instructions:"Write down negative thoughts, identify cognitive distortions, and reframe them positively.",duration:"15-30 minutes",difficulty:"intermediate",equipment:"journal"},{id:5,name:"Grounding Techniques",category:"grounding",description:"Use your senses to stay present and connected to the current moment.",instructions:"Name 5 things you can see, 4 you can touch, 3 you can hear, 2 you can smell, 1 you can taste.",duration:"2-5 minutes",difficulty:"beginner",equipment:"none"},{id:6,name:"Journaling Prompts",category:"journaling",description:"Guided writing exercises to process emotions and experiences.",instructions:"Write about your feelings, experiences, or answer specific prompts to gain insight.",duration:"10-20 minutes",difficulty:"beginner",equipment:"journal"}])}catch(d){w("Failed to fetch exercises"),console.error("Error fetching exercises:",d)}finally{p(!1)}},_=()=>{let d=n;a!=="all"&&(d=d.filter(h=>h.category===a)),c&&(d=d.filter(h=>h.name.toLowerCase().includes(c.toLowerCase())||h.description.toLowerCase().includes(c.toLowerCase()))),o(d)},N=[{id:"all",name:"All Exercises"},{id:"breathing",name:"Breathing"},{id:"relaxation",name:"Relaxation"},{id:"meditation",name:"Meditation"},{id:"cbt",name:"CBT"},{id:"grounding",name:"Grounding"},{id:"journaling",name:"Journaling"}],f=d=>{switch(d){case"beginner":return"#4caf50";case"intermediate":return"#ff9800";case"advanced":return"#f44336";default:return"#666"}};return s.jsxs("div",{className:"exercise-library",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("button",{className:"back-btn",onClick:e,children:"← Back to Dashboard"}),s.jsx("h1",{children:"Exercise Library"})]}),s.jsxs("div",{className:"library-container",children:[s.jsxs("div",{className:"filters-section",children:[s.jsx("div",{className:"search-box",children:s.jsx("input",{type:"text",placeholder:"Search exercises...",value:c,onChange:d=>u(d.target.value),className:"search-input"})}),s.jsx("div",{className:"category-filters",children:N.map(d=>s.jsx("button",{className:`category-btn ${a===d.id?"active":""}`,onClick:()=>l(d.id),children:d.name},d.id))})]}),m&&s.jsx("div",{className:"loading-message",children:"Loading exercises..."}),g&&s.jsx("div",{className:"error-message",children:g}),s.jsx("div",{className:"exercises-grid",children:i.map(d=>{var h;return s.jsxs("div",{className:"exercise-card",children:[s.jsxs("div",{className:"exercise-header",children:[s.jsx("h3",{children:d.name}),s.jsx("span",{className:"difficulty-badge",style:{backgroundColor:f(d.difficulty)},children:d.difficulty})]}),s.jsx("div",{className:"exercise-category",children:(h=N.find(v=>v.id===d.category))==null?void 0:h.name}),s.jsx("p",{className:"exercise-description",children:d.description}),s.jsxs("div",{className:"exercise-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-label",children:"Duration:"}),s.jsx("span",{className:"detail-value",children:d.duration})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-label",children:"Equipment:"}),s.jsx("span",{className:"detail-value",children:d.equipment})]})]}),s.jsxs("div",{className:"exercise-instructions",children:[s.jsx("h4",{children:"Instructions:"}),s.jsx("p",{children:d.instructions})]}),s.jsxs("div",{className:"exercise-actions",children:[s.jsx("button",{className:"action-btn primary",children:"Assign to Client"}),s.jsx("button",{className:"action-btn secondary",children:"Save to Favorites"})]})]},d.id)})}),i.length===0&&!m&&s.jsxs("div",{className:"no-results",children:[s.jsx("p",{children:"No exercises found matching your criteria."}),s.jsx("button",{className:"reset-btn",onClick:()=>{l("all"),u("")},children:"Reset Filters"})]})]})]})},P2=({clientId:e,onBack:t})=>{const{user:n,getToken:r,signOut:i}=De(),[o,a]=x.useState(null),[l,c]=x.useState([]),[u,m]=x.useState([]),[p,g]=x.useState([]),[w,C]=x.useState(!0),[_,N]=x.useState(null),[f,d]=x.useState(!1),[h,v]=x.useState(!1),[S,A]=x.useState(null),[I,L]=x.useState(null),[k,E]=x.useState(null),[W,Y]=x.useState(null),[b,U]=x.useState({start_time:"",duration_minutes:60,treatment_codes:"97110",notes:{subjective:"",objective:"",assessment:"",plan:"",synthesized_summary:"",goals_addressed:[],next_session_recommendations:[],confidence_score:0},main_notes:"",is_generating:!1}),[X,Z]=x.useState({isRecording:!1,isTranscribing:!1,mediaRecorder:null,audioChunks:[],transcript:""}),[oe,P]=x.useState({title:"",description:"",type:"short_term"}),V=async()=>{try{C(!0);const y=await r(),[j,M,H]=await Promise.all([fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/clients/${e}`,{headers:{Authorization:`Bearer ${y}`}}),fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/clients/${e}/sessions`,{headers:{Authorization:`Bearer ${y}`}}),fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/clients/${e}/goals`,{headers:{Authorization:`Bearer ${y}`}})]);if(j.ok){const z=await j.json();a(z)}if(M.ok){const z=await M.json();c(z.sessions||[])}if(H.ok){const z=await H.json();m(z.goals||[])}}catch(y){console.error("Error fetching client data:",y),N("Failed to load client data")}finally{C(!1)}};x.useEffect(()=>{V()},[e]);const G=y=>y?`${new Date().getFullYear()-new Date(y).getFullYear()} years`:"N/A",se=y=>new Date(y).toLocaleDateString(),ce=y=>new Date(y).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ke=async()=>{try{const y=await navigator.mediaDevices.getUserMedia({audio:!0}),j=new MediaRecorder(y),M=[];j.ondataavailable=H=>{M.push(H.data)},j.onstop=async()=>{const H=new Blob(M,{type:"audio/wav"});await B(H),y.getTracks().forEach(z=>z.stop())},Z(H=>({...H,isRecording:!0,mediaRecorder:j,audioChunks:M})),j.start()}catch(y){console.error("Error starting recording:",y)}},ze=()=>{X.mediaRecorder&&X.isRecording&&(X.mediaRecorder.stop(),Z(y=>({...y,isRecording:!1})))},B=async y=>{try{Z(z=>({...z,isTranscribing:!0}));const j=new FormData;j.append("audio_file",y,"recording.wav");const M=await r(),H=await fetch("https://tv-api-326430627435.us-central1.run.app/ai/transcribe-audio",{method:"POST",headers:{Authorization:`Bearer ${M}`},body:j});if(H.ok){const z=await H.json();Z(q=>({...q,transcript:z.transcript,isTranscribing:!1})),U(q=>({...q,main_notes:z.transcript}))}else{const z=await H.text();console.error(`Failed to transcribe audio: ${H.status} ${z}`),Z(q=>({...q,isTranscribing:!1}))}}catch(j){console.error("Error transcribing audio:",j),Z(M=>({...M,isTranscribing:!1}))}},ae=async()=>{const y=b.main_notes;if(!y.trim()){alert("Please enter some notes or record audio before generating SOAP note");return}U(j=>({...j,is_generating:!0}));try{const j=new FormData;j.append("transcript",y),j.append("client_age",o.dob?new Date().getFullYear()-new Date(o.dob).getFullYear():0),j.append("diagnosis",o.diagnosis_codes?o.diagnosis_codes.join(", "):"Not specified"),j.append("short_term_goals",JSON.stringify(u.filter(Q=>Q.type==="short_term").map(Q=>Q.title))),j.append("long_term_goals",JSON.stringify(u.filter(Q=>Q.type==="long_term").map(Q=>Q.title))),j.append("session_activities",JSON.stringify([b.main_notes])),j.append("observations",""),j.append("time_in",b.start_time||""),j.append("time_out",""),j.append("units",b.duration_minutes||0);const M=b.treatment_codes||[],H=Array.isArray(M)?M:[M];j.append("treatment_codes",JSON.stringify(H));const z=await r(),q=await fetch("https://tv-api-326430627435.us-central1.run.app/ai/generate-soap-note",{method:"POST",headers:{Authorization:`Bearer ${z}`},body:j});if(q.ok){const te=(await q.json()).soap_note;U(pe=>({...pe,notes:{...pe.notes,subjective:te.subjective||"",objective:te.objective||"",assessment:te.assessment||"",plan:te.plan||"",synthesized_summary:te.synthesized_summary||"",goals_addressed:te.goals_addressed||[],next_session_recommendations:te.next_session_recommendations||[],confidence_score:te.confidence_score||0},is_generating:!1}))}else alert(`Error generating SOAP note: ${q.status}`),U(Q=>({...Q,is_generating:!1}))}catch(j){alert(`Error generating SOAP note: ${j.message}`),U(M=>({...M,is_generating:!1}))}},be=async()=>{try{const y=await r();if(!b.start_time){alert("Please enter the start time");return}if(!b.duration_minutes||b.duration_minutes<=0){alert("Please enter a valid duration");return}if(!b.notes.subjective&&!b.notes.objective){alert("Please fill in at least the Subjective or Objective section");return}const j=new Date(b.start_time);if(isNaN(j.getTime())){alert("Please enter a valid start time");return}const M={client_id:parseInt(e),start_time:j.toISOString(),duration_minutes:parseInt(b.duration_minutes),treatment_codes:[b.treatment_codes],notes:{type:"soap",soap:{...b.notes,original_notes:b.main_notes},goals_checked:u.map(z=>({id:z.id,title:z.title,addressed:!0})),treatment_codes:[b.treatment_codes]}},H=await fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/clients/${e}/sessions`,{method:"POST",headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"},body:JSON.stringify(M)});if(H.ok)U({start_time:"",duration_minutes:60,treatment_codes:"97110",notes:{subjective:"",objective:"",assessment:"",plan:"",synthesized_summary:"",goals_addressed:[],next_session_recommendations:[],confidence_score:0},main_notes:"",is_generating:!1}),Z({isRecording:!1,isTranscribing:!1,mediaRecorder:null,audioChunks:[],transcript:""}),await V(),alert("Session saved successfully!");else{const z=await H.text();alert(`Failed to save session: ${H.status} ${z}`)}}catch{alert("Failed to save session")}},Ye=y=>{L(y.id),E({start_time:y.start_time,duration_minutes:y.duration_minutes,treatment_codes:Array.isArray(y.treatment_codes)?y.treatment_codes.join(", "):y.treatment_codes,notes:y.notes&&y.notes.length>0?{soap:y.notes[0].soap||{}}:{soap:{}}})},nt=async y=>{try{const j=await r(),M=await fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/clients/${e}/sessions/${y}`,{method:"PUT",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"},body:JSON.stringify(k)});if(M.ok)L(null),E(null),await V(),alert("Session updated successfully!");else{const H=await M.text();alert(`Failed to update session: ${M.status} ${H}`)}}catch{alert("Failed to update session")}},Tn=async y=>{if(window.confirm("Are you sure you want to delete this session? This cannot be undone."))try{const j=await r(),M=await fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/clients/${e}/sessions/${y}`,{method:"DELETE",headers:{Authorization:`Bearer ${j}`}});if(M.ok)await V(),alert("Session deleted successfully!");else{const H=await M.text();alert(`Failed to delete session: ${M.status} ${H}`)}}catch{alert("Failed to delete session")}},O=async()=>{if(!oe.title.trim()){alert("Please enter a goal title");return}try{const y=await r();(await fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/clients/${e}/goals`,{method:"POST",headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"},body:JSON.stringify(oe)})).ok&&(P({title:"",description:"",type:"short_term"}),d(!1),await V())}catch(y){console.error("Error adding goal:",y)}};return w?s.jsx("div",{className:"client-profile-container",style:{backgroundColor:"#F8F9FA",minHeight:"100vh",padding:"24px 0",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,overflow:"auto"},children:s.jsx("div",{className:"container",style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:s.jsxs("div",{className:"loading",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",color:"#6C757D",fontSize:"18px"},children:[s.jsx("div",{className:"spinner",style:{width:"48px",height:"48px",border:"4px solid #F8F9FA",borderTop:"4px solid #20B2AA",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),s.jsx("p",{children:"Loading client profile..."})]})})}):_||!o?s.jsx("div",{className:"client-profile-container",style:{backgroundColor:"#F8F9FA",minHeight:"100vh",padding:"24px 0",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,overflow:"auto"},children:s.jsx("div",{className:"container",style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:s.jsxs("div",{className:"error",style:{color:"#FF6B6B",fontSize:"18px",textAlign:"center",padding:"40px"},children:[_||"Client not found",s.jsx("button",{onClick:t,style:{marginTop:"16px",padding:"8px 16px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"block",margin:"16px auto 0"},children:"Back to Dashboard"})]})})}):s.jsx("div",{className:"client-profile-container",style:{backgroundColor:"#F8F9FA",minHeight:"100vh",padding:"8px 0",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,overflow:"auto"},children:s.jsxs("div",{className:"container",style:{maxWidth:"1400px",margin:"0 auto",padding:"0 24px"},children:[s.jsx("div",{style:{textAlign:"center",marginBottom:"24px",padding:"16px 40px"},children:s.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#343A40",margin:"0",background:"linear-gradient(135deg, #20B2AA, #48D1CC)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Patient Profile - ",o.name]})}),s.jsxs("div",{className:"dashboard-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px 40px",marginBottom:"24px"},children:[s.jsx("div",{style:{flex:1},children:s.jsxs("button",{onClick:t,style:{padding:"12px 20px",backgroundColor:"white",border:"2px solid #20B2AA",borderRadius:"8px",color:"#20B2AA",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z",fill:"currentColor"})}),"Back to Dashboard"]})}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"32px",flex:2,justifyContent:"center"},children:[s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"64px",height:"64px",background:"linear-gradient(135deg, #20B2AA, #48D1CC)",borderRadius:"16px",color:"white",fontSize:"24px",fontWeight:"700",boxShadow:"0 4px 12px rgba(32, 178, 170, 0.3)"},children:o.name?o.name.charAt(0).toUpperCase():"P"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"24px",alignItems:"center",minWidth:"600px"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"#343A40",marginBottom:"4px"},children:o.name}),s.jsx("div",{style:{fontSize:"12px",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Patient Name"})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"#343A40",marginBottom:"4px"},children:G(o.dob)}),s.jsx("div",{style:{fontSize:"12px",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Age"})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"#343A40",marginBottom:"4px"},children:o.school||"Not specified"}),s.jsx("div",{style:{fontSize:"12px",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.5px"},children:"School"})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"#343A40",marginBottom:"4px"},children:o.status}),s.jsx("div",{style:{fontSize:"12px",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Status"})]})]})]}),s.jsx("div",{style:{flex:1,display:"flex",justifyContent:"flex-end"},children:s.jsxs("button",{onClick:async()=>{try{await i()}catch(y){console.error("Sign-out error:",y)}},style:{padding:"12px 20px",backgroundColor:"#FF6B6B",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",fill:"currentColor"})}),"Sign Out"]})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",alignItems:"start"},children:[s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",padding:"24px"},children:[s.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#343A40",margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",paddingBottom:"12px",borderBottom:"2px solid #20B2AA"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z",fill:"#20B2AA"})}),"New Session"]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Start Time"}),s.jsx("input",{type:"datetime-local",value:b.start_time,onChange:y=>U(j=>({...j,start_time:y.target.value})),style:{width:"100%",padding:"8px",border:"1px solid #E2E8F0",borderRadius:"4px",fontSize:"13px"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Duration (min)"}),s.jsx("input",{type:"number",value:b.duration_minutes,onChange:y=>U(j=>({...j,duration_minutes:parseInt(y.target.value)||0})),style:{width:"100%",padding:"8px",border:"1px solid #E2E8F0",borderRadius:"4px",fontSize:"13px"},min:"15",step:"15"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Treatment Codes"}),s.jsx("input",{type:"text",value:b.treatment_codes,onChange:y=>U(j=>({...j,treatment_codes:y.target.value})),style:{width:"100%",padding:"8px",border:"1px solid #E2E8F0",borderRadius:"4px",fontSize:"13px"},placeholder:"e.g., 97110"})]})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"8px",textTransform:"uppercase"},children:"Session Notes"}),s.jsx("textarea",{value:b.main_notes,onChange:y=>U(j=>({...j,main_notes:y.target.value})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px",minHeight:"100px"},placeholder:"Enter session notes or record audio..."})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px",flexWrap:"wrap"},children:[s.jsx("button",{onClick:X.isRecording?ze:Ke,style:{padding:"8px 16px",backgroundColor:X.isRecording?"#FF6B6B":"#20B2AA",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px"},children:X.isRecording?s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12",fill:"currentColor"})}),"Stop Recording"]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"currentColor"})}),"Start Recording"]})}),s.jsx("button",{onClick:ae,disabled:b.is_generating||!b.main_notes.trim(),style:{padding:"8px 16px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:b.is_generating||!b.main_notes.trim()?.6:1,fontSize:"13px"},children:b.is_generating?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid transparent",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",fill:"currentColor"})}),"Generate SOAP Note"]})})]}),X.isTranscribing&&s.jsxs("div",{style:{padding:"12px",backgroundColor:"#fff3cd",borderRadius:"6px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid #856404",borderRadius:"50%",animation:"spin 1s linear infinite"}}),s.jsx("span",{style:{color:"#856404",fontSize:"13px"},children:"Transcribing audio..."})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#343A40",margin:"0 0 12px 0"},children:"SOAP Note Form"}),b.is_generating?s.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#6C757D"},children:[s.jsx("div",{style:{marginBottom:"12px"},children:"Generating SOAP note..."}),s.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #E2E8F0",borderTop:"4px solid #20B2AA",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})]}):s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"16px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"S - Subjective"}),s.jsx("textarea",{value:b.notes.subjective,onChange:y=>U(j=>({...j,notes:{...j.notes,subjective:y.target.value}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:3,placeholder:"What the client reported..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"O - Objective"}),s.jsx("textarea",{value:b.notes.objective,onChange:y=>U(j=>({...j,notes:{...j.notes,objective:y.target.value}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:3,placeholder:"What you observed..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"A - Assessment"}),s.jsx("textarea",{value:b.notes.assessment,onChange:y=>U(j=>({...j,notes:{...j.notes,assessment:y.target.value}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:3,placeholder:"Your assessment..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"P - Plan"}),s.jsx("textarea",{value:b.notes.plan,onChange:y=>U(j=>({...j,notes:{...j.notes,plan:y.target.value}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:3,placeholder:"Next steps..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Synthesized Summary"}),s.jsx("textarea",{value:b.notes.synthesized_summary,onChange:y=>U(j=>({...j,notes:{...j.notes,synthesized_summary:y.target.value}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:3,placeholder:"AI-generated session summary..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Goals Addressed"}),s.jsx("textarea",{value:Array.isArray(b.notes.goals_addressed)?b.notes.goals_addressed.join(", "):b.notes.goals_addressed||"",onChange:y=>U(j=>({...j,notes:{...j.notes,goals_addressed:y.target.value.split(",").map(M=>M.trim()).filter(M=>M)}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:2,placeholder:"Goals addressed in this session..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Next Session Recommendations"}),s.jsx("textarea",{value:Array.isArray(b.notes.next_session_recommendations)?b.notes.next_session_recommendations.join(", "):b.notes.next_session_recommendations||"",onChange:y=>U(j=>({...j,notes:{...j.notes,next_session_recommendations:y.target.value.split(",").map(M=>M.trim()).filter(M=>M)}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:2,placeholder:"Recommendations for next session..."})]})]})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#343A40",margin:"0 0 12px 0"},children:"Session Notes Preview"}),s.jsxs("div",{style:{fontSize:"13px",color:"#343A40",lineHeight:"1.6",padding:"16px",backgroundColor:"#F8F9FA",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[b.main_notes&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Session Notes:"})," ",b.main_notes]}),b.notes.subjective&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Subjective:"})," ",b.notes.subjective]}),b.notes.objective&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Objective:"})," ",b.notes.objective]}),b.notes.assessment&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Assessment:"})," ",b.notes.assessment]}),b.notes.plan&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Plan:"})," ",b.notes.plan]}),b.notes.synthesized_summary&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Summary:"})," ",b.notes.synthesized_summary]}),b.notes.goals_addressed&&b.notes.goals_addressed.length>0&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Goals Addressed:"})," ",Array.isArray(b.notes.goals_addressed)?b.notes.goals_addressed.join(", "):b.notes.goals_addressed]}),b.notes.next_session_recommendations&&b.notes.next_session_recommendations.length>0&&s.jsxs("div",{style:{marginBottom:"0"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Next Session:"})," ",Array.isArray(b.notes.next_session_recommendations)?b.notes.next_session_recommendations.join(", "):b.notes.next_session_recommendations]}),!b.main_notes&&!b.notes.subjective&&!b.notes.objective&&!b.notes.assessment&&!b.notes.plan&&!b.notes.synthesized_summary&&(!b.notes.goals_addressed||b.notes.goals_addressed.length===0)&&(!b.notes.next_session_recommendations||b.notes.next_session_recommendations.length===0)&&s.jsx("div",{style:{fontStyle:"italic",color:"#6C757D"},children:"No session notes recorded yet. Use the form above to add notes or generate with AI."})]}),b.notes.confidence_score&&b.notes.confidence_score>0&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"12px",padding:"8px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #E2E8F0"},children:[s.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#6C757D"},children:"AI Confidence:"}),s.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#20B2AA"},children:[(b.notes.confidence_score*100).toFixed(0),"%"]})]})]}),s.jsx("button",{onClick:be,disabled:!b.start_time||!b.notes.subjective&&!b.notes.objective,style:{padding:"10px 20px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",opacity:!b.start_time||!b.notes.subjective&&!b.notes.objective?.6:1},children:"Save Session"})]})}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",padding:"24px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #20B2AA"},children:[s.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#343A40",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M13 2.05V4.05C17.39 4.59 20.5 8.58 19.96 12.97C19.5 16.61 16.64 19.5 13 19.93V21.93C18.5 21.38 22.5 16.5 21.95 11C21.5 6.25 17.73 2.5 13 2.03V2.05Z",fill:"#20B2AA"})}),"Session History (",l.length,")"]}),l.length>5&&s.jsx("button",{onClick:()=>v(!h),style:{padding:"6px 12px",backgroundColor:"white",border:"2px solid #20B2AA",borderRadius:"6px",color:"#20B2AA",fontSize:"12px",cursor:"pointer"},children:h?"Show Less":"Show All"})]}),s.jsx("div",{style:{maxHeight:h?"none":"400px",overflowY:h?"visible":"auto"},children:l.length>0?(h?l:l.slice(0,5)).map((y,j)=>{var M,H,z,q,Q,te,pe,ue,Ee,T,R,$,K,ee,de,Te,Ne,gt,ct,Tc;return s.jsxs("div",{style:{marginBottom:"12px",border:"1px solid #E2E8F0",borderRadius:"8px",overflow:"hidden"},children:[s.jsxs("div",{onClick:()=>A(S===y.id?null:y.id),style:{padding:"12px",backgroundColor:"#F8F9FA",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:S===y.id?"1px solid #E2E8F0":"none"},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{fontWeight:"600",color:"#343A40"},children:[se(y.start_time)," - ",ce(y.start_time)]}),s.jsxs("div",{style:{fontSize:"12px",color:"#6C757D"},children:[y.duration_minutes," min • ",Array.isArray(y.treatment_codes)?y.treatment_codes.join(", "):y.treatment_codes]})]}),s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:S===y.id?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:s.jsx("path",{d:"M7 10L12 15L17 10H7Z",fill:"currentColor"})})]}),S===y.id&&s.jsxs("div",{style:{padding:"16px",backgroundColor:"white"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"12px",marginBottom:"16px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:"10px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase"},children:"Start Time"}),s.jsx("div",{style:{fontSize:"12px",color:"#343A40"},children:ce(y.start_time)})]}),s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:"10px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase"},children:"Duration"}),s.jsxs("div",{style:{fontSize:"12px",color:"#343A40"},children:[y.duration_minutes," min"]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:"10px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase"},children:"Status"}),s.jsx("div",{style:{fontSize:"12px",color:"#343A40"},children:y.note_status||"draft"})]})]}),I===y.id?s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#343A40",margin:"0 0 12px 0"},children:"Edit Session Details"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"24px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px"},children:"Start Time"}),s.jsx("input",{type:"datetime-local",value:k!=null&&k.start_time?new Date(k.start_time).toISOString().slice(0,16):"",onChange:le=>E(ne=>({...ne,start_time:le.target.value})),style:{width:"100%",padding:"6px",border:"2px solid #E2E8F0",borderRadius:"4px",fontSize:"12px"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px"},children:"Duration (min)"}),s.jsx("input",{type:"number",value:(k==null?void 0:k.duration_minutes)||"",onChange:le=>E(ne=>({...ne,duration_minutes:le.target.value})),style:{width:"100%",padding:"6px",border:"2px solid #E2E8F0",borderRadius:"4px",fontSize:"12px"},min:"15",step:"15"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px"},children:"Treatment Codes"}),s.jsx("input",{type:"text",value:(k==null?void 0:k.treatment_codes)||"",onChange:le=>E(ne=>({...ne,treatment_codes:le.target.value})),style:{width:"100%",padding:"6px",border:"2px solid #E2E8F0",borderRadius:"4px",fontSize:"12px"},placeholder:"e.g., 97110, 97165"})]})]}),y.notes&&y.notes.length>0&&y.notes[0].soap&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"20px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"S - Subjective"}),s.jsx("textarea",{value:((H=(M=k==null?void 0:k.notes)==null?void 0:M.soap)==null?void 0:H.subjective)||"",onChange:le=>E(ne=>{var we;return{...ne,notes:{...ne.notes,soap:{...(we=ne.notes)==null?void 0:we.soap,subjective:le.target.value}}}}),style:{width:"100%",padding:"16px",border:"1px solid #E2E8F0",borderRadius:"8px",resize:"vertical",fontSize:"14px",lineHeight:"1.6"},rows:4,placeholder:"What the client reported..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"O - Objective"}),s.jsx("textarea",{value:((q=(z=k==null?void 0:k.notes)==null?void 0:z.soap)==null?void 0:q.objective)||"",onChange:le=>E(ne=>{var we;return{...ne,notes:{...ne.notes,soap:{...(we=ne.notes)==null?void 0:we.soap,objective:le.target.value}}}}),style:{width:"100%",padding:"16px",border:"1px solid #E2E8F0",borderRadius:"8px",resize:"vertical",fontSize:"14px",lineHeight:"1.6"},rows:4,placeholder:"What you observed..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"A - Assessment"}),s.jsx("textarea",{value:((te=(Q=k==null?void 0:k.notes)==null?void 0:Q.soap)==null?void 0:te.assessment)||"",onChange:le=>E(ne=>{var we;return{...ne,notes:{...ne.notes,soap:{...(we=ne.notes)==null?void 0:we.soap,assessment:le.target.value}}}}),style:{width:"100%",padding:"16px",border:"1px solid #E2E8F0",borderRadius:"8px",resize:"vertical",fontSize:"14px",lineHeight:"1.6"},rows:4,placeholder:"Your assessment..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"P - Plan"}),s.jsx("textarea",{value:((ue=(pe=k==null?void 0:k.notes)==null?void 0:pe.soap)==null?void 0:ue.plan)||"",onChange:le=>E(ne=>{var we;return{...ne,notes:{...ne.notes,soap:{...(we=ne.notes)==null?void 0:we.soap,plan:le.target.value}}}}),style:{width:"100%",padding:"16px",border:"1px solid #E2E8F0",borderRadius:"8px",resize:"vertical",fontSize:"14px",lineHeight:"1.6"},rows:4,placeholder:"Next steps..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Synthesized Summary"}),s.jsx("textarea",{value:((T=(Ee=k==null?void 0:k.notes)==null?void 0:Ee.soap)==null?void 0:T.synthesized_summary)||"",onChange:le=>E(ne=>{var we;return{...ne,notes:{...ne.notes,soap:{...(we=ne.notes)==null?void 0:we.soap,synthesized_summary:le.target.value}}}}),style:{width:"100%",padding:"16px",border:"1px solid #E2E8F0",borderRadius:"8px",resize:"vertical",fontSize:"14px",lineHeight:"1.6"},rows:4,placeholder:"AI-generated session summary..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Goals Addressed"}),s.jsx("textarea",{value:Array.isArray(($=(R=k==null?void 0:k.notes)==null?void 0:R.soap)==null?void 0:$.goals_addressed)?k.notes.soap.goals_addressed.join(", "):((ee=(K=k==null?void 0:k.notes)==null?void 0:K.soap)==null?void 0:ee.goals_addressed)||"",onChange:le=>E(ne=>{var we;return{...ne,notes:{...ne.notes,soap:{...(we=ne.notes)==null?void 0:we.soap,goals_addressed:le.target.value.split(",").map(In=>In.trim()).filter(In=>In)}}}}),style:{width:"100%",padding:"16px",border:"1px solid #E2E8F0",borderRadius:"8px",resize:"vertical",fontSize:"14px",lineHeight:"1.6"},rows:3,placeholder:"Goals addressed in this session..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Next Session Recommendations"}),s.jsx("textarea",{value:Array.isArray((Te=(de=k==null?void 0:k.notes)==null?void 0:de.soap)==null?void 0:Te.next_session_recommendations)?k.notes.soap.next_session_recommendations.join(", "):((gt=(Ne=k==null?void 0:k.notes)==null?void 0:Ne.soap)==null?void 0:gt.next_session_recommendations)||"",onChange:le=>E(ne=>{var we;return{...ne,notes:{...ne.notes,soap:{...(we=ne.notes)==null?void 0:we.soap,next_session_recommendations:le.target.value.split(",").map(In=>In.trim()).filter(In=>In)}}}}),style:{width:"100%",padding:"16px",border:"1px solid #E2E8F0",borderRadius:"8px",resize:"vertical",fontSize:"14px",lineHeight:"1.6"},rows:3,placeholder:"Recommendations for next session..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Original Session Notes"}),s.jsx("textarea",{value:((Tc=(ct=k==null?void 0:k.notes)==null?void 0:ct.soap)==null?void 0:Tc.original_notes)||"",onChange:le=>E(ne=>{var we;return{...ne,notes:{...ne.notes,soap:{...(we=ne.notes)==null?void 0:we.soap,original_notes:le.target.value}}}}),style:{width:"100%",padding:"16px",border:"1px solid #E2E8F0",borderRadius:"8px",resize:"vertical",fontSize:"14px",lineHeight:"1.6"},rows:5,placeholder:"Original session notes or audio transcript..."})]})]})]}):y.notes&&y.notes.length>0&&y.notes[0].soap&&s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#343A40",margin:"0 0 12px 0"},children:"Session Notes"}),s.jsxs("div",{style:{fontSize:"13px",color:"#343A40",lineHeight:"1.6",padding:"16px",backgroundColor:"#F8F9FA",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[y.notes[0].soap.subjective&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Subjective:"})," ",y.notes[0].soap.subjective]}),y.notes[0].soap.objective&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Objective:"})," ",y.notes[0].soap.objective]}),y.notes[0].soap.assessment&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Assessment:"})," ",y.notes[0].soap.assessment]}),y.notes[0].soap.plan&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Plan:"})," ",y.notes[0].soap.plan]}),y.notes[0].soap.synthesized_summary&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Summary:"})," ",y.notes[0].soap.synthesized_summary]}),y.notes[0].soap.goals_addressed&&y.notes[0].soap.goals_addressed.length>0&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Goals Addressed:"})," ",Array.isArray(y.notes[0].soap.goals_addressed)?y.notes[0].soap.goals_addressed.join(", "):y.notes[0].soap.goals_addressed]}),y.notes[0].soap.next_session_recommendations&&y.notes[0].soap.next_session_recommendations.length>0&&s.jsxs("div",{style:{marginBottom:"0"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Next Session:"})," ",Array.isArray(y.notes[0].soap.next_session_recommendations)?y.notes[0].soap.next_session_recommendations.join(", "):y.notes[0].soap.next_session_recommendations]}),!y.notes[0].soap.subjective&&!y.notes[0].soap.objective&&!y.notes[0].soap.assessment&&!y.notes[0].soap.plan&&s.jsx("div",{style:{fontStyle:"italic",color:"#6C757D"},children:"No session notes recorded"})]})]}),W===y.id&&y.notes&&y.notes[0]&&y.notes[0].soap&&y.notes[0].soap.original_notes&&s.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#FFF3E0",borderRadius:"6px",border:"1px solid #FFB74D"},children:[s.jsx("h5",{style:{fontSize:"13px",fontWeight:"600",color:"#F57C00",margin:"0 0 8px 0",textTransform:"uppercase"},children:"Original Session Notes"}),s.jsx("div",{style:{fontSize:"13px",color:"#343A40",lineHeight:"1.5",whiteSpace:"pre-wrap"},children:y.notes[0].soap.original_notes})]}),s.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[y.notes&&y.notes[0]&&y.notes[0].soap&&y.notes[0].soap.original_notes&&s.jsx("button",{onClick:le=>{le.stopPropagation(),Y(W===y.id?null:y.id)},style:{padding:"6px 12px",backgroundColor:"white",border:"2px solid #6F42C1",borderRadius:"4px",color:"#6F42C1",fontSize:"12px",cursor:"pointer"},children:W===y.id?"Hide Source":"Show Source"}),I===y.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:le=>{le.stopPropagation(),L(null),E(null)},style:{padding:"6px 12px",backgroundColor:"white",border:"2px solid #6C757D",borderRadius:"4px",color:"#6C757D",fontSize:"12px",cursor:"pointer"},children:"Cancel"}),s.jsx("button",{onClick:le=>{le.stopPropagation(),nt(y.id)},style:{padding:"6px 12px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"Save"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:le=>{le.stopPropagation(),Ye(y)},style:{padding:"6px 12px",backgroundColor:"white",border:"2px solid #20B2AA",borderRadius:"4px",color:"#20B2AA",fontSize:"12px",cursor:"pointer"},children:"Edit"}),s.jsx("button",{onClick:le=>{le.stopPropagation(),Tn(y.id)},style:{padding:"6px 12px",backgroundColor:"#FF6B6B",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"Delete"})]})]})]})]},y.id||j)}):s.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#6C757D"},children:"No sessions yet"})})]}),s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",padding:"24px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #20B2AA"},children:[s.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#343A40",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"#20B2AA"})}),"Goals"]}),s.jsx("button",{onClick:()=>d(!0),style:{padding:"6px 12px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",cursor:"pointer"},children:"Add Goal"})]}),s.jsx("div",{children:u.length>0?u.slice(0,5).map((y,j)=>s.jsxs("div",{style:{padding:"12px",backgroundColor:"#F8F9FA",borderRadius:"8px",marginBottom:"8px"},children:[s.jsx("div",{style:{fontWeight:"500",color:"#343A40",marginBottom:"4px"},children:y.title}),s.jsx("div",{style:{fontSize:"12px",color:"#6C757D"},children:y.type})]},y.id||j)):s.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#6C757D"},children:"No goals yet"})})]}),s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",padding:"24px"},children:[s.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#343A40",margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",paddingBottom:"12px",borderBottom:"2px solid #20B2AA"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",fill:"#20B2AA"})}),"Next Session Recommendations"]}),s.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6C757D"},children:[s.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{margin:"0 auto 16px",opacity:.5},children:s.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",fill:"currentColor"})}),s.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0 0 8px 0"},children:"No recommendations yet"}),s.jsx("p",{style:{fontSize:"14px",margin:"0"},children:"Next session recommendations will appear here."})]})]}),s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",padding:"24px"},children:[s.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#343A40",margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",paddingBottom:"12px",borderBottom:"2px solid #20B2AA"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"#20B2AA"})}),"Recommended Exercises"]}),s.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6C757D"},children:[s.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{margin:"0 auto 16px",opacity:.5},children:s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"currentColor"})}),s.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0 0 8px 0"},children:"No exercises assigned yet"}),s.jsx("p",{style:{fontSize:"14px",margin:"0"},children:"Recommended exercises will appear here."})]})]})]})]}),f&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:10001,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"100%",margin:"24px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[s.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#343A40"},children:"Add New Goal"}),s.jsx("button",{onClick:()=>d(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6C757D"},children:"×"})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px"},children:"Goal Title"}),s.jsx("input",{type:"text",value:oe.title,onChange:y=>P(j=>({...j,title:y.target.value})),style:{width:"100%",padding:"8px",border:"2px solid #E2E8F0",borderRadius:"6px"},placeholder:"Enter goal title"})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px"},children:"Description"}),s.jsx("textarea",{value:oe.description,onChange:y=>P(j=>({...j,description:y.target.value})),style:{width:"100%",padding:"8px",border:"2px solid #E2E8F0",borderRadius:"6px",resize:"vertical"},placeholder:"Enter goal description",rows:3})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px"},children:"Type"}),s.jsxs("select",{value:oe.type,onChange:y=>P(j=>({...j,type:y.target.value})),style:{width:"100%",padding:"8px",border:"2px solid #E2E8F0",borderRadius:"6px"},children:[s.jsx("option",{value:"short_term",children:"Short Term"}),s.jsx("option",{value:"long_term",children:"Long Term"})]})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[s.jsx("button",{onClick:()=>d(!1),style:{padding:"8px 16px",backgroundColor:"white",border:"2px solid #6C757D",borderRadius:"6px",color:"#6C757D",cursor:"pointer"},children:"Cancel"}),s.jsx("button",{onClick:O,style:{padding:"8px 16px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Add Goal"})]})]})})]})})},D2=({appointment:e,onClose:t,onViewClient:n,onReschedule:r})=>{const{getToken:i}=De(),{showSuccess:o,showError:a}=Vs(),[l,c]=x.useState(!1),[u,m]=x.useState(!1),p="https://tv-api-326430627435.us-central1.run.app",g=h=>{const v=new Date(h);return{date:v.toLocaleDateString("en",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),time:v.toLocaleTimeString("en",{hour:"numeric",minute:"2-digit",hour12:!0}),fullDateTime:v.toLocaleString("en",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}},w=h=>h?{weekly:"Weekly (every week)",biweekly:"Bi-weekly (every 2 weeks)",monthly:"Monthly (every month)"}[h]||h:"One-time appointment",C=h=>{if(!h)return"Virtual Session";if(typeof h=="string")try{h=JSON.parse(h)}catch{return h}return h.type==="virtual"?"Virtual Session":h.type==="in_person"?h.address?`In-Person: ${h.address}`:"In-Person Session":"Virtual Session"},_=()=>{const h=new Date(e.start_ts),v=new Date(e.end_ts),S=Math.round((v-h)/(1e3*60));if(S>=60){const A=Math.floor(S/60),I=S%60;return I>0?`${A}h ${I}m`:`${A}h`}return`${S}m`},N=async()=>{c(!0);try{const h=await i(),v=await fetch(`${p}/therapist/appointments/${e.id}/cancel`,{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(v.ok)o("Appointment cancelled successfully. Client has been notified."),t();else{const S=await v.json();a(S.detail||"Failed to cancel appointment")}}catch(h){console.error("Error cancelling appointment:",h),a("Failed to cancel appointment")}finally{c(!1),m(!1)}},{date:f,time:d}=g(e.start_ts);return s.jsxs("div",{className:"appointment-popup-overlay",children:[s.jsxs("div",{className:"appointment-popup",children:[s.jsxs("div",{className:"popup-header",children:[s.jsx("h3",{children:"Appointment Details"}),s.jsx("button",{onClick:t,className:"close-btn",children:"×"})]}),s.jsx("div",{className:"popup-content",children:s.jsxs("div",{className:"appointment-details",children:[s.jsxs("div",{className:"detail-section",children:[s.jsx("h4",{children:"Basic Information"}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Client:"}),s.jsx("span",{children:e.client_name})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Date & Time:"}),s.jsxs("span",{children:[f," at ",d]})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Duration:"}),s.jsx("span",{children:_()})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Status:"}),s.jsx("span",{className:`status-badge ${e.status}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]}),s.jsxs("div",{className:"detail-section",children:[s.jsx("h4",{children:"Session Details"}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Location:"}),s.jsx("span",{children:C(e.location)})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Recurring:"}),s.jsx("span",{children:w(e.recurring_rule)})]}),e.scheduling_request_id&&s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Origin:"}),s.jsx("span",{children:"Client requested meeting"})]})]}),s.jsxs("div",{className:"detail-section",children:[s.jsx("h4",{children:"Timestamps"}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Created:"}),s.jsx("span",{children:new Date(e.created_at||e.start_ts).toLocaleString("en",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]}),e.updated_at&&e.updated_at!==e.created_at&&s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Last Updated:"}),s.jsx("span",{children:new Date(e.updated_at).toLocaleString("en",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]})]})}),s.jsxs("div",{className:"popup-actions",children:[s.jsxs("button",{onClick:()=>n(e.client_id),className:"action-btn view-client-btn",disabled:l,children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})}),"View Client"]}),s.jsxs("button",{onClick:()=>m(!0),className:"action-btn cancel-btn",disabled:l,children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})}),"Cancel Meeting"]}),s.jsxs("button",{onClick:()=>r(e),className:"action-btn reschedule-btn",disabled:l,children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 6V9L16 13L14.6 14.4L11 10.8V6H12ZM12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2ZM12 20C7.6 20 4 16.4 4 12S7.6 4 12 4 20 7.6 20 12 16.4 20 12 20Z",fill:"currentColor"})}),"Reschedule"]})]})]}),s.jsx(A2,{isOpen:u,title:"Cancel Appointment",message:`Are you sure you want to cancel this appointment with ${e.client_name}? The client will be notified automatically.`,onConfirm:N,onCancel:()=>m(!1),confirmText:"Cancel Appointment",cancelText:"Keep Appointment"})]})},M2=({onBack:e})=>{const{getToken:t,signOut:n}=De(),{showSuccess:r,showError:i}=Vs(),[o,a]=x.useState(()=>{const O=new Date,y=O.getFullYear(),j=String(O.getMonth()+1).padStart(2,"0"),M=String(O.getDate()).padStart(2,"0");return`${y}-${j}-${M}`}),[l,c]=x.useState(null),[u,m]=x.useState(!0),[p,g]=x.useState([]),[w,C]=x.useState(!1),[_,N]=x.useState(null),[f,d]=x.useState(new Set),[h,v]=x.useState(null),[S,A]=x.useState(!1),[I,L]=x.useState(!1),[k,E]=x.useState(null),[W,Y]=x.useState(!1),b=O=>{const[y,j,M]=O.split("-").map(Number),z=new Date(y,j-1,M,12,0,0).getDay();let q=M;return z===0?q=M-6:z>1&&(q=M-(z-1)),`${y}-${String(j).padStart(2,"0")}-${String(q).padStart(2,"0")}`},U=O=>{const[y,j,M]=O.split("-").map(Number),H=[];for(let z=0;z<7;z++){const q=M+z,Q=`${y}-${String(j).padStart(2,"0")}-${String(q).padStart(2,"0")}`;H.push(Q)}return H},X="https://tv-api-326430627435.us-central1.run.app",Z=async()=>{var O,y,j,M,H;try{const z=await t(),q=b(o);console.log(`📅 LOADING CALENDAR: Week starting ${q} (current: ${o})`);const Q=await fetch(`${X}/calendar/therapist/calendar/week/${q}`,{headers:{Authorization:`Bearer ${z}`}});if(Q.ok){const te=await Q.json();console.log("📅 Calendar data loaded:",te),console.log("📅 Slots count:",((O=te.slots)==null?void 0:O.length)||0),console.log("📅 Available slots:",((y=te.slots)==null?void 0:y.filter(ue=>ue.status==="available").length)||0),console.log("📅 Booked slots:",((j=te.slots)==null?void 0:j.filter(ue=>ue.status==="booked").length)||0),console.log("📅 Appointments:",((M=te.appointments)==null?void 0:M.length)||0);const pe=((H=te.slots)==null?void 0:H.filter(ue=>ue.status==="available"))||[];pe.length>0&&(console.log("📅 Sample available slots:"),pe.slice(0,3).forEach(ue=>{console.log(`   - ${ue.slot_date} ${ue.start_time} (${ue.status})`)})),c(te)}else console.error("Failed to load calendar data")}catch(z){console.error("Error loading calendar data:",z)}finally{m(!1)}},oe=async()=>{try{const O=await t(),y=await fetch(`${X}/calendar/scheduling-requests/pending`,{headers:{Authorization:`Bearer ${O}`}});if(y.ok){const j=await y.json();g(j.pending_requests||[])}}catch(O){console.error("Error loading pending requests:",O)}};x.useEffect(()=>{Z(),oe()},[o]),x.useEffect(()=>{const O=()=>{w&&be()};return document.addEventListener("mouseup",O),()=>{document.removeEventListener("mouseup",O)}},[w,f,_]);const P=O=>{const[y,j,M]=o.split("-").map(Number),H=new Date(y,j-1,M),z=new Date(H.getTime()+O*7*24*60*60*1e3),q=z.getFullYear(),Q=String(z.getMonth()+1).padStart(2,"0"),te=String(z.getDate()).padStart(2,"0");a(`${q}-${Q}-${te}`)},V=async O=>{try{const y=await t(),j=await fetch(`${X}/calendar/therapist/calendar/slots`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify(O)});if(j.ok)console.log("✅ Slot created successfully"),setTimeout(()=>Z(),100);else{const M=await j.json();i(M.detail||"Failed to create availability slot")}}catch(y){console.error("Error creating slot:",y),i("Failed to create availability slot")}},G=async O=>{try{const y=await t(),j=await fetch(`${X}/calendar/therapist/calendar/slots/${O}`,{method:"DELETE",headers:{Authorization:`Bearer ${y}`}});if(j.ok)console.log("✅ Slot deleted successfully"),setTimeout(()=>Z(),100);else{const M=await j.json();i(M.detail||"Failed to delete availability slot")}}catch(y){console.error("Error deleting slot:",y),i("Failed to delete availability slot")}},se=async(O,y,j="",M=null)=>{try{const H=await t();console.log("🔍 THERAPIST: Responding to request",O,"with status",y),console.log("🔍 THERAPIST: API URL:",`${X}/calendar/scheduling-requests/${O}/respond`);const z=await fetch(`${X}/calendar/scheduling-requests/${O}/respond`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`},body:JSON.stringify({status:y,therapist_response:j,suggested_alternatives:M})});if(z.ok)await oe(),await Z(),r(`Request ${y} successfully!`);else{const q=await z.json();i(q.detail||`Failed to ${y} request`)}}catch(H){console.error("Error responding to request:",H),i(`Failed to ${y} request`)}},ce=async O=>{try{const y=await t(),j=await fetch(`${X}/therapist/clients/${O}`,{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});if(j.ok){const M=await j.json();E(M),Y(!0)}else i("Failed to load client profile")}catch(y){console.error("Error fetching client profile:",y),i("Error loading client profile")}},Ke=()=>{const O=[];for(let y=6;y<22;y++)for(let j=0;j<60;j+=15){const M=`${y.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`;O.push(M)}return O},ze=()=>{const O=b(o),y=U(O);return console.log("🗓️ STRING-BASED WEEK:",{currentWeekStr:o,mondayStr:O,weekDates:y}),y},B=(O,y,j)=>{var $,K;const M=new Date,H=M.toISOString().split("T")[0],z=M.getHours(),q=M.getMinutes(),Q=Math.ceil(q/15)*15,te=Q>=60?z+1:z,pe=Q>=60?0:Q,ue=`${te.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`;if(y<H||y===H&&j<ue){i(`Cannot create availability in the past (${j} is before current time ${ue})`);return}const Ee=($=l==null?void 0:l.slots)==null?void 0:$.find(ee=>ee.slot_date===y&&ee.start_time===j+":00"),T=(K=l==null?void 0:l.appointments)==null?void 0:K.find(ee=>{const de=ee.start_ts.split("T")[0],Te=ee.start_ts.split("T")[1].slice(0,5);return de===y&&Te===j});if(T){v(T),A(!0);return}const R=Ee&&Ee.status==="available";N(R?"unselect":"select"),C(!0),d(new Set([`${y}_${j}`])),console.log("🖱️ DRAG START:",{dateStr:y,time:j,mode:R?"unselect":"select"}),document.body.style.userSelect="none"},ae=(O,y,j)=>{var z;if(!w)return;const M=new Date().toISOString().split("T")[0];y<M||(z=l==null?void 0:l.appointments)!=null&&z.find(q=>{const Q=q.start_ts.split("T")[0],te=q.start_ts.split("T")[1].slice(0,5);return Q===y&&te===j})||(d(q=>new Set([...q,`${y}_${j}`])),console.log("🖱️ DRAG OVER:",y,j))},be=async()=>{var O;if(!w||f.size===0){C(!1),d(new Set),document.body.style.userSelect="";return}try{const y=[];console.log("🖱️ PROCESSING DRAG:",{mode:_,slots:Array.from(f)});for(const j of f){const[M,H]=j.split("_"),z=(O=l==null?void 0:l.slots)==null?void 0:O.find(q=>q.slot_date===M&&q.start_time===H+":00");if(_==="select"&&!z){const[q,Q]=H.split(":").map(Number),te=q*60+Q+15,pe=Math.floor(te/60),ue=te%60,Ee=`${String(pe).padStart(2,"0")}:${String(ue).padStart(2,"0")}:00`;console.log("📅 CREATING SLOT:",{dateStr:M,time:H,endTimeStr:Ee}),y.push(V({slot_date:M,start_time:H+":00",end_time:Ee}))}else _==="unselect"&&z&&z.status==="available"&&(console.log("🗑️ DELETING SLOT:",{dateStr:M,time:H,slotId:z.id}),y.push(G(z.id)))}await Promise.all(y)}catch(y){console.error("Error during drag operation:",y)}finally{C(!1),d(new Set),N(null),document.body.style.userSelect=""}},Ye=async O=>{var R,$;if(w)return;const y=O.target.getAttribute("data-date"),j=O.target.getAttribute("data-time");if(console.log("🎯 DIRECT CLICK:",{dataDate:y,dataTime:j}),!y||!j){console.error("❌ Missing data attributes on clicked element");return}const M=new Date,H=M.toISOString().split("T")[0],z=M.getHours(),q=M.getMinutes(),Q=Math.ceil(q/15)*15,te=Q>=60?z+1:z,pe=Q>=60?0:Q,ue=`${te.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`;if(console.log("🕐 TIME VALIDATION:",{clickedDate:y,clickedTime:j,today:H,currentTime:ue,rawTime:`${z}:${q}`,willBlock:y<H||y===H&&j<ue}),y<H||y===H&&j<ue){i(`Cannot create availability in the past (${j} is before current time ${ue})`);return}const Ee=(R=l==null?void 0:l.slots)==null?void 0:R.find(K=>K.slot_date===y&&K.start_time===j+":00"),T=($=l==null?void 0:l.appointments)==null?void 0:$.find(K=>{const ee=K.start_ts.split("T")[0],de=K.start_ts.split("T")[1].slice(0,5),Te=K.end_ts.split("T")[1].slice(0,5);if(ee===y){const Ne=parseInt(j.split(":")[0])*60+parseInt(j.split(":")[1]),gt=parseInt(de.split(":")[0])*60+parseInt(de.split(":")[1]),ct=parseInt(Te.split(":")[0])*60+parseInt(Te.split(":")[1]);return Ne>=gt&&Ne<ct}return!1});if(T){v(T),A(!0);return}if(Ee&&Ee.status==="available")await G(Ee.id);else if(!Ee){const[K,ee]=j.split(":").map(Number),de=K*60+ee+15,Te=Math.floor(de/60),Ne=de%60,gt=`${String(Te).padStart(2,"0")}:${String(Ne).padStart(2,"0")}:00`;await V({slot_date:y,start_time:j+":00",end_time:gt})}},nt=Ke(),Tn=ze();return u?s.jsxs("div",{className:"therapist-calendar-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Loading calendar..."})]}):s.jsxs("div",{className:"therapist-calendar",children:[s.jsxs("div",{className:"calendar-header",children:[s.jsxs("div",{className:"calendar-header-left",children:[s.jsxs("button",{onClick:e,className:"back-btn",children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z",fill:"currentColor"})}),"Back to Dashboard"]}),s.jsx("h2",{children:"My Calendar & Availability"})]}),s.jsxs("div",{className:"calendar-header-right",children:[s.jsxs("div",{className:"calendar-navigation",children:[s.jsx("button",{onClick:()=>P(-1),className:"nav-btn",children:"← Previous Week"}),s.jsxs("span",{className:"current-week",children:["Week of ",b(o)]}),s.jsx("button",{onClick:()=>P(1),className:"nav-btn",children:"Next Week →"})]}),s.jsxs("button",{onClick:n,className:"sign-out-btn",children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",fill:"currentColor"})}),"Sign Out"]})]})]}),p.length>0&&s.jsxs("div",{className:"pending-requests",children:[s.jsxs("h3",{children:["Pending Scheduling Requests (",p.length,")"]}),s.jsx("div",{className:"requests-list",children:p.map(O=>{const y=O.requested_start_time,j=O.requested_end_time,M=parseInt(y.split(":")[0])*60+parseInt(y.split(":")[1]),z=parseInt(j.split(":")[0])*60+parseInt(j.split(":")[1])-M,Q=new Date(O.requested_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),te=pe=>{const[ue,Ee]=pe.split(":"),T=parseInt(ue),R=T>=12?"PM":"AM";return`${T>12?T-12:T===0?12:T}:${Ee} ${R}`};return s.jsxs("div",{className:"request-item",children:[s.jsxs("div",{className:"request-info",children:[s.jsxs("div",{className:"request-header",children:[s.jsx("span",{className:"client-name clickable",onClick:()=>ce(O.client_id),style:{color:"#20B2AA",cursor:"pointer",fontWeight:"bold",textDecoration:"underline"},children:O.client_name}),s.jsxs("span",{className:"request-date-time",children:[Q," • ",te(y)," - ",te(j)," • ",z," min"]})]}),O.client_message&&s.jsxs("p",{className:"client-message",children:['"',O.client_message,'"']})]}),s.jsxs("div",{className:"request-actions",children:[s.jsx("button",{onClick:()=>se(O.id,"approved"),className:"approve-btn",children:"Approve"}),s.jsx("button",{onClick:()=>{const pe=prompt("Reason for declining (optional):");se(O.id,"declined",pe||"")},className:"decline-btn",children:"Decline"})]})]},O.id)})})]}),s.jsxs("div",{className:"calendar-grid",children:[s.jsxs("div",{className:"calendar-header-row",children:[s.jsx("div",{className:"time-column-header",children:"Time"}),Tn.map((O,y)=>{const[j,M,H]=O.split("-").map(Number),z=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],q=new Date().toISOString().split("T")[0],Q=O<q;return s.jsxs("div",{className:`day-header ${Q?"past-date-header":""}`,children:[s.jsx("div",{className:"day-name",children:z[y]}),s.jsx("div",{className:"day-date",children:H}),Q&&s.jsx("div",{className:"past-indicator",children:"Past"})]},O)})]}),nt.map(O=>s.jsxs("div",{className:"calendar-row",children:[s.jsx("div",{className:"time-label",children:O}),Tn.map(y=>{var ue,Ee;const j=(ue=l==null?void 0:l.slots)==null?void 0:ue.find(T=>T.slot_date===y&&T.start_time===O+":00"),M=(Ee=l==null?void 0:l.appointments)==null?void 0:Ee.find(T=>{const R=T.start_ts.split("T")[0],$=T.start_ts.split("T")[1].slice(0,5),K=T.end_ts.split("T")[1].slice(0,5);if(R===y){const ee=parseInt(O.split(":")[0])*60+parseInt(O.split(":")[1]),de=parseInt($.split(":")[0])*60+parseInt($.split(":")[1]),Te=parseInt(K.split(":")[0])*60+parseInt(K.split(":")[1]);return ee>=de&&ee<Te}return!1}),H=`${y}_${O}`,z=f.has(H);let q="calendar-cell",Q="";const te=new Date().toISOString().split("T")[0],pe=y<te;if(pe&&(q+=" past-date"),M){q+=" booked";const T=M.start_ts.split("T")[1].slice(0,5),R=M.end_ts.split("T")[1].slice(0,5),$=parseInt(O.split(":")[0])*60+parseInt(O.split(":")[1]),K=parseInt(T.split(":")[0])*60+parseInt(T.split(":")[1]),ee=parseInt(R.split(":")[0])*60+parseInt(R.split(":")[1]),de=ee-K,Te=de>=60?`${Math.floor(de/60)}h${de%60>0?` ${de%60}m`:""}`:`${de}m`;$===K?(Q=`${M.client_name} (${Te})`,q+=" appointment-start"):$===ee-15?(Q="↑ (cont.)",q+=" appointment-end"):(Q="↑ (cont.)",q+=" appointment-middle")}else j&&j.status==="available"&&(q+=" available",Q="Available");return z&&w&&(_==="select"&&!j&&!M?q+=" drag-select-preview":_==="unselect"&&j&&j.status==="available"&&(q+=" drag-unselect-preview")),s.jsx("div",{className:q,"data-date":y,"data-time":O,onMouseDown:pe?void 0:T=>B(T,y,O),onMouseEnter:pe?void 0:T=>ae(T,y,O),onClick:pe?void 0:Ye,style:{cursor:pe?"not-allowed":w?"grabbing":"pointer",opacity:pe?.3:1},children:Q},`${y}-${O}`)})]},O))]}),s.jsxs("div",{className:"calendar-legend",children:[s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color available"}),s.jsx("span",{children:"Available"})]}),s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color booked"}),s.jsx("span",{children:"Booked"})]}),s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color"}),s.jsx("span",{children:"Unavailable"})]})]}),s.jsxs("div",{className:"calendar-instructions",children:[s.jsx("p",{children:s.jsx("strong",{children:"How to use:"})}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Click"})," empty slot → Creates 15-minute availability"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Click"})," green slot → Removes availability"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Drag"})," across multiple slots → Bulk select/unselect"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Click"})," red slots → View appointment details"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Approve/decline"})," requests above calendar"]})]})]}),S&&h&&s.jsx(D2,{appointment:h,onClose:()=>{A(!1),v(null),setTimeout(()=>Z(),500)},onViewClient:O=>{A(!1),v(null),e(),window.dispatchEvent(new CustomEvent("viewClient",{detail:{clientId:O}}))},onReschedule:O=>{A(!1),v(O),L(!0)}}),W&&k&&s.jsx("div",{className:"popup-overlay",onClick:()=>Y(!1),children:s.jsxs("div",{className:"client-profile-popup",onClick:O=>O.stopPropagation(),children:[s.jsxs("div",{className:"popup-header",children:[s.jsx("h3",{children:"Client Profile"}),s.jsx("button",{className:"close-btn",onClick:()=>Y(!1),children:"×"})]}),s.jsx("div",{className:"popup-content",children:s.jsxs("div",{className:"profile-section",children:[s.jsx("h4",{children:k.name}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",k.email]}),k.dob&&s.jsxs("p",{children:[s.jsx("strong",{children:"Date of Birth:"})," ",new Date(k.dob).toLocaleDateString()]}),k.school&&s.jsxs("p",{children:[s.jsx("strong",{children:"School:"})," ",k.school]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"})," ",k.status]}),k.assignment_start&&s.jsxs("p",{children:[s.jsx("strong",{children:"Assignment Start:"})," ",new Date(k.assignment_start).toLocaleDateString()]}),k.capacity_pct&&s.jsxs("p",{children:[s.jsx("strong",{children:"Capacity:"})," ",k.capacity_pct,"%"]})]})})]})}),I&&h&&s.jsx(Ff,{onClose:()=>{L(!1),v(null),Z()},selectedClient:{id:h.client_id,name:h.client_name},isReschedule:!0,originalAppointment:h})]})},B2=()=>{const{getToken:e}=De(),[t,n]=x.useState([]),[r,i]=x.useState(!0),[o,a]=x.useState(null),[l,c]=x.useState(!1),[u,m]=x.useState(!1),[p,g]=x.useState(null),[w,C]=x.useState(""),[_,N]=x.useState(!1),[f,d]=x.useState(null),h=async()=>{try{i(!0);const E=await e();if(!E){console.error("No authentication token available"),i(!1);return}const W=await fetch("https://tv-api-326430627435.us-central1.run.app/therapist/recent-requests",{headers:{Authorization:`Bearer ${E}`}});if(W.ok){const Y=await W.json();n(Y.requests||[])}else console.error("Failed to fetch recent requests:",W.status),n([])}catch(E){console.error("Error fetching recent requests:",E),a("Failed to load recent requests"),n([])}finally{i(!1)}};x.useEffect(()=>{h()},[]);const v=async()=>{try{const E=await e(),W=await fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/appointments/${p.id}/cancel`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify({cancellation_reason:w})});W.ok?(m(!1),g(null),C(""),h()):console.error("Failed to cancel appointment:",W.status)}catch(E){console.error("Error cancelling appointment:",E)}},S=async(E,W,Y="",b=null)=>{try{const U=await e();console.log("🔍 RECENT REQUESTS: Responding to request",E,"with status",W);const X=await fetch(`https://tv-api-326430627435.us-central1.run.app/calendar/scheduling-requests/${E}/respond`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${U}`},body:JSON.stringify({status:W,therapist_response:Y,suggested_alternatives:b})});if(X.ok)h(),console.log("✅ RECENT REQUESTS: Request responded successfully");else{const Z=await X.json();console.error("❌ RECENT REQUESTS: Failed to respond to request:",Z)}}catch(U){console.error("❌ RECENT REQUESTS: Error responding to request:",U)}},A=E=>{switch(E){case"approved":return{text:"Approved ✅",className:"approved"};case"declined":return{text:"Declined ❌",className:"declined"};case"cancelled":return{text:"Cancelled ❌",className:"cancelled"};case"counter_proposed":return{text:"Alternative Suggested",className:"counter-proposed"};case"pending":return{text:"Pending Response",className:"pending"};default:return{text:E.charAt(0).toUpperCase()+E.slice(1),className:"default"}}},I=E=>E?new Date(E).toLocaleDateString("en",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No date",L=l?t:t.slice(0,5),k=t.length>5;return r?s.jsxs("div",{className:"recent-requests-widget",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})}),"Recent Requests"]}),s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"Loading recent requests..."})]})]}):o?s.jsxs("div",{className:"recent-requests-widget",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})}),"Recent Requests"]}),s.jsxs("div",{className:"error-state",children:[s.jsx("p",{children:o}),s.jsx("button",{onClick:h,className:"btn btn-secondary",children:"Retry"})]})]}):s.jsxs("div",{className:"recent-requests-widget",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})}),"Recent Requests"]}),s.jsx("div",{className:"requests-list",children:L.length>0?s.jsxs(s.Fragment,{children:[L.map((E,W)=>{const Y=A(E.status);return s.jsx("div",{className:`request-item ${Y.className}`,children:s.jsxs("div",{className:"request-info",children:[s.jsxs("div",{className:"request-client",children:[E.client_name||"Unknown Client",W<5&&s.jsx("span",{className:"recent-badge",children:"• Recent"})]}),s.jsx("div",{className:"request-time",children:I(E.requested_time)}),s.jsxs("div",{className:"request-details",children:[s.jsx("span",{className:"status-badge",children:Y.text}),E.therapist_response&&s.jsx("div",{className:"therapist-response",children:E.therapist_response})]}),s.jsxs("div",{className:"request-actions",children:[E.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{d(E),N(!0)},className:"view-btn",title:"View Request Details",children:"View"}),s.jsx("button",{onClick:()=>S(E.id,"approved"),className:"approve-btn",title:"Approve Request",children:"Approve"}),s.jsx("button",{onClick:()=>{const b=prompt("Reason for declining (optional):");S(E.id,"declined",b||"")},className:"decline-btn",title:"Decline Request",children:"Decline"})]}),E.status==="approved"&&s.jsx("button",{onClick:()=>{g(E),m(!0)},className:"cancel-btn",title:"Cancel Appointment",children:"Cancel"})]})]})},E.id)}),k&&s.jsx("div",{className:"show-more-section",children:s.jsx("button",{onClick:()=>c(!l),className:"show-more-btn",children:l?"Show Less":`Show More (${t.length-5} more)`})})]}):s.jsxs("div",{className:"empty-state",children:[s.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})}),s.jsx("h3",{children:"No recent requests"}),s.jsx("p",{children:"Patient scheduling requests will appear here."})]})}),_&&f&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content",children:[s.jsx("h3",{children:"Request Details"}),s.jsxs("div",{className:"request-details-modal",children:[s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Patient:"})," ",f.client_name]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Requested Date:"})," ",f.requested_date?new Date(f.requested_date).toLocaleDateString():"N/A"]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Requested Time:"})," ",f.requested_start_time?new Date(f.requested_start_time).toLocaleTimeString():"N/A",f.requested_end_time&&` - ${new Date(f.requested_end_time).toLocaleTimeString()}`]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Status:"}),s.jsx("span",{className:`status-badge ${A(f.status).className}`,children:A(f.status).text})]}),f.client_message&&s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Patient Message:"}),s.jsxs("div",{className:"client-message-detail",children:['"',f.client_message,'"']})]}),f.therapist_response&&s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Therapist Response:"}),s.jsx("div",{className:"therapist-response-detail",children:f.therapist_response})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Created:"})," ",f.created_at?new Date(f.created_at).toLocaleString():"N/A"]}),f.responded_at&&s.jsxs("div",{className:"detail-row",children:[s.jsx("strong",{children:"Responded:"})," ",new Date(f.responded_at).toLocaleString()]})]}),s.jsx("div",{className:"modal-actions",children:s.jsx("button",{onClick:()=>{N(!1),d(null)},className:"btn btn-secondary",children:"Close"})})]})}),u&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content",children:[s.jsx("h3",{children:"Cancel Appointment"}),s.jsxs("p",{children:["Are you sure you want to cancel this appointment with ",p==null?void 0:p.client_name,"?"]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"cancellation-reason",children:"Cancellation Reason:"}),s.jsx("textarea",{id:"cancellation-reason",value:w,onChange:E=>C(E.target.value),placeholder:"Please provide a reason for cancellation...",rows:"3",required:!0})]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{onClick:()=>{m(!1),g(null),C("")},className:"btn btn-secondary",children:"Keep Appointment"}),s.jsx("button",{onClick:v,className:"btn btn-danger",disabled:!w.trim(),children:"Cancel Appointment"})]})]})})]})},O2=()=>{const{user:e,getToken:t,signOut:n}=De(),[r,i]=x.useState([]),[o,a]=x.useState([]),[l,c]=x.useState(!0),[u,m]=x.useState(null),[p,g]=x.useState("dashboard"),[w,C]=x.useState(""),[_,N]=x.useState(!1),[f,d]=x.useState(null),[h,v]=x.useState(null),[S,A]=x.useState(null),[I,L]=x.useState(!1),[k,E]=x.useState(0),[W,Y]=x.useState(!1),[b,U]=x.useState(null),[X,Z]=x.useState(!1),[oe,P]=x.useState(null),[V,G]=x.useState(!1),[se,ce]=x.useState(null),[Ke,ze]=x.useState(""),[B,ae]=x.useState({start_time:"",duration_minutes:60,treatment_codes:"97110",notes:{subjective:"",objective:"",assessment:"",plan:"",synthesized_summary:"",goals_addressed:[],next_session_recommendations:[],confidence_score:0},main_notes:"",is_generating:!1}),[be,Ye]=x.useState({isRecording:!1,isTranscribing:!1,mediaRecorder:null,audioChunks:[],transcript:""}),nt=async()=>{try{c(!0);const T=await t();if(!T){console.error("No authentication token available"),c(!1);return}const R=new Date,$=new Date(R.getTime()-30*24*60*60*1e3),K=new Date(R.getTime()+60*24*60*60*1e3),ee=$.toISOString().split("T")[0],de=K.toISOString().split("T")[0],[Te,Ne]=await Promise.all([fetch("https://tv-api-326430627435.us-central1.run.app/therapist/clients?limit=100",{headers:{Authorization:`Bearer ${T}`}}),fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/appointments?start_date=${ee}&end_date=${de}`,{headers:{Authorization:`Bearer ${T}`}})]);if(Te.ok){const ct=(await Te.json()).clients||[];i(Array.isArray(ct)?ct:[])}else i([]);if(Ne.ok){const ct=(await Ne.json()).appointments||[];a(Array.isArray(ct)?ct:[]),console.log("Appointments loaded:",ct.length,ct)}else console.error("Appointments API failed with status:",Ne.status),a([]);E(0)}catch(T){console.error("Error fetching therapist data:",T),m("Failed to load dashboard data"),i([]),a([]),E(0)}finally{c(!1)}};x.useEffect(()=>{e&&nt()},[e]),x.useEffect(()=>()=>{S&&clearTimeout(S)},[S]),x.useEffect(()=>()=>{be.mediaRecorder&&be.mediaRecorder.state!=="inactive"&&be.mediaRecorder.stop()},[be.mediaRecorder]);const Tn=async T=>{if(T.preventDefault(),!!w.trim()){N(!0);try{const R=await t(),$=await fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/clients?search=${encodeURIComponent(w)}&limit=100`,{headers:{Authorization:`Bearer ${R}`}});if($.ok){const ee=(await $.json()).clients||[];i(Array.isArray(ee)?ee:[])}}catch(R){console.error("Search error:",R)}finally{N(!1)}}},O=T=>{const R=T.target.value;if(C(R),S&&clearTimeout(S),R.trim()){const $=setTimeout(()=>{Tn({preventDefault:()=>{}})},1e3);A($)}else nt()},y=()=>{g("dashboard"),d(null),nt()},j=()=>{if(!Array.isArray(o))return[];const T=new Date().toISOString().split("T")[0];return o.filter(R=>R.start_ts&&R.start_ts.startsWith(T)&&R.status!=="cancelled")},M=()=>{if(!Array.isArray(o))return[];const T=new Date,R=new Date(T.getTime()+7*24*60*60*1e3);return o.filter($=>{if(!$.start_ts)return!1;const K=new Date($.start_ts);return K>=T&&K<=R&&$.status!=="cancelled"})},H=()=>{if(!Array.isArray(o))return[];const T=new Date;console.log("Filtering upcoming appointments. Total appointments:",o.length),console.log("Current time:",T);const R=o.filter($=>{if(!$.start_ts)return console.log("Appointment missing start_ts:",$),!1;const K=new Date($.start_ts),ee=K>=T&&$.status!=="cancelled";return console.log("Appointment:",$.client_name,"Date:",K,"Is upcoming:",ee,"Status:",$.status),ee}).sort(($,K)=>new Date($.start_ts)-new Date(K.start_ts));return console.log("Upcoming appointments found:",R.length,R),R},z=()=>{if(!Array.isArray(o))return[];const T=new Date;return o.filter(R=>R.start_ts?new Date(R.start_ts)<T&&R.status==="completed":!1).sort((R,$)=>new Date($.start_ts)-new Date(R.start_ts)).slice(0,20)},q=async()=>{try{const T=await navigator.mediaDevices.getUserMedia({audio:!0}),R=new MediaRecorder(T),$=[];R.ondataavailable=K=>{$.push(K.data)},R.onstop=async()=>{const K=new Blob($,{type:"audio/wav"});await te(K),T.getTracks().forEach(ee=>ee.stop())},Ye(K=>({...K,isRecording:!0,mediaRecorder:R,audioChunks:$})),R.start()}catch(T){console.error("Error starting recording:",T)}},Q=()=>{be.mediaRecorder&&be.isRecording&&(be.mediaRecorder.stop(),Ye(T=>({...T,isRecording:!1})))},te=async T=>{try{Ye(ee=>({...ee,isTranscribing:!0}));const R=new FormData;R.append("audio_file",T,"recording.wav");const $=await t(),K=await fetch("https://tv-api-326430627435.us-central1.run.app/ai/transcribe-audio",{method:"POST",headers:{Authorization:`Bearer ${$}`},body:R});if(K.ok){const ee=await K.json();Ye(de=>({...de,transcript:ee.transcript,isTranscribing:!1})),ae(de=>({...de,main_notes:ee.transcript}))}else{const ee=await K.text();console.error(`Failed to transcribe audio: ${K.status} ${ee}`),Ye(de=>({...de,isTranscribing:!1}))}}catch(R){console.error("Error transcribing audio:",R),Ye($=>({...$,isTranscribing:!1}))}},pe=async()=>{const T=B.main_notes;if(!T.trim()){alert("Please enter some notes or record audio before generating SOAP note");return}ae(R=>({...R,is_generating:!0}));try{const R=new FormData;R.append("transcript",T),R.append("client_age",0),R.append("diagnosis","Not specified"),R.append("short_term_goals",JSON.stringify([])),R.append("long_term_goals",JSON.stringify([])),R.append("session_activities",JSON.stringify([B.main_notes])),R.append("observations",""),R.append("time_in",B.start_time||""),R.append("time_out",""),R.append("units",B.duration_minutes||0);const $=B.treatment_codes||[],K=Array.isArray($)?$:[$];R.append("treatment_codes",JSON.stringify(K));const ee=await t(),de=await fetch("https://tv-api-326430627435.us-central1.run.app/ai/generate-soap-note",{method:"POST",headers:{Authorization:`Bearer ${ee}`},body:R});if(de.ok){const Ne=(await de.json()).soap_note;ae(gt=>({...gt,notes:{...gt.notes,subjective:Ne.subjective||"",objective:Ne.objective||"",assessment:Ne.assessment||"",plan:Ne.plan||"",synthesized_summary:Ne.synthesized_summary||"",goals_addressed:Ne.goals_addressed||[],next_session_recommendations:Ne.next_session_recommendations||[],confidence_score:Ne.confidence_score||0},is_generating:!1}))}else console.error("Failed to generate SOAP note"),ae(Te=>({...Te,is_generating:!1}))}catch(R){console.error("Error generating SOAP note:",R),ae($=>({...$,is_generating:!1}))}},ue=async()=>{try{const T=await t();if(!B.start_time){alert("Please enter the start time");return}if(!B.duration_minutes||B.duration_minutes<=0){alert("Please enter a valid duration");return}if(!B.notes.subjective&&!B.notes.objective){alert("Please fill in at least the Subjective or Objective section");return}const R=new Date(B.start_time);if(isNaN(R.getTime())){alert("Please enter a valid start time");return}const $={client_id:parseInt(b.client_id),start_time:R.toISOString(),duration_minutes:parseInt(B.duration_minutes),treatment_codes:[B.treatment_codes],notes:{type:"soap",soap:{...B.notes,original_notes:B.main_notes},goals_checked:[],treatment_codes:[B.treatment_codes]}},K=await fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/clients/${b.client_id}/sessions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify($)});if(K.ok)Y(!1),U(null),ae({start_time:"",duration_minutes:60,treatment_codes:"97110",notes:{subjective:"",objective:"",assessment:"",plan:"",synthesized_summary:"",goals_addressed:[],next_session_recommendations:[],confidence_score:0},main_notes:"",is_generating:!1}),Ye({isRecording:!1,isTranscribing:!1,mediaRecorder:null,audioChunks:[],transcript:""}),nt();else{const ee=await K.text();console.error("Failed to save session:",K.status,ee),alert("Failed to save session. Please try again.")}}catch(T){console.error("Error saving session:",T),alert("Error saving session. Please try again.")}},Ee=async()=>{try{const T=await t(),R=await fetch(`https://tv-api-326430627435.us-central1.run.app/therapist/appointments/${se.id}/cancel`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({cancellation_reason:Ke})});R.ok?(G(!1),ce(null),ze(""),nt()):console.error("Failed to cancel appointment:",R.status)}catch(T){console.error("Error cancelling appointment:",T)}};return p==="add-client"?s.jsx(I2,{onBack:y,onClientAdded:nt}):p==="calendar"?s.jsx(M2,{onBack:y}):p==="view-calendar"?s.jsx(R2,{onBack:y}):p==="exercise-library"?s.jsx(L2,{onBack:y}):p==="view-profile"?s.jsx(P2,{clientId:f,onBack:y}):l?s.jsx("div",{className:"therapist-dashboard",children:s.jsx("div",{className:"container",children:s.jsxs("div",{className:"loading",children:[s.jsx("div",{className:"spinner",style:{width:"48px",height:"48px",border:"4px solid #f3f3f3",borderTop:"4px solid #20B2AA",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"16px"}}),s.jsx("p",{children:"Loading therapist dashboard..."})]})})}):u?s.jsx("div",{className:"therapist-dashboard",children:s.jsx("div",{className:"container",children:s.jsxs("div",{className:"error",children:[s.jsx("h2",{children:"Error Loading Dashboard"}),s.jsx("p",{children:u}),s.jsx("button",{className:"btn btn-primary",onClick:nt,children:"Retry"})]})})}):s.jsxs("div",{className:"therapist-dashboard",style:{paddingTop:"8px"},children:[s.jsxs("div",{className:"container",children:[s.jsx("div",{style:{textAlign:"center",marginBottom:"24px",padding:"16px 40px"},children:s.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#343A40",margin:"0",background:"linear-gradient(135deg, #20B2AA, #48D1CC)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Welcome back, ",(e==null?void 0:e.displayName)||(e==null?void 0:e.email)]})}),s.jsxs("div",{className:"dashboard-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 40px",marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",gap:"32px",alignItems:"center",flex:1,justifyContent:"center"},children:[s.jsxs("div",{style:{textAlign:"center",minWidth:"120px"},children:[s.jsx("div",{className:"stat-icon",style:{width:"48px",height:"48px",margin:"0 auto 12px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",style:{fontSize:"28px",fontWeight:"700",color:"#343A40",marginBottom:"4px"},children:r.length}),s.jsx("div",{className:"stat-label",style:{fontSize:"13px",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Total Patients"})]}),s.jsxs("div",{style:{textAlign:"center",minWidth:"120px"},children:[s.jsx("div",{className:"stat-icon",style:{width:"48px",height:"48px",margin:"0 auto 12px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",style:{fontSize:"28px",fontWeight:"700",color:"#343A40",marginBottom:"4px"},children:j().length}),s.jsx("div",{className:"stat-label",style:{fontSize:"13px",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Today's Appointments"})]}),s.jsxs("div",{style:{textAlign:"center",minWidth:"120px"},children:[s.jsx("div",{className:"stat-icon",style:{width:"48px",height:"48px",margin:"0 auto 12px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M13 2.05V4.05C17.39 4.59 20.5 8.58 19.96 12.97C19.5 16.61 16.64 19.5 13 19.93V21.93C18.5 21.38 22.5 16.5 21.95 11C21.5 6.25 17.73 2.5 13 2.03V2.05Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",style:{fontSize:"28px",fontWeight:"700",color:"#343A40",marginBottom:"4px"},children:M().length}),s.jsx("div",{className:"stat-label",style:{fontSize:"13px",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Upcoming Weekly"})]})]}),s.jsx("div",{style:{position:"absolute",top:"20px",right:"40px"},children:s.jsxs("button",{onClick:async()=>{try{await n()}catch(T){console.error("Sign-out error:",T)}},className:"btn btn-danger",style:{padding:"10px 20px",fontSize:"14px",fontWeight:"600"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px"},children:s.jsx("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",fill:"currentColor"})}),"Sign Out"]})})]}),s.jsxs("div",{className:"navigation",children:[s.jsxs("button",{className:"nav-button",onClick:()=>g("add-client"),children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z",fill:"currentColor"})}),"Add Patient"]}),s.jsxs("button",{className:"nav-button",onClick:()=>g("calendar"),children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})}),"Manage Calendar"]}),s.jsxs("button",{className:"nav-button",onClick:()=>L(!0),children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z",fill:"currentColor"})}),"Schedule Appointment"]}),s.jsxs("button",{className:"nav-button",onClick:()=>g("exercise-library"),children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"currentColor"})}),"Exercise Library"]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"20px",alignItems:"stretch"},children:[s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})}),"Upcoming Appointments"]}),s.jsx("div",{className:"appointments-list",style:{maxHeight:"400px",overflowY:"auto"},children:H().length>0?H().map((T,R)=>s.jsxs("div",{style:{backgroundColor:R<5?"#F0F8F0":"#F8F9FA",border:R<5?"2px solid #28A745":"1px solid #E2E8F0",borderRadius:"8px",padding:"12px",marginBottom:"8px",display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#343A40",marginBottom:"4px"},children:[T.client_name,R<5&&s.jsx("span",{style:{color:"#28A745",fontSize:"11px",marginLeft:"8px"},children:"• Next 5"})]}),s.jsx("div",{style:{fontSize:"12px",color:"#6C757D"},children:T.start_ts?new Date(T.start_ts).toLocaleDateString("en",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No date"})]})}),s.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>{d(T.client_id),g("view-profile")},style:{padding:"3px 6px",fontSize:"10px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500",whiteSpace:"nowrap"},children:"Patient"}),s.jsx("button",{onClick:()=>{U(T);const $=new Date(T.start_ts),K=new Date(T.end_ts),ee=Math.round((K-$)/(1e3*60));ae({start_time:$.toISOString().slice(0,16),duration_minutes:ee,treatment_codes:"97110",notes:{subjective:"",objective:"",assessment:"",plan:"",synthesized_summary:"",goals_addressed:[],next_session_recommendations:[],confidence_score:0},main_notes:"",is_generating:!1}),Ye({isRecording:!1,isTranscribing:!1,mediaRecorder:null,audioChunks:[],transcript:""}),Y(!0)},style:{padding:"3px 6px",fontSize:"10px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500",whiteSpace:"nowrap"},children:"Take Note"}),s.jsx("button",{onClick:()=>{P(T),Z(!0)},style:{padding:"3px 6px",fontSize:"10px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500",whiteSpace:"nowrap"},children:"Plan Session"}),s.jsx("button",{onClick:()=>{ce(T),G(!0)},style:{padding:"3px 6px",fontSize:"10px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500",whiteSpace:"nowrap"},children:"Cancel"})]})]},T.id)):s.jsxs("div",{className:"empty-state",children:[s.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})}),s.jsx("h3",{children:"No upcoming appointments"}),s.jsx("p",{children:"Schedule appointments to see them here."})]})})]}),s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})}),"Past Appointments"]}),s.jsx("div",{className:"appointments-list",style:{maxHeight:"400px",overflowY:"auto"},children:z().length>0?s.jsxs("div",{children:[z().slice(0,5).map(T=>s.jsxs("div",{className:"appointment-item",children:[s.jsxs("div",{className:"appointment-info",children:[s.jsx("div",{className:"appointment-client",children:T.client_name}),s.jsx("div",{className:"appointment-time",children:T.start_ts?new Date(T.start_ts).toLocaleDateString("en",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No date"})]}),s.jsxs("div",{style:{display:"flex",gap:"6px"},children:[s.jsx("button",{className:"btn btn-secondary",onClick:()=>{U(T),Y(!0)},style:{padding:"4px 8px",fontSize:"11px"},title:"Session Recording & Notes",children:"📝 Record"}),s.jsx("button",{className:"btn btn-secondary",onClick:()=>{alert("Plan Next Session - Coming Soon!")},style:{padding:"4px 8px",fontSize:"11px"},title:"Plan Next Session",children:"📋 Plan"}),s.jsx("button",{className:"btn btn-secondary",onClick:()=>{alert("Open Chat - Coming Soon!")},style:{padding:"4px 8px",fontSize:"11px"},title:"Open Chat with Patient",children:"💬 Chat"})]})]},T.id)),z().length>5&&s.jsxs("div",{style:{borderTop:"2px solid #E2E8F0",paddingTop:"16px",marginTop:"16px"},children:[s.jsx("p",{style:{fontSize:"14px",color:"#6C757D",marginBottom:"12px",fontWeight:"600"},children:"More appointments (scroll to view):"}),z().slice(5).map(T=>s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:"#FAFAFA",borderRadius:"8px",marginBottom:"8px",border:"1px solid #F0F0F0"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#343A40"},children:T.client_name}),s.jsx("div",{style:{fontSize:"12px",color:"#6C757D"},children:T.start_ts?new Date(T.start_ts).toLocaleDateString("en",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No date"})]}),s.jsxs("div",{style:{display:"flex",gap:"4px"},children:[s.jsx("button",{onClick:()=>{U(T),Y(!0)},style:{padding:"4px 6px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"4px",fontSize:"10px",cursor:"pointer"},children:"📝"}),s.jsx("button",{onClick:()=>alert("Plan Next Session - Coming Soon!"),style:{padding:"4px 6px",backgroundColor:"#6C757D",color:"white",border:"none",borderRadius:"4px",fontSize:"10px",cursor:"pointer"},children:"📋"}),s.jsx("button",{onClick:()=>alert("Open Chat - Coming Soon!"),style:{padding:"4px 6px",backgroundColor:"#6C757D",color:"white",border:"none",borderRadius:"4px",fontSize:"10px",cursor:"pointer"},children:"💬"})]})]},T.id))]})]}):s.jsxs("div",{className:"empty-state",children:[s.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})}),s.jsx("h3",{children:"No past appointments"}),s.jsx("p",{children:"Completed sessions will appear here."})]})})]}),s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})}),"Patients"]}),s.jsx("div",{className:"search-container",children:s.jsxs("form",{className:"search-bar",onSubmit:Tn,children:[_?s.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #f3f3f3",borderTop:"2px solid #20B2AA",borderRadius:"50%",animation:"spin 1s linear infinite"}}):s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z",fill:"currentColor"})}),s.jsx("input",{type:"text",placeholder:"Search patients...",value:w,onChange:O,disabled:_}),w&&!_&&s.jsx("button",{type:"button",onClick:()=>{C(""),nt()},style:{background:"none",border:"none",color:"#6C757D",cursor:"pointer",padding:"4px"},title:"Clear search",children:"✕"})]})}),s.jsx("div",{className:"clients-list",style:{maxHeight:"400px",overflowY:"auto"},children:Array.isArray(r)&&r.length>0?r.map(T=>s.jsxs("div",{className:"client-item",children:[s.jsxs("div",{className:"client-info",onClick:()=>{d(T.id),g("view-profile")},style:{cursor:"pointer"},children:[s.jsx("div",{className:"client-avatar",children:T.name?T.name.charAt(0).toUpperCase():"P"}),s.jsx("div",{className:"client-details",children:s.jsx("h3",{children:T.name})})]}),s.jsx("div",{className:"client-actions",children:s.jsx("button",{className:"btn btn-secondary",onClick:R=>{R.stopPropagation(),v(T),L(!0)},title:"Schedule appointment with this patient",children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})})})})]},T.id)):s.jsxs("div",{className:"empty-state",children:[s.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})}),s.jsx("h3",{children:"No patients found"}),s.jsx("p",{children:"Start by adding your first patient to get started."})]})})]}),s.jsx(B2,{})]})]}),I&&s.jsx(Ff,{onClose:()=>{L(!1),v(null),nt()},selectedClient:h}),W&&b&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"32px",maxWidth:"1000px",width:"100%",maxHeight:"95vh",overflowY:"auto"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"2px solid #20B2AA"},children:[s.jsxs("h3",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#343A40",display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"#20B2AA"})}),"New Session - ",b.client_name]}),s.jsx("button",{onClick:()=>{Y(!1),U(null),ae({start_time:"",duration_minutes:60,treatment_codes:"97110",notes:{subjective:"",objective:"",assessment:"",plan:"",synthesized_summary:"",goals_addressed:[],next_session_recommendations:[],confidence_score:0},main_notes:"",is_generating:!1}),Ye({isRecording:!1,isTranscribing:!1,mediaRecorder:null,audioChunks:[],transcript:""})},style:{background:"none",border:"none",fontSize:"28px",cursor:"pointer",color:"#6C757D"},children:"×"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"24px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Start Time"}),s.jsx("input",{type:"datetime-local",value:B.start_time,onChange:T=>ae(R=>({...R,start_time:T.target.value})),style:{width:"100%",padding:"8px",border:"1px solid #E2E8F0",borderRadius:"4px",fontSize:"13px"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Duration (min)"}),s.jsx("input",{type:"number",value:B.duration_minutes,onChange:T=>ae(R=>({...R,duration_minutes:parseInt(T.target.value)||0})),style:{width:"100%",padding:"8px",border:"1px solid #E2E8F0",borderRadius:"4px",fontSize:"13px"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Treatment Codes"}),s.jsx("input",{type:"text",value:B.treatment_codes,onChange:T=>ae(R=>({...R,treatment_codes:T.target.value})),style:{width:"100%",padding:"8px",border:"1px solid #E2E8F0",borderRadius:"4px",fontSize:"13px"},placeholder:"e.g., 97110"})]})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"8px",textTransform:"uppercase"},children:"Session Notes"}),s.jsx("textarea",{value:B.main_notes,onChange:T=>ae(R=>({...R,main_notes:T.target.value})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px",minHeight:"100px"},placeholder:"Enter session notes or record audio..."})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px",flexWrap:"wrap"},children:[s.jsx("button",{onClick:be.isRecording?Q:q,style:{padding:"8px 16px",backgroundColor:be.isRecording?"#FF6B6B":"#20B2AA",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px"},children:be.isRecording?s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12",fill:"currentColor"})}),"Stop Recording"]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"currentColor"})}),"Start Recording"]})}),s.jsx("button",{onClick:pe,disabled:B.is_generating||!B.main_notes.trim(),style:{padding:"8px 16px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:B.is_generating||!B.main_notes.trim()?.6:1,fontSize:"13px"},children:B.is_generating?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid transparent",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",fill:"currentColor"})}),"Generate SOAP Note"]})})]}),be.isTranscribing&&s.jsxs("div",{style:{padding:"12px",backgroundColor:"#fff3cd",borderRadius:"6px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid #856404",borderRadius:"50%",animation:"spin 1s linear infinite"}}),s.jsx("span",{style:{color:"#856404",fontSize:"13px"},children:"Transcribing audio..."})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#343A40",margin:"0 0 12px 0"},children:"SOAP Note Form"}),B.is_generating?s.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#6C757D"},children:[s.jsx("div",{style:{marginBottom:"12px"},children:"Generating SOAP note..."}),s.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #E2E8F0",borderTop:"4px solid #20B2AA",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})]}):s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"16px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"S - Subjective"}),s.jsx("textarea",{value:B.notes.subjective,onChange:T=>ae(R=>({...R,notes:{...R.notes,subjective:T.target.value}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:3,placeholder:"What the client reported..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"O - Objective"}),s.jsx("textarea",{value:B.notes.objective,onChange:T=>ae(R=>({...R,notes:{...R.notes,objective:T.target.value}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:3,placeholder:"What you observed..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"A - Assessment"}),s.jsx("textarea",{value:B.notes.assessment,onChange:T=>ae(R=>({...R,notes:{...R.notes,assessment:T.target.value}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:3,placeholder:"Your assessment..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"P - Plan"}),s.jsx("textarea",{value:B.notes.plan,onChange:T=>ae(R=>({...R,notes:{...R.notes,plan:T.target.value}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:3,placeholder:"Next steps..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Synthesized Summary"}),s.jsx("textarea",{value:B.notes.synthesized_summary,onChange:T=>ae(R=>({...R,notes:{...R.notes,synthesized_summary:T.target.value}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:3,placeholder:"AI-generated session summary..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Goals Addressed"}),s.jsx("textarea",{value:Array.isArray(B.notes.goals_addressed)?B.notes.goals_addressed.join(", "):B.notes.goals_addressed||"",onChange:T=>ae(R=>({...R,notes:{...R.notes,goals_addressed:T.target.value.split(",").map($=>$.trim()).filter($=>$)}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:2,placeholder:"Goals addressed in this session..."})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6C757D",marginBottom:"4px",textTransform:"uppercase"},children:"Next Session Recommendations"}),s.jsx("textarea",{value:Array.isArray(B.notes.next_session_recommendations)?B.notes.next_session_recommendations.join(", "):B.notes.next_session_recommendations||"",onChange:T=>ae(R=>({...R,notes:{...R.notes,next_session_recommendations:T.target.value.split(",").map($=>$.trim()).filter($=>$)}})),style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"6px",resize:"vertical",fontSize:"13px"},rows:2,placeholder:"Recommendations for next session..."})]})]})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#343A40",margin:"0 0 12px 0"},children:"Session Notes Preview"}),s.jsxs("div",{style:{fontSize:"13px",color:"#343A40",lineHeight:"1.6",padding:"16px",backgroundColor:"#F8F9FA",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[B.main_notes&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Session Notes:"})," ",B.main_notes]}),B.notes.subjective&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Subjective:"})," ",B.notes.subjective]}),B.notes.objective&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Objective:"})," ",B.notes.objective]}),B.notes.assessment&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Assessment:"})," ",B.notes.assessment]}),B.notes.plan&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Plan:"})," ",B.notes.plan]}),B.notes.synthesized_summary&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Summary:"})," ",B.notes.synthesized_summary]}),B.notes.goals_addressed&&B.notes.goals_addressed.length>0&&s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Goals Addressed:"})," ",Array.isArray(B.notes.goals_addressed)?B.notes.goals_addressed.join(", "):B.notes.goals_addressed]}),B.notes.next_session_recommendations&&B.notes.next_session_recommendations.length>0&&s.jsxs("div",{style:{marginBottom:"0"},children:[s.jsx("strong",{style:{color:"#20B2AA"},children:"Next Session:"})," ",Array.isArray(B.notes.next_session_recommendations)?B.notes.next_session_recommendations.join(", "):B.notes.next_session_recommendations]}),!B.main_notes&&!B.notes.subjective&&!B.notes.objective&&!B.notes.assessment&&!B.notes.plan&&!B.notes.synthesized_summary&&(!B.notes.goals_addressed||B.notes.goals_addressed.length===0)&&(!B.notes.next_session_recommendations||B.notes.next_session_recommendations.length===0)&&s.jsx("div",{style:{fontStyle:"italic",color:"#6C757D"},children:"No session notes recorded yet. Use the form above to add notes or generate with AI."})]}),B.notes.confidence_score&&B.notes.confidence_score>0&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"12px",padding:"8px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #E2E8F0"},children:[s.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#6C757D"},children:"AI Confidence:"}),s.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#20B2AA"},children:[(B.notes.confidence_score*100).toFixed(0),"%"]})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[s.jsx("button",{onClick:()=>{Y(!1),U(null),ae({start_time:"",duration_minutes:60,treatment_codes:"97110",notes:{subjective:"",objective:"",assessment:"",plan:"",synthesized_summary:"",goals_addressed:[],next_session_recommendations:[],confidence_score:0},main_notes:"",is_generating:!1}),Ye({isRecording:!1,isTranscribing:!1,mediaRecorder:null,audioChunks:[],transcript:""})},className:"btn btn-secondary",children:"Cancel"}),s.jsx("button",{onClick:ue,disabled:!B.start_time||!B.notes.subjective&&!B.notes.objective,style:{padding:"10px 20px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",opacity:!B.start_time||!B.notes.subjective&&!B.notes.objective?.6:1},children:"Save Session"})]})]})}),X&&oe&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflowY:"auto"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[s.jsxs("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:["Plan Next Session - ",oe.client_name]}),s.jsx("button",{onClick:()=>{Z(!1),P(null)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"×"})]}),s.jsxs("div",{style:{textAlign:"center",padding:"40px 20px"},children:[s.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{margin:"0 auto 16px",color:"#6F42C1"},children:s.jsx("path",{d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})}),s.jsx("h4",{style:{fontSize:"18px",fontWeight:"600",color:"#343A40",marginBottom:"12px"},children:"Session Planning"}),s.jsxs("p",{style:{fontSize:"16px",color:"#6C757D",marginBottom:"24px"},children:["Plan the next session for ",s.jsx("strong",{children:oe.client_name})]}),s.jsx("div",{style:{backgroundColor:"#F8F9FA",padding:"20px",borderRadius:"8px",marginBottom:"24px"},children:s.jsxs("p",{style:{fontSize:"14px",color:"#6C757D",margin:"0"},children:["📋 Session planning functionality will be available soon!",s.jsx("br",{}),"This will include treatment goals, exercise planning, and progress tracking."]})}),s.jsx("button",{onClick:()=>{Z(!1),P(null)},className:"btn btn-primary",style:{padding:"12px 24px"},children:"Close"})]})]})}),V&&se&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"100%"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[s.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#DC3545"},children:"Cancel Appointment"}),s.jsx("button",{onClick:()=>{G(!1),ce(null),ze("")},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"×"})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsxs("p",{style:{fontSize:"16px",color:"#343A40",marginBottom:"16px"},children:["Are you sure you want to cancel the appointment with ",s.jsx("strong",{children:se.client_name}),"?"]}),s.jsxs("p",{style:{fontSize:"14px",color:"#6C757D",marginBottom:"16px"},children:["Scheduled for: ",se.start_ts?new Date(se.start_ts).toLocaleDateString("en",{weekday:"long",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No date"]}),s.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#343A40"},children:"Reason for cancellation (will be sent to patient):"}),s.jsx("textarea",{value:Ke,onChange:T=>ze(T.target.value),placeholder:"Please provide a reason for the cancellation...",style:{width:"100%",minHeight:"80px",padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"14px",resize:"vertical"}})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[s.jsx("button",{onClick:()=>{G(!1),ce(null),ze("")},className:"btn btn-secondary",children:"Keep Appointment"}),s.jsx("button",{onClick:Ee,disabled:!Ke.trim(),style:{padding:"12px 20px",backgroundColor:Ke.trim()?"#DC3545":"#CCC",color:"white",border:"none",borderRadius:"8px",cursor:Ke.trim()?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600"},children:"Cancel Appointment"})]})]})})]})},z2=({therapistId:e,therapistName:t,onClose:n})=>{const{getToken:r,user:i,loading:o}=De(),{showSuccess:a,showError:l}=Vs(),[c,u]=x.useState([]),[m,p]=x.useState(!0),[g,w]=x.useState(null),[C,_]=x.useState(""),[N,f]=x.useState(!1),[d,h]=x.useState(60),v="https://tv-api-326430627435.us-central1.run.app",S=async()=>{var b;try{const U=await r();if(!U){console.log("AVAILABLE SLOTS: No token available, skipping slot load"),p(!1);return}const X=new Date,Z=new Date;Z.setDate(Z.getDate()+30),console.log("Loading slots for therapist:",e);const oe=await fetch(`${v}/calendar/client/therapist/${e}/available-slots?start_date=${X.toISOString().split("T")[0]}&end_date=${Z.toISOString().split("T")[0]}`,{headers:{Authorization:`Bearer ${U}`}});if(console.log("🔍 CLIENT: Available slots response:",oe.status),oe.ok){const P=await oe.json();console.log("🔍 CLIENT: Available slots data:",P),console.log("🔍 CLIENT: Number of slots received:",((b=P.available_slots)==null?void 0:b.length)||0),P.available_slots&&P.available_slots.length>0&&(console.log("🔍 CLIENT: Sample slots:"),P.available_slots.slice(0,3).forEach(V=>{console.log(`   - ${V.slot_date} ${V.start_time} (${V.status})`)})),u(P.available_slots||[])}else{console.error("Failed to load available slots:",oe.status);const P=await oe.text();console.error("Error details:",P),l("Failed to load available time slots")}}catch(U){console.error("Error loading available slots:",U),l("Error loading available time slots")}finally{p(!1)}};x.useEffect(()=>{e&&!o&&i?(console.log("AVAILABLE SLOTS: Auth ready, loading available slots"),S()):!o&&!i&&(console.log("AVAILABLE SLOTS: No user authenticated"),p(!1))},[e,o,i]);const A=async()=>{if(g){f(!0);try{const b=await r(),[U,X]=g.start_time.split(":"),oe=parseInt(U)*60+parseInt(X)+d,P=Math.floor(oe/60),V=oe%60,G=`${P.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}:00`,se=await fetch(`${v}/calendar/client/scheduling-requests`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({therapist_id:e,requested_slot_id:g.id,requested_date:g.slot_date,requested_start_time:g.start_time,requested_end_time:G,client_message:C})});if(se.ok)a("Meeting request sent! Your therapist will respond soon."),setTimeout(()=>n(),1500);else{const ce=await se.json();l(ce.detail||"Failed to send meeting request")}}catch(b){console.error("Error submitting request:",b),l("Failed to send meeting request")}finally{f(!1)}}},I=()=>{const b={},U=new Date().toISOString().split("T")[0];return c.forEach(X=>{const Z=X.slot_date;Z>=U&&(b[Z]||(b[Z]=[]),b[Z].push(X))}),Object.keys(b).forEach(X=>{b[X].sort((Z,oe)=>Z.start_time.localeCompare(oe.start_time))}),b},L=b=>{const U={morning:[],afternoon:[],evening:[]};return b.forEach(X=>{const Z=parseInt(X.start_time.split(":")[0]);Z<12?U.morning.push(X):Z<18?U.afternoon.push(X):U.evening.push(X)}),U},k=b=>{const U=new Date(b),X=new Date,Z=new Date(X);return Z.setDate(X.getDate()+1),U.toDateString()===X.toDateString()?"Today":U.toDateString()===Z.toDateString()?"Tomorrow":U.toLocaleDateString("en",{weekday:"short",month:"short",day:"numeric"})},E=b=>{const[U,X]=b.split(":"),Z=parseInt(U),oe=Z>=12?"PM":"AM";return`${Z>12?Z-12:Z===0?12:Z}:${X} ${oe}`},W=I(),Y=Object.keys(W).sort();return m?s.jsx("div",{className:"available-slots-modal",children:s.jsxs("div",{className:"slots-modal-content",children:[s.jsxs("div",{className:"slots-modal-header",children:[s.jsx("h3",{children:"Available Time Slots"}),s.jsx("button",{onClick:n,className:"close-btn",children:"×"})]}),s.jsxs("div",{className:"loading-container",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Loading available times..."})]})]})}):s.jsx("div",{className:"available-slots-modal",children:s.jsxs("div",{className:"slots-modal-content",children:[s.jsxs("div",{className:"slots-modal-header",children:[s.jsx("h3",{children:"Available Time Slots"}),s.jsxs("p",{className:"therapist-name",children:["Dr. ",t]}),s.jsx("button",{onClick:n,className:"close-btn",children:"×"})]}),s.jsx("div",{className:"slots-modal-body",children:Y.length===0?s.jsxs("div",{className:"no-slots",children:[s.jsx("div",{className:"no-slots-icon",children:"📅"}),s.jsx("h4",{children:"No Available Times"}),s.jsx("p",{children:"Your therapist hasn't set any available times yet. Please check back later."})]}):s.jsxs("div",{className:"slots-content",children:[s.jsx("div",{className:"slots-grid",children:Y.slice(0,14).map(b=>{const U=W[b],X=L(U);return s.jsxs("div",{className:"date-slots-card",children:[s.jsxs("div",{className:"date-header",children:[s.jsx("span",{className:"date-name",children:k(b)}),s.jsxs("span",{className:"slots-count",children:[U.length," slots"]})]}),s.jsx("div",{className:"time-periods",children:Object.entries(X).map(([Z,oe])=>oe.length===0?null:s.jsxs("div",{className:"time-period",children:[s.jsx("div",{className:"period-label",children:Z==="morning"?"🌅":Z==="afternoon"?"☀️":"🌙"}),s.jsx("div",{className:"period-slots",children:oe.map(P=>s.jsx("button",{className:`slot-btn ${(g==null?void 0:g.id)===P.id?"selected":""}`,onClick:()=>w(P),children:E(P.start_time)},P.id))})]},Z))})]},b)})}),g&&s.jsxs("div",{className:"booking-section",children:[s.jsxs("div",{className:"selected-slot-info",children:[s.jsx("h4",{children:"Selected Time"}),s.jsxs("p",{children:[s.jsx("strong",{children:k(g.slot_date)})," at ",s.jsx("strong",{children:E(g.start_time)})]})]}),s.jsxs("div",{className:"duration-section",children:[s.jsx("label",{htmlFor:"duration",children:"Session Duration"}),s.jsxs("select",{id:"duration",value:d,onChange:b=>h(parseInt(b.target.value)),children:[s.jsx("option",{value:30,children:"30 minutes"}),s.jsx("option",{value:45,children:"45 minutes"}),s.jsx("option",{value:60,children:"1 hour"}),s.jsx("option",{value:75,children:"1 hour 15 minutes"}),s.jsx("option",{value:90,children:"1 hour 30 minutes"}),s.jsx("option",{value:105,children:"1 hour 45 minutes"}),s.jsx("option",{value:120,children:"2 hours"})]})]}),s.jsxs("div",{className:"message-section",children:[s.jsx("label",{htmlFor:"client-message",children:"Message for your therapist (optional)"}),s.jsx("textarea",{id:"client-message",value:C,onChange:b=>_(b.target.value),placeholder:"Any specific needs or questions for this session...",rows:3})]}),s.jsx("button",{onClick:A,className:"book-btn",disabled:N,children:N?"Sending Request...":"Book This Time"})]})]})})]})})},F2=({refreshTrigger:e})=>{const{getToken:t,user:n,loading:r}=De(),{showSuccess:i,showError:o}=Vs(),[a,l]=x.useState([]),[c,u]=x.useState(!0),[m,p]=x.useState(null),[g,w]=x.useState(!1),C="https://tv-api-326430627435.us-central1.run.app",_=async()=>{var d;try{u(!0);const h=await t();if(!h){console.log("📋 CLIENT: No token available, skipping request load");return}const v=await fetch(`${C}/calendar/scheduling-requests/pending`,{headers:{Authorization:`Bearer ${h}`}});if(v.ok){const S=await v.json();console.log("📋 CLIENT: Loaded pending requests:",((d=S.pending_requests)==null?void 0:d.length)||0),l(S.pending_requests||[])}else console.error("📋 CLIENT: Failed to load pending requests:",v.status)}catch(h){console.error("Error loading pending requests:",h)}finally{u(!1)}};x.useEffect(()=>{!r&&n?(console.log("📋 CLIENT: Auth ready, loading pending requests"),_()):!r&&!n&&(console.log("📋 CLIENT: No user authenticated, clearing requests"),l([]),u(!1))},[r,n]),x.useEffect(()=>{e&&n&&(console.log("📋 CLIENT: Refreshing requests due to trigger"),_())},[e,n]);const N=async d=>{if(confirm("Are you sure you want to cancel this meeting request?")){p(d);try{const h=await t();if(console.log("🔍 CLIENT: Cancelling request",d),console.log("🔍 CLIENT: Token status:",h?"Token available":"Token is NULL"),console.log("🔍 CLIENT: API URL:",`${C}/calendar/scheduling-requests/${d}/cancel`),!h){o("Authentication failed. Please refresh the page and try again.");return}const v=await fetch(`${C}/calendar/scheduling-requests/${d}/cancel`,{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(v.ok)i("Meeting request cancelled successfully"),_();else{const S=await v.json();o(S.detail||"Failed to cancel request")}}catch(h){console.error("Error cancelling request:",h),o("Failed to cancel request")}finally{p(null)}}},f=(d,h)=>{const[v,S,A]=d.split("-"),I=new Date(parseInt(v),parseInt(S)-1,parseInt(A)),[L,k]=h.split(":"),E=parseInt(L),W=E>=12?"PM":"AM",Y=E>12?E-12:E===0?12:E;return console.log("🗓️ DATE FORMAT DEBUG:",{originalDate:d,parsedDate:I.toLocaleDateString(),year:v,month:S,day:A}),`${I.toLocaleDateString("en",{weekday:"short",month:"short",day:"numeric"})} at ${Y}:${k} ${W}`};return c?s.jsxs("div",{className:"scheduling-requests",children:[s.jsx("h3",{children:"My Meeting Requests"}),s.jsxs("div",{className:"loading-container",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Loading requests..."})]})]}):s.jsxs("div",{className:"scheduling-requests",children:[s.jsx("h3",{children:"My Meeting Requests"}),a.length===0?s.jsx("div",{className:"no-requests",children:s.jsx("p",{children:"You have no pending meeting requests."})}):s.jsxs("div",{className:"requests-list",children:[(g?a:a.slice(0,5)).map(d=>s.jsx("div",{className:`request-item ${d.status}`,children:s.jsxs("div",{className:"request-info",children:[s.jsx("div",{className:"request-therapist",children:s.jsxs("strong",{children:["Dr. ",d.therapist_name]})}),s.jsx("div",{className:"request-datetime",children:f(d.requested_date,d.requested_start_time)}),d.client_message&&s.jsx("div",{className:"request-message",children:s.jsxs("em",{children:['Your message: "',d.client_message,'"']})}),d.therapist_response&&d.status!=="cancelled"&&s.jsxs("div",{className:"therapist-response",children:[s.jsx("strong",{children:"Therapist response:"}),' "',d.therapist_response,'"']}),d.status==="cancelled"&&d.therapist_response&&s.jsxs("div",{className:"cancellation-reason",children:[s.jsx("strong",{children:"Reason for cancellation:"})," ",d.therapist_response]}),s.jsxs("div",{className:"request-status",children:[s.jsx("span",{className:`status-badge ${d.status}`,children:d.status==="pending"?"Pending Response":d.status==="approved"?"Approved ✅":d.status==="declined"?"Declined ❌":d.status==="cancelled"?"Cancelled by Therapist ❌":d.status==="counter_proposed"?"Alternative Suggested":d.status.charAt(0).toUpperCase()+d.status.slice(1)}),d.status==="pending"&&s.jsx("button",{onClick:()=>N(d.id),disabled:m===d.id,className:"cancel-request-btn",style:{marginLeft:"12px",padding:"6px 12px",backgroundColor:"#DC3545",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",opacity:m===d.id?.6:1},children:m===d.id?"Cancelling...":"Cancel Request"})]}),d.responded_at&&s.jsx("div",{className:"response-time",children:s.jsxs("small",{children:["Responded: ",new Date(d.responded_at).toLocaleString("en",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})})]})},d.id)),a.length>5&&s.jsx("div",{className:"show-more-container",children:s.jsx("button",{onClick:()=>w(!g),className:"show-more-btn",style:{padding:"8px 16px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer",marginTop:"16px"},children:g?`Show Less (${a.length-5} hidden)`:`Show More (${a.length-5} more)`})})]})]})},$2=()=>{const{user:e,signOut:t,getToken:n,loading:r}=De(),[i,o]=x.useState(!1),[a,l]=x.useState(null),[c,u]=x.useState(null),[m,p]=x.useState(!0),[g,w]=x.useState([]),[C,_]=x.useState([]),[N,f]=x.useState(0),d="https://tv-api-326430627435.us-central1.run.app",h=async()=>{try{await t()}catch(S){console.error("Sign-out error:",S)}},v=async()=>{try{const S=await n();if(!S){console.log("CLIENT DASHBOARD: No token available, skipping data load"),p(!1);return}console.log("CLIENT DASHBOARD: Loading client data with token");const A=await fetch(`${d}/client/profile`,{headers:{Authorization:`Bearer ${S}`}});if(A.ok){const k=await A.json();console.log("Client profile data:",k),k.therapist_assignment?(l(k.therapist_assignment.therapist_id),u(k.therapist_assignment),console.log("Therapist assigned:",k.therapist_assignment)):console.log("No therapist assignment found")}else console.error("Failed to load client profile:",A.status);const I=await fetch(`${d}/client/appointments`,{headers:{Authorization:`Bearer ${S}`}});if(I.ok){const k=await I.json();w(k.appointments||[])}const L=await fetch(`${d}/client/notifications`,{headers:{Authorization:`Bearer ${S}`}});if(L.ok){const k=await L.json();_(k.notifications||[])}}catch(S){console.error("Error loading client data:",S)}finally{p(!1)}};return x.useEffect(()=>{!r&&e?(console.log("CLIENT DASHBOARD: Auth ready, loading client data"),v()):!r&&!e&&(console.log("CLIENT DASHBOARD: No user authenticated"),p(!1))},[r,e]),s.jsxs("div",{className:"client-dashboard",style:{backgroundColor:"#F8F9FA",minHeight:"100vh",padding:"24px 0",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,overflow:"auto"},children:[s.jsxs("div",{className:"dashboard-container",style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:[s.jsxs("div",{className:"dashboard-header",style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"32px",padding:"32px",textAlign:"center",position:"relative"},children:[s.jsxs("button",{onClick:h,style:{position:"absolute",top:"20px",right:"20px",padding:"8px 16px",backgroundColor:"#FF6B6B",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",fill:"currentColor"})}),"Sign Out"]}),s.jsx("h1",{style:{fontSize:"30px",fontWeight:"700",color:"#343A40",margin:"0 0 8px 0"},children:"Client Dashboard"}),s.jsxs("p",{style:{fontSize:"18px",color:"#6C757D",margin:"0"},children:["Welcome to your client portal",c&&s.jsxs("span",{style:{display:"block",fontSize:"16px",color:"#20B2AA",fontWeight:"500",marginTop:"4px"},children:["Your therapist: Dr. ",c.therapist_name]})]})]}),s.jsxs("div",{className:"dashboard-stats",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",children:g.filter(S=>new Date(S.start_ts)>new Date).length}),s.jsx("div",{className:"stat-label",children:"Upcoming Sessions"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",children:"0"}),s.jsx("div",{className:"stat-label",children:"Completed Sessions"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",children:"0"}),s.jsx("div",{className:"stat-label",children:"Goals Achieved"})]})]}),s.jsxs("div",{className:"dashboard-grid",children:[s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})}),"Request a Meeting"]}),s.jsx("p",{children:"Schedule a session with your therapist"}),c?s.jsxs("button",{className:"btn btn-primary",onClick:()=>{console.log("Opening calendar with therapist ID:",a),console.log("Therapist info:",c),o(!0)},disabled:m,children:["Schedule with ",c.therapist_name]}):s.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:m?"Loading...":"No therapist assigned yet"})]}),s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",fill:"currentColor"})}),"Progress Reports"]}),s.jsx("p",{children:"Track your therapy progress and goals"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Progress tracking coming soon!"),children:"View Progress"})]}),s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H6L4 18V4H20V16Z",fill:"currentColor"})}),"Messages"]}),s.jsx("p",{children:"Communicate with your therapist"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Messaging feature coming soon!"),children:"Open Messages"})]})]}),s.jsxs("div",{className:"appointments-section",children:[s.jsx("h3",{children:"My Appointments"}),g.length===0?s.jsx("div",{className:"no-appointments",children:s.jsx("p",{children:"You have no scheduled appointments yet."})}):s.jsxs("div",{className:"appointments-container",children:[s.jsxs("div",{className:"upcoming-appointments",children:[s.jsx("h4",{children:"🔜 Next 5 Appointments"}),s.jsx("div",{className:"appointments-list",children:g.filter(S=>new Date(S.start_ts)>new Date).sort((S,A)=>new Date(S.start_ts)-new Date(A.start_ts)).slice(0,5).map(S=>{const A=new Date(S.start_ts),I=new Date(S.end_ts);return s.jsx("div",{className:"appointment-item upcoming",children:s.jsxs("div",{className:"appointment-info",children:[s.jsx("div",{className:"appointment-therapist",children:s.jsxs("strong",{children:["Dr. ",S.therapist_name]})}),s.jsxs("div",{className:"appointment-datetime",children:[A.toLocaleDateString("en",{weekday:"long",month:"short",day:"numeric",year:"numeric"})," at ",A.toLocaleTimeString("en",{hour:"numeric",minute:"2-digit",hour12:!0})]}),s.jsxs("div",{className:"appointment-details-row",children:[s.jsxs("span",{className:"appointment-duration",children:[Math.round((I-A)/(1e3*60))," min"]}),s.jsx("span",{className:`status-badge ${S.status}`,children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]})]})},S.id)})}),g.filter(S=>new Date(S.start_ts)>new Date).length===0&&s.jsx("div",{className:"no-upcoming",children:s.jsx("p",{children:"No upcoming appointments scheduled."})})]}),g.length>5&&s.jsxs("div",{className:"all-appointments",children:[s.jsx("h4",{children:"📅 All Appointments"}),s.jsx("div",{className:"appointments-scroll",children:g.sort((S,A)=>new Date(A.start_ts)-new Date(S.start_ts)).map(S=>{const A=new Date(S.start_ts),I=new Date(S.end_ts),L=A>new Date;return s.jsx("div",{className:`appointment-item compact ${L?"upcoming":"past"}`,children:s.jsxs("div",{className:"appointment-compact-info",children:[s.jsxs("div",{className:"compact-datetime",children:[A.toLocaleDateString("en",{month:"short",day:"numeric"})," at ",A.toLocaleTimeString("en",{hour:"numeric",minute:"2-digit",hour12:!0})]}),s.jsxs("div",{className:"compact-details",children:[s.jsxs("span",{className:"compact-duration",children:[Math.round((I-A)/(1e3*60)),"min"]}),s.jsx("span",{className:`status-badge small ${S.status}`,children:S.status})]})]})},S.id)})})]})]})]}),s.jsx(F2,{refreshTrigger:N}),s.jsxs("div",{style:{padding:"20px",border:"2px solid red",margin:"10px"},children:[s.jsx("h3",{children:"🔍 Debug Tools"}),s.jsx("button",{onClick:async()=>{try{const S=await n(),I=await(await fetch(`${d}/calendar/debug/all-requests`,{headers:{Authorization:`Bearer ${S}`}})).json();console.log("🔍 ALL REQUESTS IN DB:",I),alert(`Found ${I.total_requests} total requests in database. Check console for details.`)}catch(S){console.error("Debug failed:",S)}},style:{padding:"8px 16px",backgroundColor:"#FF6B6B",color:"white",border:"none",borderRadius:"4px",marginRight:"8px"},children:"Show All Requests in DB"}),s.jsx("button",{onClick:async()=>{try{const S=await n(),I=await(await fetch(`${d}/calendar/debug/update-schema`,{method:"POST",headers:{Authorization:`Bearer ${S}`}})).json();console.log("🔧 SCHEMA UPDATE:",I),alert(I.message)}catch(S){console.error("Schema update failed:",S),alert("Failed to update schema")}},style:{padding:"8px 16px",backgroundColor:"#28A745",color:"white",border:"none",borderRadius:"4px"},children:"Update Schema"})]}),s.jsx("div",{className:"dashboard-actions",children:s.jsxs("button",{className:"btn btn-secondary",onClick:h,children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",fill:"currentColor"})}),"Sign Out"]})})]}),i&&a&&c&&s.jsx(z2,{therapistId:a,therapistName:c.therapist_name,onClose:()=>{o(!1),v(),f(S=>S+1)}})]})},H2=()=>{const{user:e,userData:t,getToken:n}=De(),[r,i]=x.useState(!0),[o,a]=x.useState(""),[l,c]=x.useState(""),[u,m]=x.useState(null),[p,g]=x.useState({address:{street:"",city:"",state:"",zip:""},school:"",diagnosis_codes:"",payer_id:"",auth_lims:{sessions_remaining:"",expires_date:""},goals:""});x.useEffect(()=>{w()},[e,t]);const w=async()=>{try{if(!e){a("Please sign in to access this page.");return}if((t==null?void 0:t.role)!=="client"){a("This page is only for clients. You will be redirected to your dashboard."),setTimeout(()=>{window.location.href="/"},2e3);return}const f=await n(),d=await fetch("https://tv-api-326430627435.us-central1.run.app/client/profile-status",{headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}});if(d.ok){const h=await d.json();if(m(h),h.profile_complete){a("Your profile is already complete. Redirecting to dashboard..."),setTimeout(()=>{window.location.href="/"},2e3);return}}else a("Failed to check profile status. Please try again.")}catch(f){console.error("Error checking access and profile status:",f),a("Network error. Please try again.")}finally{i(!1)}},C=f=>{const{name:d,value:h}=f.target;if(d.includes(".")){const[v,S]=d.split(".");g(A=>({...A,[v]:{...A[v],[S]:h}}))}else g(v=>({...v,[d]:h}))},_=()=>{const f=[];return p.address.street.trim()||f.push("Street address is required"),p.address.city.trim()||f.push("City is required"),p.address.state.trim()||f.push("State is required"),p.address.zip.trim()||f.push("ZIP code is required"),p.school.trim()||f.push("School is required"),p.diagnosis_codes.trim()||f.push("Diagnosis codes are required"),p.payer_id.trim()||f.push("Payer ID is required"),p.auth_lims.sessions_remaining.trim()||f.push("Sessions remaining is required"),p.auth_lims.expires_date.trim()||f.push("Authorization expiration date is required"),p.goals.trim()||f.push("Goals are required"),f},N=async f=>{f.preventDefault();const d=_();if(d.length>0){a("Please fill in all required fields: "+d.join(", "));return}i(!0),a(""),c("");try{const h=await n(),v=await fetch("https://tv-api-326430627435.us-central1.run.app/client/complete-profile",{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify({address:p.address,school:p.school,diagnosis_codes:p.diagnosis_codes.split(",").map(S=>S.trim()),payer_id:p.payer_id,auth_lims:p.auth_lims,goals:p.goals.split(",").map(S=>S.trim())})});if(v.ok){const S=await v.json();c("Profile completed successfully! You can now access all features."),setTimeout(()=>{window.location.reload()},2e3)}else{const S=await v.json();a(S.detail||"Failed to complete profile")}}catch(h){a("Network error. Please try again."),console.error("Error completing profile:",h)}finally{i(!1)}};return r?s.jsx("div",{className:"auth-container",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",background:"linear-gradient(135deg, #20B2AA, #48D1CC)"},children:s.jsx("div",{className:"auth-card",style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",padding:"48px",maxWidth:"400px",width:"100%"},children:s.jsxs("div",{className:"loading",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",color:"#6C757D",fontSize:"18px"},children:[s.jsx("div",{className:"spinner",style:{width:"48px",height:"48px",border:"4px solid #F8F9FA",borderTop:"4px solid #20B2AA",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),s.jsx("p",{children:"Checking your profile status..."})]})})}):o?s.jsx(s.Fragment,{children:s.jsx("div",{className:"profile-completion",children:s.jsxs("div",{className:"completion-message",children:[s.jsxs("h1",{children:["⚠️ ",o]}),s.jsx("p",{children:"Please wait while we redirect you..."})]})})}):u!=null&&u.profile_complete?s.jsx(s.Fragment,{children:s.jsx("div",{className:"profile-completion",children:s.jsxs("div",{className:"completion-message",children:[s.jsx("h1",{children:"✅ Profile Complete!"}),s.jsx("p",{children:"Your profile has been completed successfully. You can now access all features of TheraVillage."})]})})}):s.jsx("div",{className:"profile-completion",style:{backgroundColor:"#F8F9FA",minHeight:"100vh",padding:"24px 0",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,overflow:"auto"},children:s.jsxs("div",{className:"completion-container",style:{maxWidth:"800px",margin:"0 auto",padding:"0 24px"},children:[s.jsxs("div",{className:"completion-header",style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"32px",padding:"32px",textAlign:"center"},children:[s.jsx("h1",{style:{fontSize:"30px",fontWeight:"700",color:"#343A40",margin:"0 0 8px 0"},children:"Complete Your Profile"}),s.jsx("p",{style:{fontSize:"18px",color:"#6C757D",margin:"0"},children:"Please provide the following information to complete your profile and activate your account."})]}),s.jsx("div",{className:"form-container",style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",padding:"32px"},children:s.jsxs("form",{onSubmit:N,className:"profile-form",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h2",{children:"Address Information"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"address.street",children:"Street Address *"}),s.jsx("input",{type:"text",id:"address.street",name:"address.street",value:p.address.street,onChange:C,required:!0,placeholder:"Enter street address"})]}),s.jsxs("div",{className:"address-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"address.city",children:"City *"}),s.jsx("input",{type:"text",id:"address.city",name:"address.city",value:p.address.city,onChange:C,required:!0,placeholder:"City"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"address.state",children:"State *"}),s.jsx("input",{type:"text",id:"address.state",name:"address.state",value:p.address.state,onChange:C,required:!0,placeholder:"State",maxLength:"2"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"address.zip",children:"ZIP Code *"}),s.jsx("input",{type:"text",id:"address.zip",name:"address.zip",value:p.address.zip,onChange:C,required:!0,placeholder:"ZIP",maxLength:"10"})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h2",{children:"School Information"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"school",children:"School Name *"}),s.jsx("input",{type:"text",id:"school",name:"school",value:p.school,onChange:C,required:!0,placeholder:"Enter school name"})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h2",{children:"Clinical Information"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"diagnosis_codes",children:"Diagnosis Codes *"}),s.jsx("input",{type:"text",id:"diagnosis_codes",name:"diagnosis_codes",value:p.diagnosis_codes,onChange:C,required:!0,placeholder:"Enter diagnosis codes (comma-separated)"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"payer_id",children:"Payer ID *"}),s.jsx("input",{type:"text",id:"payer_id",name:"payer_id",value:p.payer_id,onChange:C,required:!0,placeholder:"Enter payer ID"})]}),s.jsxs("div",{className:"auth-limits-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"auth_lims.sessions_remaining",children:"Sessions Remaining *"}),s.jsx("input",{type:"number",id:"auth_lims.sessions_remaining",name:"auth_lims.sessions_remaining",value:p.auth_lims.sessions_remaining,onChange:C,required:!0,placeholder:"Number of sessions",min:"0"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"auth_lims.expires_date",children:"Authorization Expires *"}),s.jsx("input",{type:"date",id:"auth_lims.expires_date",name:"auth_lims.expires_date",value:p.auth_lims.expires_date,onChange:C,required:!0})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"goals",children:"Treatment Goals *"}),s.jsx("textarea",{id:"goals",name:"goals",value:p.goals,onChange:C,required:!0,placeholder:"Enter treatment goals (comma-separated)",rows:"3"})]})]}),o&&s.jsx("div",{className:"error-message",children:o}),l&&s.jsx("div",{className:"success-message",children:l}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{type:"submit",className:"submit-btn",disabled:r,children:r?"Completing Profile...":"Complete Profile"})})]})})]})})},V2=()=>{const{user:e,signOut:t}=De(),n=async()=>{try{await t()}catch(r){console.error("Sign-out error:",r)}};return s.jsx("div",{className:"agency-dashboard",children:s.jsxs("div",{className:"dashboard-container",children:[s.jsxs("div",{className:"dashboard-header",style:{position:"relative"},children:[s.jsxs("button",{onClick:n,style:{position:"absolute",top:"20px",right:"20px",padding:"8px 16px",backgroundColor:"#FF6B6B",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",fill:"currentColor"})}),"Sign Out"]}),s.jsx("h1",{children:"Agency Dashboard"}),s.jsx("p",{children:"Welcome to your agency management portal"})]}),s.jsxs("div",{className:"dashboard-stats",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",children:"0"}),s.jsx("div",{className:"stat-label",children:"Total Therapists"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",children:"0"}),s.jsx("div",{className:"stat-label",children:"Active Clients"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",children:"0"}),s.jsx("div",{className:"stat-label",children:"Sessions Today"})]})]}),s.jsxs("div",{className:"dashboard-grid",children:[s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})}),"Manage Therapists"]}),s.jsx("p",{children:"View and manage your therapy staff"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Therapist management coming soon!"),children:"Manage Staff"})]}),s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 17H7V10H9V17ZM13 17H11V7H13V17ZM17 17H15V13H17V17ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z",fill:"currentColor"})}),"Analytics"]}),s.jsx("p",{children:"View agency performance and reports"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Analytics dashboard coming soon!"),children:"View Analytics"})]}),s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9ZM19 9H14V4H5V21H19V9Z",fill:"currentColor"})}),"Billing"]}),s.jsx("p",{children:"Manage client billing and payments"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Billing system coming soon!"),children:"Manage Billing"})]}),s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})}),"Scheduling"]}),s.jsx("p",{children:"Manage appointments and schedules"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Scheduling system coming soon!"),children:"View Schedule"})]})]}),s.jsx("div",{className:"dashboard-actions",children:s.jsxs("button",{className:"btn btn-secondary",onClick:n,children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",fill:"currentColor"})}),"Sign Out"]})})]})})},U2=({user:e,onUserAction:t,onDeleteUser:n,currentUserUid:r})=>{const[i,o]=x.useState(!1),[a,l]=x.useState(""),c=async w=>{if(a===w){o(!0);try{await t(w,e.firebase_uid),l("")}finally{o(!1)}}else l(w)},u=async()=>{if(a==="delete"){o(!0);try{await n(e.id,e.name),l("")}finally{o(!1)}}else l("delete")},m=()=>{l("")},p=(w,C,_,N="secondary")=>{const f=e.id===r,d=i||w==="demote"&&f;return s.jsxs("button",{className:`action-btn ${N} ${d?"disabled":""}`,onClick:()=>c(w),disabled:d,title:f&&w==="demote"?"You cannot demote yourself":"",children:[_," ",C]},w)},g=(w,C,_,N="danger")=>a!==w?null:s.jsxs("div",{className:"confirm-actions",children:[s.jsxs("span",{className:"confirm-text",children:["Confirm ",w,"?"]}),s.jsxs("button",{className:`action-btn ${N}`,onClick:()=>c(w),disabled:i,children:[_," Yes, ",C]}),s.jsx("button",{className:"action-btn secondary",onClick:m,disabled:i,children:"❌ Cancel"})]},`confirm-${w}`);return s.jsxs("div",{className:"user-actions",children:[!a&&s.jsxs("div",{className:"action-buttons",children:[e.role!=="admin"&&p("promote","Promote","👑","primary"),e.role==="admin"&&p("demote","Demote","👤","warning"),e.status==="active"&&p("revoke","Revoke","🚫","danger"),e.status!=="active"&&p("enable","Enable","✅","success"),s.jsx("button",{className:"action-btn danger",onClick:u,disabled:i,title:"Delete user and all related data",children:"🗑️ Delete"})]}),a==="promote"&&g("promote","Promote to Admin","👑","primary"),a==="demote"&&g("demote","Demote from Admin","👤","warning"),a==="revoke"&&g("revoke","Revoke Access","🚫","danger"),a==="enable"&&g("enable","Enable Access","✅","success"),a==="delete"&&s.jsxs("div",{className:"confirm-actions",children:[s.jsx("span",{className:"confirm-text",children:"Confirm delete?"}),s.jsx("button",{className:"action-btn danger",onClick:u,disabled:i,children:"🗑️ Yes, Delete"}),s.jsx("button",{className:"action-btn secondary",onClick:m,disabled:i,children:"❌ Cancel"})]}),i&&s.jsx("div",{className:"action-loading",children:s.jsx("span",{children:"🔄 Processing..."})})]})},W2=({users:e,onUserAction:t,onDeleteUser:n,currentUserUid:r})=>{const i=e||[];if(i.length===0)return s.jsx("div",{className:"user-list-empty",children:s.jsx("p",{children:"No users found."})});const o=l=>{const c=new Date(l);return c.toLocaleDateString()+" "+c.toLocaleTimeString()},a=(l,c)=>l?s.jsx("span",{className:"status-badge disabled",children:"🚫 Disabled"}):c?s.jsx("span",{className:"status-badge admin",children:"👑 Admin"}):s.jsx("span",{className:"status-badge active",children:"✅ Active"});return s.jsxs("div",{className:"user-list",children:[s.jsx("div",{className:"user-list-header",children:s.jsxs("div",{className:"user-count",children:["Total Users: ",i.length]})}),s.jsx("div",{className:"user-table-container",children:s.jsxs("table",{className:"user-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"👤 User"}),s.jsx("th",{children:"📧 Email"}),s.jsx("th",{children:"📅 Created"}),s.jsx("th",{children:"🏷️ Status"}),s.jsx("th",{children:"🔧 Actions"})]})}),s.jsx("tbody",{children:i.map(l=>s.jsxs("tr",{className:"user-row",children:[s.jsxs("td",{className:"user-info",children:[s.jsx("div",{className:"user-name",children:l.name||"No Name"}),s.jsxs("div",{className:"user-id",children:["ID: ",l.id]})]}),s.jsx("td",{className:"user-email",children:l.email}),s.jsx("td",{className:"user-created",children:o(l.created_at)}),s.jsx("td",{className:"user-status",children:a(l.status!=="active",l.role==="admin")}),s.jsx("td",{className:"user-actions",children:s.jsx(U2,{user:l,onUserAction:t,onDeleteUser:n,currentUserUid:r})})]},l.id))})]})})]})},ci="https://tv-api-326430627435.us-central1.run.app",$f=()=>{const{user:e,isAdmin:t,signOut:n}=De(),[r,i]=x.useState([]),[o,a]=x.useState(!0),[l,c]=x.useState(""),[u,m]=x.useState("");x.useEffect(()=>{t&&p()},[t]);const p=async()=>{try{a(!0);const C=await e.getIdToken(),_=await fetch(`${ci}/admin/users`,{headers:{Authorization:`Bearer ${C}`}});if(_.ok){const N=await _.json();console.log("AdminPanel: Received users data:",N),i(N.users||[])}else{const N=await _.json().catch(()=>({}));throw console.error("AdminPanel: Failed to fetch users:",_.status,N),new Error(`Failed to fetch users: ${_.status} - ${N.detail||"Unknown error"}`)}}catch(C){c("Failed to load users: "+C.message)}finally{a(!1)}},g=async(C,_)=>{try{c(""),m("");const N=await e.getIdToken(),f=await fetch(`${ci}/admin/users/${_}/${C}`,{method:"POST",headers:{Authorization:`Bearer ${N}`}});if(f.ok){const d=await f.json();m(`${C} successful: ${d.message}`),p()}else{const d=await f.json();throw new Error(d.detail||"Action failed")}}catch(N){c(`Failed to ${C}: `+N.message)}},w=async(C,_)=>{try{c(""),m("");const N=await e.getIdToken(),f=await fetch(`${ci}/admin/users/${C}/impact`,{headers:{Authorization:`Bearer ${N}`}});if(!f.ok){const S=await f.json();throw new Error(S.detail||"Failed to get deletion impact")}const d=await f.json();if(!window.confirm(`Are you sure you want to delete ${_}?

${d.impact_message}

This action cannot be undone.`))return;const v=await fetch(`${ci}/admin/users/${C}`,{method:"DELETE",headers:{Authorization:`Bearer ${N}`}});if(v.ok){const S=await v.json();m(`User deleted successfully: ${S.impact_message}`),p()}else{const S=await v.json();throw new Error(S.detail||"Deletion failed")}}catch(N){c("Failed to delete user: "+N.message)}};return t?s.jsx("div",{className:"admin-panel",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,overflow:"auto",backgroundColor:"#F8F9FA",padding:"24px 0"},children:s.jsxs("div",{className:"dashboard-container",style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:[s.jsxs("div",{className:"dashboard-header",style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"32px",padding:"32px",textAlign:"center",position:"relative"},children:[s.jsxs("button",{onClick:async()=>{try{await n()}catch(C){console.error("Sign-out error:",C)}},style:{position:"absolute",top:"20px",right:"20px",padding:"8px 16px",backgroundColor:"#FF6B6B",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",fill:"currentColor"})}),"Sign Out"]}),s.jsx("h1",{style:{fontSize:"30px",fontWeight:"700",color:"#343A40",margin:"0 0 8px 0"},children:"Admin Panel"}),s.jsx("p",{style:{fontSize:"18px",color:"#6C757D",margin:"0"},children:"System administration and user management"})]}),s.jsxs("div",{className:"dashboard-stats",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",children:r.length}),s.jsx("div",{className:"stat-label",children:"Total Users"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",children:r.filter(C=>C.role==="therapist").length}),s.jsx("div",{className:"stat-label",children:"Therapists"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})})}),s.jsx("div",{className:"stat-value",children:r.filter(C=>C.role==="client").length}),s.jsx("div",{className:"stat-label",children:"Clients"})]})]}),s.jsx("div",{className:"dashboard-grid",children:s.jsxs("div",{className:"dashboard-card",children:[s.jsxs("h2",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})}),"User Management"]}),!o&&!l&&s.jsxs("div",{className:"user-summary",style:{marginBottom:"12px",color:"var(--gray)"},children:["Total users: ",r.length]}),o?s.jsxs("div",{className:"loading",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",color:"#6C757D",fontSize:"18px"},children:[s.jsx("div",{className:"spinner",style:{width:"48px",height:"48px",border:"4px solid #F8F9FA",borderTop:"4px solid #20B2AA",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),s.jsx("p",{children:"Loading users..."})]}):l?s.jsxs("div",{className:"error",children:[s.jsx("p",{children:l}),s.jsx("button",{className:"btn btn-primary",onClick:p,children:"Retry"})]}):s.jsx(W2,{users:r,onUserAction:g,onDeleteUser:w,currentUserUid:e==null?void 0:e.uid})]})}),u&&s.jsx("div",{className:"success-message",children:u})]})}):s.jsx("div",{className:"admin-panel",children:s.jsxs("div",{className:"admin-error",children:[s.jsx("h2",{children:"🚫 Access Denied"}),s.jsx("p",{children:"You don't have admin privileges to access this page."})]})})},q2=()=>{const{user:e,loading:t,signInWithGoogle:n,userData:r}=De(),[i,o]=x.useState(!1),a=ao.useMemo(()=>{if(e===null)return null;try{const u=localStorage.getItem("theravillage_user_data");return u?JSON.parse(u):null}catch{return null}},[e]),l=(r==null?void 0:r.role)||(a==null?void 0:a.role);if(l==="therapist")return s.jsx(O2,{});if(l==="admin")return s.jsx($f,{});if(l==="client")return s.jsx($2,{});if(l==="agency")return s.jsx(V2,{});if((r==null?void 0:r.role)==="pending")return s.jsx(T2,{});const c=async()=>{o(!0);try{await n()}catch(u){console.error("Sign-in error:",u)}finally{o(!1)}};return s.jsx("div",{className:"auth-container",style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",background:"linear-gradient(135deg, #20B2AA, #48D1CC)"},children:s.jsxs("div",{className:"auth-card",style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",padding:"48px",maxWidth:"400px",width:"100%"},children:[s.jsxs("div",{className:"auth-header",style:{textAlign:"center",marginBottom:"32px"},children:[s.jsx("div",{className:"auth-logo",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",background:"linear-gradient(135deg, #20B2AA, #48D1CC)",borderRadius:"50%",color:"white",margin:"0 auto 24px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"currentColor"}),s.jsx("path",{d:"M19 15L19.5 17.5L22 18L19.5 18.5L19 21L18.5 18.5L16 18L18.5 17.5L19 15Z",fill:"currentColor"}),s.jsx("path",{d:"M5 15L5.5 17.5L8 18L5.5 18.5L5 21L4.5 18.5L2 18L4.5 17.5L5 15Z",fill:"currentColor"})]})}),s.jsx("h1",{style:{fontSize:"30px",fontWeight:"700",color:"#343A40",margin:"0 0 8px 0"},children:"TheraVillage"}),s.jsx("p",{style:{fontSize:"18px",color:"#6C757D",margin:"0"},children:"Sign in to continue"})]}),s.jsx("button",{type:"button",onClick:c,disabled:i||t,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:"12px 24px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"8px",fontWeight:"500",cursor:i||t?"not-allowed":"pointer",opacity:i||t?.6:1,width:"100%"},children:i||t?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid transparent",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Signing in..."]}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]})})]})})},Z2=()=>{const{invitationToken:e}=U1(),t=pc(),{user:n,signInWithGoogleForInvitation:r,isRegistered:i,auth:o}=De(),[a,l]=x.useState(null),[c,u]=x.useState(!0),[m,p]=x.useState(null),[g,w]=x.useState(!1);x.useEffect(()=>{C()},[e]);const C=async()=>{try{u(!0);const h=await fetch(`https://tv-api-326430627435.us-central1.run.app/users/invite/${e}`);if(h.ok){const v=await h.json();l(v)}else h.status===404?p("Invitation not found or has expired"):p("Failed to load invitation details")}catch(h){p("Network error while loading invitation"),console.error("Error fetching invitation:",h)}finally{u(!1)}},_=async h=>{if(h.email!==a.client_email){p(`Email mismatch! You are signed in with ${h.email} but the invitation is for ${a.client_email}. Please sign in with the correct email.`);return}w(!0);try{const v=await h.getIdToken(),S=await fetch("https://tv-api-326430627435.us-central1.run.app/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:v,name:a.client_name})});if(S.ok)t("/",{replace:!0});else{const A=await S.json();A.detail&&A.detail.includes("doesn't match any pending invitations")?p("Email mismatch: Please sign in with the email address that received the invitation."):p(A.detail||"Failed to accept invitation")}}catch(v){p("Network error while accepting invitation"),console.error("Error accepting invitation:",v)}finally{w(!1)}},N=async()=>{if(!n){try{await r(!0)}catch(h){console.error("Sign-in error:",h),p("Failed to sign in. Please try again.")}return}if(n.email!==a.client_email){p(`Email mismatch! You are signed in with ${n.email} but the invitation is for ${a.client_email}. Please sign in with the correct email.`);return}await _(n)},f=async()=>{try{const h=await r(!0);if(h.user.email!==a.client_email){p(`Email mismatch! You signed in with ${h.user.email} but the invitation is for ${a.client_email}. Please sign in with the correct email.`),await ls(o);return}await _(h.user)}catch(h){console.error("Sign-in error:",h),p("Failed to sign in. Please try again.")}},d=async()=>{try{await ls(o),p(null)}catch(h){console.error("Sign-out error:",h)}};if(c)return s.jsx("div",{className:"auth-container",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",background:"linear-gradient(135deg, #20B2AA, #48D1CC)"},children:s.jsx("div",{className:"auth-card",style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",padding:"48px",maxWidth:"400px",width:"100%"},children:s.jsxs("div",{className:"loading",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",color:"#6C757D",fontSize:"18px"},children:[s.jsx("div",{className:"spinner",style:{width:"48px",height:"48px",border:"4px solid #F8F9FA",borderTop:"4px solid #20B2AA",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),s.jsx("p",{children:"Loading invitation details..."})]})})});if(m){const h=m.includes("Email mismatch");return s.jsx("div",{className:"auth-container",style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",background:"linear-gradient(135deg, #20B2AA, #48D1CC)"},children:s.jsxs("div",{className:"auth-card",style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",padding:"48px",maxWidth:"500px",width:"100%",textAlign:"center"},children:[s.jsx("div",{className:"error-icon",style:{fontSize:"64px",marginBottom:"16px"},children:"❌"}),s.jsx("h1",{style:{fontSize:"30px",fontWeight:"700",color:"#343A40",margin:"0 0 16px 0"},children:"Invitation Error"}),s.jsx("p",{style:{fontSize:"16px",color:"#6C757D",margin:"0 0 32px 0",lineHeight:"1.6"},children:m}),s.jsx("div",{className:"error-actions",style:{display:"flex",flexDirection:"column",gap:"16px"},children:h?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn btn-secondary",onClick:d,style:{padding:"12px 24px",backgroundColor:"white",border:"2px solid #20B2AA",borderRadius:"8px",color:"#20B2AA",fontWeight:"500",cursor:"pointer"},children:"Sign Out & Try Again"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>t("/"),style:{padding:"12px 24px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"8px",fontWeight:"500",cursor:"pointer"},children:"Go to Home"})]}):s.jsx("button",{className:"btn btn-primary",onClick:()=>t("/"),style:{padding:"12px 24px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"8px",fontWeight:"500",cursor:"pointer"},children:"Go to Home"})})]})})}return a?s.jsx("div",{className:"auth-container",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",background:"linear-gradient(135deg, #20B2AA, #48D1CC)"},children:s.jsxs("div",{className:"auth-card",style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",padding:"48px",maxWidth:"600px",width:"100%"},children:[s.jsxs("div",{className:"auth-header",style:{textAlign:"center",marginBottom:"32px"},children:[s.jsx("div",{className:"auth-logo",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",background:"linear-gradient(135deg, #20B2AA, #48D1CC)",borderRadius:"50%",color:"white",margin:"0 auto 24px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"currentColor"}),s.jsx("path",{d:"M19 15L19.5 17.5L22 18L19.5 18.5L19 21L18.5 18.5L16 18L18.5 17.5L19 15Z",fill:"currentColor"}),s.jsx("path",{d:"M5 15L5.5 17.5L8 18L5.5 18.5L5 21L4.5 18.5L2 18L4.5 17.5L5 15Z",fill:"currentColor"})]})}),s.jsx("h1",{style:{fontSize:"30px",fontWeight:"700",color:"#343A40",margin:"0 0 8px 0"},children:"TheraVillage"}),s.jsx("p",{style:{fontSize:"18px",color:"#6C757D",margin:"0"},children:"You've been invited to join"})]}),s.jsxs("div",{className:"invitation-details",children:[s.jsxs("div",{className:"invitation-info",style:{marginBottom:"32px"},children:[s.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#343A40",margin:"0 0 16px 0",textAlign:"center"},children:["Welcome, ",a.client_name,"!"]}),s.jsxs("p",{style:{fontSize:"16px",color:"#6C757D",margin:"0 0 24px 0",textAlign:"center",lineHeight:"1.6"},children:["You've been invited by ",s.jsx("strong",{children:a.therapist_name})," to join TheraVillage."]}),s.jsxs("div",{className:"invitation-meta",style:{backgroundColor:"#F8F9FA",borderRadius:"12px",padding:"24px",border:"1px solid #E2E8F0"},children:[s.jsxs("div",{className:"meta-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid #E2E8F0"},children:[s.jsx("span",{className:"label",style:{fontSize:"14px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Client:"}),s.jsx("span",{className:"value",style:{fontSize:"16px",fontWeight:"500",color:"#343A40"},children:a.client_name})]}),s.jsxs("div",{className:"meta-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid #E2E8F0"},children:[s.jsx("span",{className:"label",style:{fontSize:"14px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Email:"}),s.jsx("span",{className:"value",style:{fontSize:"16px",fontWeight:"500",color:"#343A40"},children:a.client_email})]}),s.jsxs("div",{className:"meta-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid #E2E8F0"},children:[s.jsx("span",{className:"label",style:{fontSize:"14px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Therapist:"}),s.jsx("span",{className:"value",style:{fontSize:"16px",fontWeight:"500",color:"#343A40"},children:a.therapist_name})]}),s.jsxs("div",{className:"meta-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{className:"label",style:{fontSize:"14px",fontWeight:"600",color:"#6C757D",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Expires:"}),s.jsx("span",{className:"value",style:{fontSize:"16px",fontWeight:"500",color:"#343A40"},children:new Date(a.expires_at).toLocaleDateString()})]})]})]}),n?s.jsxs("div",{className:"invitation-actions",style:{textAlign:"center"},children:[s.jsx("p",{style:{fontSize:"16px",color:"#6C757D",margin:"0 0 24px 0"},children:"Ready to accept this invitation?"}),s.jsx("button",{className:"btn btn-primary",onClick:N,disabled:g,style:{padding:"12px 24px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"8px",fontWeight:"500",cursor:g?"not-allowed":"pointer",opacity:g?.6:1,width:"100%"},children:g?"Accepting...":"Accept Invitation"})]}):s.jsxs("div",{className:"invitation-actions",style:{textAlign:"center"},children:[s.jsx("p",{style:{fontSize:"16px",color:"#6C757D",margin:"0 0 16px 0"},children:"Please sign in with Google to accept this invitation:"}),s.jsx("div",{className:"email-reminder",style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"8px",padding:"16px",margin:"0 0 24px 0"},children:s.jsxs("p",{style:{fontSize:"14px",color:"#856404",margin:"0"},children:[s.jsx("strong",{children:"Important:"})," Make sure to sign in with ",s.jsx("strong",{children:a.client_email})]})}),s.jsxs("button",{className:"btn btn-primary google-btn",onClick:f,disabled:g,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:"12px 24px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"8px",fontWeight:"500",cursor:g?"not-allowed":"pointer",opacity:g?.6:1,width:"100%"},children:[s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]})]})]}),m&&s.jsx("div",{className:"error-message",style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginTop:"16px",textAlign:"center"},children:m})]})}):s.jsx("div",{className:"auth-container",style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",background:"linear-gradient(135deg, #20B2AA, #48D1CC)"},children:s.jsxs("div",{className:"auth-card",style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",padding:"48px",maxWidth:"500px",width:"100%",textAlign:"center"},children:[s.jsx("div",{className:"error-icon",style:{fontSize:"64px",marginBottom:"16px"},children:"❌"}),s.jsx("h1",{style:{fontSize:"30px",fontWeight:"700",color:"#343A40",margin:"0 0 16px 0"},children:"Invalid Invitation"}),s.jsx("p",{style:{fontSize:"16px",color:"#6C757D",margin:"0 0 32px 0",lineHeight:"1.6"},children:"This invitation link is not valid or has expired."}),s.jsx("button",{className:"btn btn-primary",onClick:()=>t("/"),style:{padding:"12px 24px",backgroundColor:"#20B2AA",color:"white",border:"none",borderRadius:"8px",fontWeight:"500",cursor:"pointer"},children:"Go to Home"})]})})},G2=()=>s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #20B2AA, #48D1CC)"},children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",padding:"48px",textAlign:"center"},children:[s.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #F8F9FA",borderTop:"4px solid #20B2AA",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),s.jsx("p",{style:{color:"#6C757D",fontSize:"18px",margin:0},children:"Loading..."})]})});function K2(){return s.jsx(k2,{children:s.jsx(b2,{children:s.jsx(Ax,{children:s.jsx(x.Suspense,{fallback:s.jsx(G2,{}),children:s.jsx("div",{className:"App",children:s.jsx("main",{className:"main-content",children:s.jsxs(ox,{children:[s.jsx(Jn,{path:"/",element:s.jsx(q2,{})}),s.jsx(Jn,{path:"/client/complete-profile",element:s.jsx(H2,{})}),s.jsx(Jn,{path:"/admin",element:s.jsx($f,{})}),s.jsx(Jn,{path:"/invite/:invitationToken",element:s.jsx(Z2,{})}),s.jsx(Jn,{path:"*",element:s.jsx(sx,{to:"/",replace:!0})})]})})})})})})})}pa.createRoot(document.getElementById("root")).render(s.jsx(ao.StrictMode,{children:s.jsx(K2,{})}));
